(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{328:function(e,t,i){"use strict";i.d(t,"f",(function(){return l})),i.d(t,"g",(function(){return c})),i.d(t,"j",(function(){return d})),i.d(t,"l",(function(){return p})),i.d(t,"i",(function(){return h})),i.d(t,"d",(function(){return m})),i.d(t,"n",(function(){return _})),i.d(t,"e",(function(){return b})),i.d(t,"o",(function(){return S})),i.d(t,"p",(function(){return v})),i.d(t,"h",(function(){return f})),i.d(t,"k",(function(){return C})),i.d(t,"m",(function(){return E})),i.d(t,"c",(function(){return w})),i.d(t,"b",(function(){return A})),i.d(t,"a",(function(){return D}));var a=i(101),n=i(377),s=i(2),o=i(17),r=i(357);function l(e){const t=new Date(e).toISOString();return{date:t.slice(0,10).replace(/-/g,"â€‘"),time:t.slice(11,16)}}const c=(e,t)=>{if(e>t)return;const i=(t.getTime()-e.getTime())/1e3/60,a=i/60,n=a/24,o=Math.floor(n),r=Math.floor(a%24),l=Math.floor(i%60),c=1===o?"".concat(o," ").concat(Object(s.Translate)("meeting_details_day")):"".concat(o," ").concat(Object(s.Translate)("meeting_details_days")),d=1===r?"".concat(r," ").concat(Object(s.Translate)("meeting_details_hour")):"".concat(r," ").concat(Object(s.Translate)("meeting_details_hours")),p=1===l?"".concat(l," ").concat(Object(s.Translate)("meeting_details_minute")):"".concat(l," ").concat(Object(s.Translate)("meeting_details_minutes")),h=r>0?d:"",u=l>0?p:"";let m=o>0?c:"";return m.length&&(h||u)&&(m="".concat(m,", ")),m="".concat(m).concat(h),m.length&&h&&u&&(m="".concat(m,", ")),m="".concat(m).concat(u),m},d=e=>{let t=e;t=Math.floor(t/1e3);const i=t%60;t=Math.floor(t/60);const a=t%60;t=Math.floor(t/60);const n=f(t%60),s=f(a),o=f(i);return"".concat(n,":").concat(s,":").concat(o)},p=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i={long:[],short:[]};let a=new Date;for(t?a=new Date(Date.UTC(2017,0,2)):a.setDate(a.getDate()-a.getDay());i.long.length<7;)i.long.push(a.toLocaleString(e,{weekday:"long",timeZone:"UTC"})),i.short.push(a.toLocaleString(e,{weekday:"short",timeZone:"UTC"})),a.setDate(a.getDate()+1);return i},h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US";return e.toLocaleTimeString(t,{hour:"numeric",minute:"numeric"})},u=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en-US";const a=h(e,i),n=h(t,i);return"".concat(a," - ").concat(n)},m=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US";return e.toLocaleDateString(t,{day:"numeric",month:"short",year:"numeric"})},g=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US",i="";return e.dtstart&&(i+=Object(s.Translate)("meeting_scheduler_recurrence_interval_from_date",e.dtstart.toLocaleDateString(t,{day:"numeric",month:"long",year:"numeric"}))),e.until?i+=Object(s.Translate)("meeting_scheduler_recurrence_interval_until_date",e.until.toLocaleDateString(t,{day:"numeric",month:"long",year:"numeric"})):e.count&&(i+=Object(s.Translate)("meeting_scheduler_recurrence_repeats_n_times",e.count)),i},_=(e,t)=>e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate(),b=(e,t)=>{const i=a.DateTime.fromMillis(e.getTime()),n=a.DateTime.fromMillis(t.getTime()),o=i.diff(n,["days","hours","minutes"]),r=o.days,l=f(o.hours),c=f(o.minutes);let d=Object(s.Translate)("schedule_meeting_duration",l,c);return 1===o.days&&(d=Object(s.Translate)("schedule_meeting_duration_multi_day_singular",l,c)),o.days>1&&(d=Object(s.Translate)("schedule_meeting_duration_multi_day_plural",r,l,c)),d},S=e=>{const t=new Date;return _(t,e)},v=e=>{const t=new Date,i=new Date(t.getFullYear(),t.getMonth(),t.getDate()+1);return _(i,e)},f=e=>e<10?"0".concat(e):"".concat(e);function C(e,t){const i=Object(r.a)(t),a=e.getDate()-e.getDay()+(e.getDay()>=i?i:i-7),n=new Date(e.setDate(a));n.setHours(0,0,0,0);const s=new Date(e.setDate(e.getDate()+6));return s.setHours(23,59,59,999),{from:n,to:s}}function E(e,t,i){return e>=t&&e<=i}const T={1:Object(s.Translate)("meeting_scheduler_yearly_recurrence_rank_first_value"),2:Object(s.Translate)("meeting_scheduler_yearly_recurrence_rank_second_value"),3:Object(s.Translate)("meeting_scheduler_yearly_recurrence_rank_third_value"),4:Object(s.Translate)("meeting_scheduler_yearly_recurrence_rank_fourth_value"),5:Object(s.Translate)("meeting_scheduler_yearly_recurrence_rank_last_value")},O=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US";const i=new Date;return i.setMonth(e-1),i.toLocaleDateString(t,{month:"long"})},N=e=>!!e&&(-1!==e.indexOf("MO")&&-1!==e.indexOf("TU")&&-1!==e.indexOf("WE")&&-1!==e.indexOf("TH")&&-1!==e.indexOf("FR")&&-1===e.indexOf("SA")&&-1===e.indexOf("SU")),y=e=>!!e&&(-1===e.indexOf("MO")&&-1===e.indexOf("TU")&&-1===e.indexOf("WE")&&-1===e.indexOf("TH")&&-1===e.indexOf("FR")&&-1!==e.indexOf("SA")&&-1!==e.indexOf("SU")),j=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US";if(!e.byweekday)return"";const i=Array.isArray(e.byweekday)?e.byweekday:[e.byweekday],a=[],n=p(t,!0).long;for(const e of i)0<=e.weekday&&e.weekday<7&&a.push(n[e.weekday]);return a.join(", ")},M=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US";if(!e.bymonth)return"";const i=Array.isArray(e.bymonth)?e.bymonth:[e.bymonth],a=[];for(const e of i)a.push(O(e,t));return a?" "+Object(s.Translate)("meeting_scheduler_recurrence_specs_every_month",a.join(", ")):""},k=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US";if(e.bymonthday)return" "+Object(s.Translate)("meeting_scheduler_recurrence_specs_every_nth_of_month",e.bymonthday);if(e.bysetpos){const i=-1===e.bysetpos?5:e.bysetpos;if(!e.byweekday||i<1||i>5)return"";if(N(String(e.byweekday)))return" "+Object(s.Translate)("meeting_scheduler_recurrence_specs_on_nth_weekday",T[i]);if(y(String(e.byweekday)))return" "+Object(s.Translate)("meeting_scheduler_recurrence_specs_on_nth_weekend_day",T[i]);{const a=p(t,!0).long,n=Array.isArray(e.byweekday)?e.byweekday[0]:e.byweekday;return" "+Object(s.Translate)("meeting_scheduler_recurrence_specs_on_nth_day",T[i],a[n.weekday])}}return""},w=function(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US";if(!e.rrule)return Object(s.Translate)("meeting_scheduler_recurrence_repeats_only_once");try{t=n.a.parseString(e.rrule)}catch(e){return Object(s.Translate)("meeting_scheduler_recurrence_error")}let a="";switch(t.freq){case n.a.DAILY:t.interval&&1!==t.interval?a+=Object(s.Translate)("meeting_scheduler_recurrence_cadence_daily_with_interval",t.interval):a+=Object(s.Translate)("meeting_scheduler_recurrence_cadence_daily");break;case n.a.WEEKLY:t.interval&&1!==t.interval?a+=Object(s.Translate)("meeting_scheduler_recurrence_cadence_weekly_with_interval",t.interval):a+=Object(s.Translate)("meeting_scheduler_recurrence_cadence_weekly");const e=j(t,i);a+=e?" "+Object(s.Translate)("meeting_scheduler_recurrence_specs_every_weekday",e):"";break;case n.a.MONTHLY:t.interval&&1!==t.interval?a+=Object(s.Translate)("meeting_scheduler_recurrence_cadence_monthly_with_interval",t.interval):a+=Object(s.Translate)("meeting_scheduler_recurrence_cadence_monthly");const r=k(t,i);a+=r?", "+Object(s.Translate)("meeting_scheduler_recurrence_specs_every_month",r):"";break;case n.a.YEARLY:a+=Object(s.Translate)("meeting_scheduler_recurrence_cadence_yearly"),a+=M(t,i),a+=k(t,i);break;default:Object(o.b)("unknown rrule.options.freq found when creating recurrence description")}const r=g(t,i);return a+=", "+u(e.dtStart,e.dtEnd,i),a+=r?", "+r:"",a},A=(e,t)=>{const i=new Date(e),a=new Date(t);return i.setHours(0,0,0,0),a.setHours(0,0,0,0),i<a},D=[{value:"UTC",text:"(UTC)"},{value:"Pacific/Midway",text:"(GMT-11:00) Midway Island, Samoa"},{value:"America/Adak",text:"(GMT-10:00) Hawaii-Aleutian"},{value:"Etc/GMT+10",text:"(GMT-10:00) Hawaii"},{value:"Pacific/Marquesas",text:"(GMT-09:30) Marquesas Islands"},{value:"Pacific/Gambier",text:"(GMT-09:00) Gambier Islands"},{value:"America/Anchorage",text:"(GMT-09:00) Alaska"},{value:"America/Ensenada",text:"(GMT-08:00) Tijuana, Baja California"},{value:"Etc/GMT+8",text:"(GMT-08:00) Pitcairn Islands"},{value:"America/Los_Angeles",text:"(GMT-08:00) Pacific Time (US & Canada)"},{value:"America/Denver",text:"(GMT-07:00) Mountain Time (US & Canada)"},{value:"America/Chihuahua",text:"(GMT-07:00) Chihuahua, La Paz, Mazatlan"},{value:"America/Dawson_Creek",text:"(GMT-07:00) Arizona"},{value:"America/Belize",text:"(GMT-06:00) Saskatchewan, Central America"},{value:"America/Cancun",text:"(GMT-06:00) Guadalajara, Mexico City, Monterrey"},{value:"Chile/EasterIsland",text:"(GMT-06:00) Easter Island"},{value:"America/Chicago",text:"(GMT-06:00) Central Time (US & Canada)"},{value:"America/New_York",text:"(GMT-05:00) Eastern Time (US & Canada)"},{value:"America/Havana",text:"(GMT-05:00) Cuba"},{value:"America/Bogota",text:"(GMT-05:00) Bogota, Lima, Quito, Rio Branco"},{value:"America/Caracas",text:"(GMT-04:30) Caracas"},{value:"America/Santiago",text:"(GMT-04:00) Santiago"},{value:"America/La_Paz",text:"(GMT-04:00) La Paz"},{value:"Atlantic/Stanley",text:"(GMT-04:00) Falkland Islands"},{value:"America/Campo_Grande",text:"(GMT-04:00) Brazil"},{value:"America/Goose_Bay",text:"(GMT-04:00) Atlantic Time (Goose Bay)"},{value:"America/Glace_Bay",text:"(GMT-04:00) Atlantic Time (Canada)"},{value:"America/St_Johns",text:"(GMT-03:30) Newfoundland"},{value:"America/Araguaina",text:"(GMT-03:00) UTC-3"},{value:"America/Montevideo",text:"(GMT-03:00) Montevideo"},{value:"America/Miquelon",text:"(GMT-03:00) Miquelon, St. Pierre"},{value:"America/Godthab",text:"(GMT-03:00) Greenland"},{value:"America/Argentina/Buenos_Aires",text:"(GMT-03:00) Buenos Aires"},{value:"America/Sao_Paulo",text:"(GMT-03:00) Brasilia"},{value:"America/Noronha",text:"(GMT-02:00) Mid-Atlantic"},{value:"Atlantic/Cape_Verde",text:"(GMT-01:00) Cape Verde Is."},{value:"Atlantic/Azores",text:"(GMT-01:00) Azores"},{value:"Europe/Belfast",text:"(GMT) Greenwich Mean Time : Belfast"},{value:"Europe/Dublin",text:"(GMT) Greenwich Mean Time : Dublin"},{value:"Europe/Lisbon",text:"(GMT) Greenwich Mean Time : Lisbon"},{value:"Europe/London",text:"(GMT) Greenwich Mean Time : London"},{value:"Africa/Abidjan",text:"(GMT) Monrovia, Reykjavik"},{value:"Europe/Amsterdam",text:"(GMT+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna"},{value:"Europe/Belgrade",text:"(GMT+01:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague"},{value:"Europe/Brussels",text:"(GMT+01:00) Brussels, Copenhagen, Madrid, Paris"},{value:"Africa/Algiers",text:"(GMT+01:00) West Central Africa"},{value:"Africa/Windhoek",text:"(GMT+01:00) Windhoek"},{value:"Asia/Beirut",text:"(GMT+02:00) Beirut"},{value:"Africa/Cairo",text:"(GMT+02:00) Cairo"},{value:"Asia/Gaza",text:"(GMT+02:00) Gaza"},{value:"Africa/Blantyre",text:"(GMT+02:00) Harare, Pretoria"},{value:"Asia/Jerusalem",text:"(GMT+02:00) Jerusalem"},{value:"Europe/Minsk",text:"(GMT+02:00) Minsk"},{value:"Asia/Damascus",text:"(GMT+02:00) Syria"},{value:"Europe/Moscow",text:"(GMT+03:00) Moscow, St. Petersburg, Volgograd"},{value:"Africa/Addis_Ababa",text:"(GMT+03:00) Nairobi"},{value:"Asia/Tehran",text:"(GMT+03:30) Tehran"},{value:"Asia/Dubai",text:"(GMT+04:00) Abu Dhabi, Muscat"},{value:"Asia/Yerevan",text:"(GMT+04:00) Yerevan"},{value:"Asia/Kabul",text:"(GMT+04:30) Kabul"},{value:"Asia/Yekaterinburg",text:"(GMT+05:00) Ekaterinburg"},{value:"Asia/Tashkent",text:"(GMT+05:00) Tashkent"},{value:"Asia/Kolkata",text:"(GMT+05:30) Chennai, Kolkata, Mumbai, New Delhi"},{value:"Asia/Katmandu",text:"(GMT+05:45) Kathmandu"},{value:"Asia/Dhaka",text:"(GMT+06:00) Astana, Dhaka"},{value:"Asia/Novosibirsk",text:"(GMT+06:00) Novosibirsk"},{value:"Asia/Rangoon",text:"(GMT+06:30) Yangon (Rangoon)"},{value:"Asia/Bangkok",text:"(GMT+07:00) Bangkok, Hanoi, Jakarta"},{value:"Asia/Krasnoyarsk",text:"(GMT+07:00) Krasnoyarsk"},{value:"Asia/Hong_Kong",text:"(GMT+08:00) Beijing, Chongqing, Hong Kong, Urumqi"},{value:"Asia/Irkutsk",text:"(GMT+08:00) Irkutsk, Ulaan Bataar"},{value:"Australia/Perth",text:"(GMT+08:00) Perth"},{value:"Australia/Eucla",text:"(GMT+08:45) Eucla"},{value:"Asia/Tokyo",text:"(GMT+09:00) Osaka, Sapporo, Tokyo"},{value:"Asia/Seoul",text:"(GMT+09:00) Seoul"},{value:"Asia/Yakutsk",text:"(GMT+09:00) Yakutsk"},{value:"Australia/Adelaide",text:"(GMT+09:30) Adelaide"},{value:"Australia/Darwin",text:"(GMT+09:30) Darwin"},{value:"Australia/Brisbane",text:"(GMT+10:00) Brisbane"},{value:"Australia/Hobart",text:"(GMT+10:00) Hobart"},{value:"Asia/Vladivostok",text:"(GMT+10:00) Vladivostok"},{value:"Australia/Lord_Howe",text:"(GMT+10:30) Lord Howe Island"},{value:"Etc/GMT-11",text:"(GMT+11:00) Solomon Is., New Caledonia"},{value:"Asia/Magadan",text:"(GMT+11:00) Magadan"},{value:"Pacific/Norfolk",text:"(GMT+11:30) Norfolk Island"},{value:"Asia/Anadyr",text:"(GMT+12:00) Anadyr, Kamchatka"},{value:"Pacific/Auckland",text:"(GMT+12:00) Auckland, Wellington"},{value:"Etc/GMT-12",text:"(GMT+12:00) Fiji, Kamchatka, Marshall Is."},{value:"Pacific/Chatham",text:"(GMT+12:45) Chatham Islands"},{value:"Pacific/Tongatapu",text:"(GMT+13:00) Nuku'alofa"},{value:"Pacific/Kiritimati",text:"(GMT+14:00) Kiritimati"}]},332:function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return n}));const a=()=>!!window.matchMedia("(min-width: 51rem)").matches,n=()=>{const e=window.matchMedia("(min-width: 42rem)"),t=window.matchMedia("(min-height: 27rem)");return!!e.matches&&!!t.matches}},337:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));const a=e=>{const t=document.activeElement;"ArrowUp"===e.key&&t.previousSibling&&t.previousSibling.focus(),"ArrowDown"===e.key&&t.nextSibling&&t.nextSibling.focus()}},338:function(e,t,i){e.exports={subLists:"-HH6pl",admitAllButton:"_38hqAs",subList:"_2fRBJD",participant:"_33tg1f",moreParticipants:"_31FFqd",participantDetails:"_2U4lTP",selected:"zcncBF",important:"_2nMH12",avatar:"_22UHcg",nameContainer:"_3-W5MF",nameButton:"_2Ow2vD",name:"_1UviP0",subName:"_2V1ta1",rightAlignedNameContainer:"_1v5c3l",indicator:"_22B8l5",sharingIndicator:"_21pZre",sharingAudioIndicator:"h6LWjr",participantModifierButton:"_3pU7cJ",participantModifierText:"_2UYhXt",disabled:"_3PWsHg",divider:"H6shDo",participantChangeRoleButtons:"_10FCZE",isSelected:"_1eAv9m",noRoleOptions:"oTqZkX",infoIcon:"_26zzaY"}},357:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));const a={"001":1,AD:1,AE:6,AF:6,AG:0,AI:1,AL:1,AM:1,AN:1,AR:1,AS:0,AT:1,AU:0,AX:1,AZ:1,BA:1,BD:0,BE:1,BG:1,BH:6,BM:1,BN:1,BR:0,BS:0,BT:0,BW:0,BY:1,BZ:0,CA:0,CH:1,CL:1,CM:1,CN:0,CO:0,CR:1,CY:1,CZ:1,DE:1,DJ:6,DK:1,DM:0,DO:0,DZ:6,EC:1,EE:1,EG:6,ES:1,ET:0,FI:1,FJ:1,FO:1,FR:1,GB:1,GE:1,GF:1,GP:1,GR:1,GT:0,GU:0,HK:0,HN:0,HR:1,HU:1,ID:0,IE:1,IL:0,IN:0,IQ:6,IR:6,IS:1,IT:1,JM:0,JO:6,JP:0,KE:0,KG:1,KH:0,KR:0,KW:6,KZ:1,LA:0,LB:1,LI:1,LK:1,LT:1,LU:1,LV:1,LY:6,MC:1,MD:1,ME:1,MH:0,MK:1,MM:0,MN:1,MO:0,MQ:1,MT:0,MV:5,MX:0,MY:1,MZ:0,NI:0,NL:1,NO:1,NP:0,NZ:1,OM:6,PA:0,PE:0,PH:0,PK:0,PL:1,PR:0,PT:0,PY:0,QA:6,RE:1,RO:1,RS:1,RU:1,SA:0,SD:6,SE:1,SG:0,SI:1,SK:1,SM:1,SV:0,SY:6,TH:0,TJ:1,TM:1,TR:1,TT:0,TW:0,UA:1,UM:0,US:0,UY:1,UZ:1,VA:1,VE:0,VI:0,VN:1,WS:0,XK:1,YE:0,ZA:0,ZW:0};function n(e){const t=e.split("-");return 2===t.length&&t[1]?a[t[1]]:0}},361:function(e,t,i){e.exports={notifications:"_9whqNX"}},418:function(e,t,i){e.exports={remoteContentWindow:"_2dgG8j",remoteContentView:"_2a4y_z",zoomable:"_2f14XQ",perimeterButtons:"_2LIfOu",callMedia:"_1bi_-m",remoteMedia:"_31b39w",remoteView:"_2XLhoW",banner:"BEoXa5",remotePlaceholder:"_1Xd52f",remoteOverlay:"_7GElSt",autoplayDialogTitle:"_3g-jcI",autoplayDialogDescription:"_1lz_if",autoplayDialogLeaveButton:"_2wHFco",autoplayDialogEnableButton:"jzhxU_",perimeterButton:"_2ngWSf",hidden:"o-wX1p"}},419:function(e,t,i){e.exports={hidden:"_35ofFs",visibleWithoutButtons:"_1yjtUs",visibleWithButtons:"_20cdJu"}},420:function(e,t,i){e.exports={joinCallControls:"_2ZiFka",cameraMuteToggleButton:"McIUxh",microphoneMuteToggleButton:"Bhu8T6",joinButton:"_3vkSKa"}},421:function(e,t,i){e.exports={addParticipantForm:"_1Epiui",addParticipantSearchField:"_3mdRDN",description:"_6PhQ8F",subListHeading:"_307vm8",participantDetails:"_3m36tQ",avatar:"_2tVjnt",noColor:"_10E01G",redialButton:"_1z9EsC",searchingIndicator:"_2ef3EM"}},636:function(e,t,i){e.exports={call:"_3m-aZ5"}},637:function(e,t,i){e.exports={notification:"r1S-YY",notificationIcon:"_1nFuqz",notificationInfo:"_3gV5Vs",notificationSuccess:"_1doZjH",notificationFail:"_1tyko3",title:"_1fWMGI",eltaninLinkSection:"Nx2K8A",Appslink:"_1hHUvI",closeButton:"_2jntYx",buttonSection:"_2lQge-"}},638:function(e,t,i){e.exports={notification:"JcnQq7",notificationIcon:"_23206q",notificationInfo:"_1jFf38",notificationSuccess:"_13CBwV",notificationFail:"_1aRPlk",title:"_2czX28",eltaninLinkSection:"_1ZwD6l",description:"_36Vq9J",Appslink:"MKplai",eltaninFailureDescription:"_2eCwPh",closeButton:"_3F6Qet"}},639:function(e,t,i){e.exports={header:"_2Y6AAV",body:"_2dAW_w",callDroppedTitle:"_2d61xj",rejoinButton:"_1-DkW4",homeButton:"vNEkEc",withoutRejoinButton:"_2gslwV"}},640:function(e,t,i){e.exports={transitionScreen:"_6mMSHa",header:"_2DYFhg",decorationButton:"_3VYAQ8",closeButton:"_3mTpz3",languageButton:"_3stQnJ",helpButton:"_3c-mCH",body:"_3KmpPq",footer:"_1Lf0Pi",cancelButton:"_25WrUp"}},641:function(e,t,i){e.exports={title:"_3kDy5s",content:"ZiM__4",description:"_3pFdiB",textArea:"WfFODQ"}},642:function(e,t,i){e.exports={title:"DUtj_c",dialogSize:"_1WMavn",loadingIndicatorStyle:"_3JG1_E",content:"_3lBMby",description:"n0dfcW",exitButton:"quKIbz"}},643:function(e,t,i){e.exports={title:"_1l6NMT",content:"_1ABIzD",description:"_3Q09L8"}},645:function(e,t,i){e.exports={splitView:"OUGekr",draggingHandle:"EEbMuP",handle:"_2KYsZj",isActive:"KWXwUI"}},646:function(e,t,i){e.exports={camera:"_3p8tWc",cameraMuted:"_2sPzIg",cross:"VvlhLt",inCallChangeRole:"_2MaDAs",leave:"_22Sea7",microphone:"_14QZy3",microphoneMuted:"CzDHW0",mirror:"_2NHmUb",mutedLock:"_1dhwW7",pin:"_19-sHt",raiseHand:"_1wA-qU",share:"_2h4K_K",tick:"_3JDdTG",framedPresentation:"_TrNNV",backGroundsIcon:"_1Obv_Q",recordingIndicator:"fpzs6y",defaultIndicator:"_1xk-Zd"}},728:function(e,t){e.exports="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 40'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cpath d='M0 0h50v40H0z'/%3E%3Cpath d='M41.5 24.636a.686.686 0 01-.41-.136l-2.18-1.636a2.053 2.053 0 01-.82-1.637v-4.09a.682.682 0 011.365 0v4.09c0 .213.102.418.272.544l2.182 1.638a.683.683 0 01-.409 1.227zm-1.435 5.635a.684.684 0 01.208-1.243c2.214-.511 4.219-1.98 5.501-4.033 2.59-4.145 1.325-9.624-2.82-12.214-2.052-1.283-4.498-1.725-6.712-1.214a.684.684 0 01-.819-.511.684.684 0 01.512-.819c2.564-.59 5.385-.085 7.742 1.387 4.783 2.99 6.243 9.31 3.254 14.093-1.473 2.357-3.787 4.048-6.35 4.641a.685.685 0 01-.516-.087zM2.798 37.733a.619.619 0 01-.234-.05.478.478 0 01-.254-.573l-.001-.001.292-1.06 1.045-3.784c.964-3.492 4.434-5.932 8.439-5.932h15.827c4.004 0 7.473 2.44 8.437 5.932l1.045 3.784.293 1.06-.002.001a.478.478 0 01-.255.574.619.619 0 01-.232.05h-34.4zm5.805-24.066c0-6.286 5.11-11.398 11.395-11.4 6.284.002 11.396 5.114 11.396 11.4 0 6.285-5.112 11.397-11.396 11.4-6.284-.003-11.395-5.115-11.395-11.4zm30.336 23.22l-.684-2.48-.685-2.479c-1.115-4.04-5.087-6.861-9.658-6.861h-2.425c4.241-2.05 7.182-6.383 7.182-11.4C32.67 6.682 26.986 1 20.003 1h-.009C13.009 1 7.327 6.682 7.327 13.667c0 5.017 2.94 9.35 7.182 11.4h-2.424c-4.573 0-8.545 2.822-9.66 6.861l-.684 2.48-.685 2.48c-.122.437-.042.893.201 1.279.027.041.046.087.076.126A1.84 1.84 0 002.798 39h34.4a1.84 1.84 0 001.464-.707c.06-.08.108-.167.153-.254.181-.358.232-.762.124-1.152z' fill='%23444'/%3E%3C/g%3E%3C/svg%3E"},729:function(e,t){e.exports="data:image/svg+xml,%3Csvg viewBox='0 0 21 16' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M.656 11.333l5.058-5.138a2.889 2.889 0 012.058-.862v0c.498 0 .987.129 1.42.373L20.344 12m-3.125-7.333c0 .836-.665 1.5-1.469 1.5s-1.469-.664-1.469-1.5.665-1.5 1.469-1.5 1.469.664 1.469 1.5z' stroke='%23121212'/%3E%3Crect x='.5' y='.5' width='20' height='15' rx='1.5' stroke='%23121212'/%3E%3C/svg%3E"},730:function(e,t){e.exports="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 8'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cpath d='M-1 0h8v8h-8z'/%3E%3Cpath fill='%23FFF' d='M1.5 2.5C1.5 1.673 2.173 1 3 1s1.5.673 1.5 1.5v1h-3v-1zm3.5 1a1 1 0 011 1V7a1 1 0 01-1 1H1a1 1 0 01-1-1V4.5a1 1 0 011-1v-1c0-1.1.9-2 2-2s2 .9 2 2v1zm-1.75 2h-.5a.25.25 0 00-.25.25c0 .138.112.25.25.25h.5a.25.25 0 00.25-.25.25.25 0 00-.25-.25z'/%3E%3C/g%3E%3C/svg%3E"},731:function(e,t){e.exports="data:image/svg+xml,%3Csvg data-name='Layer 1' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 122.88 122.88'%3E%3Cpath d='M61.44 0A61.44 61.44 0 110 61.44 61.44 61.44 0 0161.44 0zm13.14 36.8c1.74-1.77 2.83-3.18 5-1l7 7.13c2.29 2.26 2.17 3.58 0 5.69L73.33 61.83l12.75 12.75c1.77 1.74 3.18 2.83 1 5l-7.13 7c-2.26 2.29-3.58 2.17-5.68 0L61.44 73.72 48.63 86.53c-2.1 2.15-3.42 2.27-5.68 0l-7.13-7c-2.2-2.15-.79-3.24 1-5l12.73-12.7-13.2-13.19c-2.15-2.11-2.27-3.43 0-5.69l7-7.13c2.15-2.2 3.24-.79 5 1l13.09 13.12L74.58 36.8z' fill='%23f44336' fill-rule='evenodd'/%3E%3C/svg%3E"},732:function(e,t){e.exports="data:image/svg+xml,%3Csvg viewBox='0 0 10 10' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M5 7.5a.502.502 0 00.354-.146l4.5-4.5a.502.502 0 00-.708-.708L5 6.293.854 2.146a.502.502 0 00-.708.708l4.5 4.5A.502.502 0 005 7.5z' fill='%23fff'/%3E%3C/svg%3E"},733:function(e,t){e.exports="data:image/svg+xml,%3Csvg viewBox='0 0 10 10' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M2 5c0-.128.049-.256.146-.354l4.5-4.5a.502.502 0 01.708.708L3.207 5l4.147 4.146a.502.502 0 01-.708.708l-4.5-4.5A.502.502 0 012 5z' fill='%23fff'/%3E%3C/svg%3E"},734:function(e,t){e.exports="data:image/svg+xml,%3Csvg viewBox='0 0 10 10' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M7.5 5a.502.502 0 00-.146-.354l-4.5-4.5a.502.502 0 00-.708.708L6.293 5 2.146 9.146a.502.502 0 00.708.708l4.5-4.5A.502.502 0 007.5 5z' fill='%23fff'/%3E%3C/svg%3E"},735:function(e,t){e.exports="data:image/svg+xml,%3Csvg viewBox='0 0 10 10' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M5 2c.128 0 .256.049.354.146l4.5 4.5a.502.502 0 01-.708.708L5 3.207.854 7.354a.502.502 0 01-.708-.708l4.5-4.5A.502.502 0 015 2z' fill='%23fff'/%3E%3C/svg%3E"},736:function(e,t){e.exports="data:image/svg+xml,%3Csvg viewBox='0 0 16 16' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M13.587 10.705l.745-.745 1.196-1.196.273-.272a.706.706 0 000-.984l-.746-.745-1.195-1.195-.273-.273c-.257-.257-.73-.276-.983 0-.255.278-.275.709 0 .983l.745.746 1.195 1.195.273.273v-.984l-.745.746-1.195 1.195-.273.273c-.257.257-.276.73 0 .983.278.254.709.275.983 0zm-2.882-8.292l-.745-.746L8.765.472 8.492.2a.706.706 0 00-.983 0l-.746.746L5.568 2.14l-.273.273c-.257.257-.276.73 0 .983.278.255.71.275.984 0l.745-.745 1.195-1.196.273-.272h-.983l.745.745 1.195 1.195.273.273c.257.257.73.276.983 0 .254-.278.275-.709 0-.983zm-5.41 11.174l.745.746A9620.599 9620.599 0 007.508 15.8a.706.706 0 00.984 0l.745-.746 1.195-1.195.273-.273c.257-.257.276-.73 0-.983-.278-.255-.709-.275-.983 0l-.746.745-1.195 1.196-.273.272h.984l-.746-.745-1.195-1.195-.273-.273c-.257-.257-.73-.276-.983 0-.254.278-.275.709 0 .983zM2.413 5.295l-.746.745L.472 7.236.2 7.508a.706.706 0 000 .984l.746.745 1.195 1.195.273.273c.257.257.73.276.983 0 .255-.278.275-.709 0-.983a292995256147632.94 292995256147632.94 0 00-1.94-1.94l-.273-.274v.984l.745-.746a67350.342 67350.342 0 001.468-1.468c.257-.257.276-.73 0-.983-.278-.254-.709-.274-.983 0zm6.874 1.418c.078.078.15.16.217.246l-.11-.14c.131.17.237.354.322.55-.022-.055-.047-.11-.07-.166.088.206.147.424.176.646a6.663 6.663 0 01-.024-.184c.028.222.028.445 0 .665.009-.06.017-.123.024-.184-.031.222-.09.44-.175.646.022-.055.047-.11.07-.166-.084.196-.192.38-.322.55l.11-.14a2.63 2.63 0 01-.466.465l.14-.11c-.17.131-.354.237-.55.322l.167-.07a2.527 2.527 0 01-.647.176c.061-.009.124-.017.184-.024a2.665 2.665 0 01-.665 0l.184.024a2.677 2.677 0 01-.646-.175l.167.07a2.536 2.536 0 01-.551-.322l.14.11a2.624 2.624 0 01-.465-.466l.11.14a2.609 2.609 0 01-.322-.55l.07.166a2.527 2.527 0 01-.176-.646c.009.06.017.123.024.184a2.665 2.665 0 010-.665l-.024.184c.031-.222.09-.44.176-.646l-.07.166c.083-.196.191-.38.321-.55l-.109.14c.136-.173.29-.33.466-.465l-.141.11c.17-.131.354-.237.55-.322-.055.022-.11.047-.166.07.207-.087.424-.147.646-.176-.06.009-.123.017-.184.024.222-.028.445-.028.665 0a6.673 6.673 0 00-.184-.024c.223.031.44.09.647.175-.056-.022-.112-.047-.167-.07.196.084.38.192.55.322l-.14-.11c.087.07.17.143.248.22.259.255.728.278.983 0 .254-.276.277-.71 0-.984-.451-.448-1.049-.78-1.681-.882a3.368 3.368 0 00-1.015-.023 3.33 3.33 0 00-.971.289A3.153 3.153 0 005.201 6.43c-.302.545-.46 1.197-.398 1.82.031.316.089.62.21.914.148.356.329.66.579.956.412.483 1.004.84 1.619.992.606.15 1.275.132 1.862-.089a3.56 3.56 0 00.968-.55c.256-.202.467-.452.648-.722.35-.52.532-1.172.52-1.798-.012-.63-.207-1.282-.584-1.793a4.004 4.004 0 00-.356-.427c-.256-.259-.73-.276-.984 0a.703.703 0 00.002.98z' fill='%23121212'/%3E%3C/svg%3E"},737:function(e,t){e.exports="data:image/svg+xml,%3Csvg viewBox='0 0 16 16' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect x='3' y='7' width='10' height='1' rx='.5' fill='%23fff'/%3E%3C/svg%3E"},738:function(e,t){e.exports="data:image/svg+xml,%3Csvg viewBox='0 0 16 16' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M12.5 7.5c.275 0 .5.225.5.5s-.225.5-.5.5h-4v4c0 .275-.225.5-.5.5a.501.501 0 01-.5-.5v-4h-4A.501.501 0 013 8c0-.275.225-.5.5-.5h4v-4c0-.275.225-.5.5-.5s.5.225.5.5v4h4z' fill='%23fff'/%3E%3C/svg%3E"},739:function(e,t){e.exports="data:image/svg+xml,%3Csvg viewBox='0 0 16 16' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cg clip-path='url(%23clip0_4020_9952)' fill='%23707070'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M9.345.999l3.733 3.914v9.085a1 1 0 01-1 1h-8a1 1 0 01-1-1v-12a1 1 0 011-1h5.267zm4.44 3.207L9.871.291a1 1 0 00-.707-.293H4.078a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V4.912a.997.997 0 00-.293-.708zM8.352.998h.993v4.739h-.993V.999z'/%3E%3Cpath d='M13.078 4.923l-1.302-.038H8.5l-.148.853h1.234l3.492.065v-.88z'/%3E%3C/g%3E%3Cdefs%3E%3CclipPath id='clip0_4020_9952'%3E%3Cpath fill='%23fff' d='M0 0h16v16H0z'/%3E%3C/clipPath%3E%3C/defs%3E%3C/svg%3E"},740:function(e,t){e.exports="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 31 25'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cpath d='M-1-4h32v32H-1z'/%3E%3Cpath fill='%23444' d='M16 12.001v-11h12c1.103 0 2 .897 2 2v9H16zm14 10c0 1.102-.897 2-2 2H16v-11h14v9zm-27 2c-1.103 0-2-.898-2-2v-9h14v11H3zm-2-21c0-1.103.897-2 2-2h12v11H1v-9zm27-3H16V0h-1v.001H3a3 3 0 00-3 3v19c0 1.656 1.344 3 3 3h25a3 3 0 003-3v-19a3 3 0 00-3-3z'/%3E%3C/g%3E%3C/svg%3E"},741:function(e,t){e.exports="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 31 25'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cpath d='M-1-4h32v32H-1z'/%3E%3Cpath fill='%23444' d='M30 22c0 1.103-.897 2-2 2H3c-1.103 0-2-.897-2-2V3c0-1.103.897-2 2-2h25c1.103 0 2 .897 2 2v19zM28 0c1.656 0 3 1.344 3 3v19c0 1.656-1.344 3-3 3H3c-1.656 0-3-1.344-3-3V3c0-1.656 1.344-3 3-3h25zM17.99 18.592l-4.154-4.435a.502.502 0 00-.366-.158h-1.48c-.55 0-1-.448-1-1v-1a1 1 0 011-1h1.48c.14 0 .272-.056.366-.157l4.154-4.436v12.186zm.547-13.535a.731.731 0 00-.8.159l-.012.012L13.255 10H11.99c-1.102 0-2 .898-2 2v.999c0 1.103.898 2 2 2h1.265l4.481 4.784a.733.733 0 001.254-.518V5.735a.732.732 0 00-.453-.678z'/%3E%3C/g%3E%3C/svg%3E"},742:function(e,t){e.exports="data:image/svg+xml,%3Csvg viewBox='0 0 31 25' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Crect stroke='%23444' x='.5' y='.5' width='30' height='24' rx='4'/%3E%3Cpath d='M6 6h19v13H6z'/%3E%3Cpath stroke='%23444' stroke-linecap='square' d='M15.5 19.5v5m10-23v23m-5-5v5m-10-5v5m5-24v5m5-5v5m-10-5v5m-5-4v23m-4-5h29m-29-5h4m21 0h4m-29-9h28m-28.431 5h3.862m21.138 0h3.862'/%3E%3C/g%3E%3C/svg%3E"},743:function(e,t){e.exports="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 31 25'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cpath d='M-1-4h32v32H-1z'/%3E%3Cpath fill='%23444' d='M29.999 22c0 1.103-.897 2-2 2H3c-1.103 0-2-.897-2-2V3c0-1.103.897-2 2-2h24.999c1.103 0 2 .897 2 2v19zm-2-22a3 3 0 013 3v19a3 3 0 01-3 3H3a3 3 0 01-3-3V3a3 3 0 013-3h24.999zm-7.504 17.003H11.8a.806.806 0 01-.805-.805V7.503a.5.5 0 00-1 0v8.695c0 .995.81 1.805 1.805 1.805h8.695a.5.5 0 000-1zM12.5 14.001a.502.502 0 00.354-.146L15 11.709l2.139 2.145a.502.502 0 00.708 0l2.507-2.5a.5.5 0 10-.707-.708l-2.153 2.147-2.14-2.145a.499.499 0 00-.708 0l-2.5 2.498A.502.502 0 0012.5 14z'/%3E%3C/g%3E%3C/svg%3E"},744:function(e,t){e.exports="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 31 25'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cpath d='M-1-4h32v32H-1z'/%3E%3Cpath fill='%23444' d='M27.999 0a3 3 0 013 3v18.999a3 3 0 01-3 3H3a3 3 0 01-3-3V3a3 3 0 013-3h24.999zm0 23.999c1.103 0 2-.896 2-2v-5h-9.023v7h7.023zm-17.023 0h9v-7h-9v7zm-7.976 0h6.976v-7H1v5a2 2 0 002 2zM3 1c-1.104 0-2 .897-2 2v12.999h28.999V3c0-1.103-.897-2-2-2H3zm9.8 12.023c-.994 0-1.804-.81-1.804-1.806V4.523a.5.5 0 011 0v6.694c0 .444.36.806.804.806h6.694a.5.5 0 110 1H12.8zm1.05-3.167a.5.5 0 01-.702-.71l1.995-1.975a.5.5 0 01.702 0l1.652 1.625 1.648-1.648a.5.5 0 01.707.707l-2 2a.5.5 0 01-.704.001L15.496 8.23 13.85 9.856z'/%3E%3C/g%3E%3C/svg%3E"},745:function(e,t){e.exports="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 31 25'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cpath d='M-1-4h32v32H-1z'/%3E%3Cpath fill='%23444' d='M28 24h-7.023v-7H30v5c0 1.103-.897 2-2 2zM1 22v-5h8.977v7H3c-1.103 0-2-.897-2-2zm9.977 2h9v-7h-9v7zM3 1h25c1.103 0 2 .897 2 2v13h-9.023v-.001h-1V16h-9v-.001h-1V16H1V3c0-1.103.897-2 2-2zm25-1H3a3 3 0 00-3 3v19a3 3 0 003 3h25c1.656 0 3-1.344 3-3V3c0-1.656-1.344-3-3-3z'/%3E%3C/g%3E%3C/svg%3E"},746:function(e,t){e.exports="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 31 25'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cpath d='M-1-4h32v32H-1z'/%3E%3Cpath fill='%23444' d='M30 21.999c0 1.103-.897 2-2 2H3c-1.103 0-2-.897-2-2V3c0-1.103.897-2 2-2h25c1.103 0 2 .897 2 2v18.999zM28 0a3 3 0 013 3v18.999a3 3 0 01-3 3H3a3 3 0 01-3-3V3a3 3 0 013-3h25zM10.033 18l.378-1.345c.274-.974 1.272-1.655 2.43-1.655h5.274c1.156 0 2.155.681 2.43 1.655L20.923 18h-10.89zm1.943-7.5c0-1.93 1.571-3.5 3.5-3.5 1.93 0 3.5 1.57 3.5 3.5 0 1.931-1.57 3.5-3.5 3.5a3.504 3.504 0 01-3.5-3.5zm9.532 5.884c-.384-1.361-1.708-2.315-3.248-2.372 1.038-.825 1.716-2.083 1.716-3.512a4.5 4.5 0 10-9 0c0 1.429.68 2.688 1.717 3.512-1.538.058-2.862 1.012-3.245 2.372l-.44 1.565c-.069.243-.02.5.134.704.164.217.43.347.71.347h11.25a.889.889 0 00.71-.345.798.798 0 00.136-.705l-.44-1.566z'/%3E%3C/g%3E%3C/svg%3E"},747:function(e,t){e.exports="data:image/svg+xml,%3Csvg viewBox='0 0 16 16' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M8 0a.5.5 0 01.5.5v15a.5.5 0 01-1 0V.5A.5.5 0 018 0z' fill='%23fff'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M5.653 4.024A.5.5 0 016 4.5v7a.5.5 0 01-.5.5h-5a.5.5 0 01-.407-.79l5-7a.5.5 0 01.56-.186zM1.472 11H5V6.06L1.472 11zM10 4.5a.5.5 0 01.907-.29l5 7a.5.5 0 01-.407.79h-5a.5.5 0 01-.5-.5v-7zm1 6.5h3.528L11 6.06V11z' fill='%23fff'/%3E%3C/svg%3E"},748:function(e,t,i){e.exports={banner:"_2Blesq"}},749:function(e,t,i){e.exports={hidden:"_3T0KfJ",activeHidden:"_3pgAjO",activeHiddenMobile:"_1QUOsk",microphoneActiveHidden:"W7G5fx",cameraActiveHidden:"_273jZX",sharingActiveHidden:"_244abD",handActiveHidden:"_2gl7zz",active:"Gcicmp",cameraMuteToggleButtonInCallControls:"vwzF_r",notification:"_36cXcQ",callControls:"_3rxZTu",microphoneMuteToggleButton:"_22C5Wp",raiseHandToggleButton:"DFuHGv",shareToggleButton:"_3fpcEQ",secondary_notification:"_2sLjHW",leaveButton:"_2XQ1Hd"}},750:function(e,t,i){e.exports={outerDiv:"_1iizKj",arrowDown:"_3EETSR",leaveOptionsContainer:"_2hkOEw",leaveOption:"jmdKGa"}},751:function(e,t,i){e.exports={hidden:"PDhF3D",active:"_1BT_uk",slideDownAndThenLeft:"_2BSA3w",callIndicators:"xzVzNE",indicatorWrapper:"LX2rQV",spanWrapper:"_34WkH6"}},752:function(e,t,i){e.exports={message:"_3wmKJJ",messageAppear:"_1fARpS",messageBottom:"_2ZAPnN",messageBottomDefault:"_3_FMrU",messageBottomOffsetted:"EqzTDC"}},753:function(e,t,i){e.exports={FarEndCamControls:"_2u_soX",cameraControlsPanel:"_2zUtPu",participantNameContainer:"pTxl2i",closeButton:"_1KcB69",name:"_1eDxym",hidden:"_3xNAJx",panelGridContainer:"n85S_L",panLeftButton:"_2qjads",panRightButton:"_2HHU77",tiltUpButton:"_1NUU0E",tiltDownButton:"_1kymet",zoomInButton:"_2pJ7Md",zoomOutButton:"ZDmzKy",zoomCellSpacer:"_1MM15q",isDragging:"rJqOBy",cameraControlsBottomLeft:"_1LrUU_",cameraControlsBottomRight:"y4dL6p",callMenuOpen:"_3sklnX",cameraControlsTopLeft:"SuMKLE",cameraControlsTopRight:"_3P0Hom"}},754:function(e,t,i){e.exports={logoImage:"_2S5AOn",logoImageLeftTop:"_1t-MiV",logoImageRightTop:"_1lyy2g",logoImageLeftBottom:"_39ixjj",logoImageRightBottom:"mYdM-2",logoSize:"_3A3TOh"}},755:function(e,t,i){e.exports={message:"_3AN1o8",messageAppear:"_2_v4L_",messageTop:"_33N4Pf",messageTopDefault:"_28vVeL",messageTopOffsetted:"_143Y-U",messageBottom:"DGI3lP",messageBottomDefault:"_1FrpKx",messageBottomOffsetted:"_1517De",messageMiddle:"_2ta_lL",messagePendingRemoval:"_1JIJ2T"}},756:function(e,t,i){e.exports={presentingWithAudioIndicator:"_3og8H7",presentationPreview:"_26gLmJ",presentationPreviewVideo:"_2JUN2p",safariDisableMoveAnimation:"_1ZS3no",isDragging:"_1vlLNk",pinToggleButton:"zxmgYh",presentationPreviewBottomLeft:"_2inK7p",presentationPreviewBottomRight:"_21DrNa",callMenuOpen:"_1E6mWP",presentationPreviewTopLeft:"_1pBfOY",presentationPreviewTopRight:"_2PHe0T"}},757:function(e,t,i){e.exports={selfView:"_3Wzq56",speakingIndicator:"wiVkME",notShowingDeviceSettings:"_3PWyaW",notShowingMoreOptions:"_1z1eGz",selfViewOverlay:"_2gAL_A",selfViewPlaceholder:"_2PFYG3",selfViewVideo:"_1NjM1f",safariDisableMoveAnimation:"_2GsHxX",isDragging:"xqHuQx",aspect_1:"gRpddW",selfViewControls:"_2hnRuf",aspect_16_9:"HuuwOD",aspect_4_3:"_3zV4Xf",aspect_3_4:"_1Yb7wq",aspect_9_16:"_3Q0utS",mirrored:"nocohG",error:"Hq14dI",hidden:"JhnZCe",cameraMuteToggleButton:"jHQiTn",notification:"_1BfMvp",moreOptionsButton:"_3q-chQ",moreOptionsMenu:"_25lUjA",moreOptionsMenuButton:"_16XkDK",moreOptionsMenuButtonText:"_3cHdVZ",hdButton:"_3wSmeD",swapCameraButton:"_178ylK",mirrorSelfViewToggleButton:"_4M970J",pinSelfViewToggleButton:"_2nc_pH",selfViewTopLeft:"_2ruCu4",selfViewTopRight:"_2KLI2u",deviceSettings:"_1I7G4m",deviceSettingsButton:"PbJHKM",notMobile:"_3NOQ9q",settingsSection:"_2mKkJW",showingPlaceholder:"_3Qhfn1",showingDeviceSettings:"_3cT0Ef",showDeviceSettingsSlideAnimation:"_2Ie7ju",selfViewBottomLeft:"gtEF_0",selfViewBottomRight:"_3b9Ccg",slideUp:"_1Vm1EW",slideUpSpeakingIndicator:"_12TjIu",notMirrored:"xYKi8v",slideUpMirrored:"_1dvOgw",fadeIn:"_24y8Kh",slideDown:"_3rbEox",slideDownSpeakingIndicator:"_15C9mB",slideDownMirrored:"_3pR4t1",callMenuOpen:"_1sIMlf"}},758:function(e,t,i){e.exports={mediaSettingsInCall:"x_FFmR",closeButton:"_2_SVMp",settingsSection:"_3me4lE",deviceSelect:"_2x1Mxz",hdLabel:"_2571KE",mirrorLabel:"_2VxcGj",optimiseForTextLabel:"_3nPuSc",labelRightAligned:"_2-YAyO",mediaSettings:"_3Cf9ZQ",audioMeterContainer:"_1LPyZu",micNotWorkingIcon:"_1c5A72",audioMeter:"_3CNrGb",blurOption:"Q_1wtp",blurOptionSmall:"_1q9JVA",blurOptionButton:"_2V9oEn",selected:"_1rtssx",staticButton1:"rUY4JK",staticButton2:"_2mlLcb",staticButton3:"_3VS8x3",staticButton4:"_39NGqu",staticButton5:"_33pmaj",resetButton:"_2RCBMJ",blurPercentage:"_3ozlCX",blurIntensityControls:"_2Dqc7w",intensityHandler:"WVOVL1",blurControlSection:"_1yeukv",blurHeader:"_358-ii",deviceSettingsCheckbox:"_1AxmOK",virtualBackDropOptions:"_3RtWp9",vbText:"NxDjgJ",vbIcon:"_3SX2cP",backdropsPanel:"_1CwXT-",staticBackdrops:"_1nVk4I",plusIcon:"_3qhNa3",customStaticBackdropsClose:"wgFR-g",plusIconTooltip:"_1Lvns7",plusIconTooltiptext:"_2nahx4"}},759:function(e,t,i){e.exports={speakingIndicator:"_16u8Ii",hidden:"_3fbAv1",nameRightOriented:"_3SGuFH",label:"_2nEr8m",name:"_3z90at",pinButton:"_204onZ"}},761:function(e,t,i){e.exports={title:"_1PoqrB",mainTextDesktop:"_1cfmz4",mainTextMobile:"_2I3w0P",subtitleText:"_3cbB6D",userDisplayNamePreText:"_2I5OhZ",userDisplayName:"_2jaNmC",guestText:"MRnWtO",userDisplayNameChangeLink:"_2oPlRE",joinSettings:"_3rKiL-",joinModeDetails:"VWcPxM",videoContainer:"_3GE3PT",videoPlaceholder:"jPh94F",mirrored:"_2Jsv1L",callJoinFailureNotification:"_2V3_8X",cameraMutedIcon:"HOS6gB",controls:"_2FOSFe",menuButton:"_3WwSXp",modeSelectionButton:"_1ZW5Ss",deviceSettingsButton:"_3AXM7k",swapCameraButton:"_3H8-dv",menuButtonTitle:"_1xJFaf",overlay:"jc-6x7"}},762:function(e,t,i){e.exports={dialInMode:"_3gyNQ2",dialInModeIcon:"_14_mAN",dialInModeTitle:"_3eeQ3I",dialInModeDescription:"_2bKMKP",joinInfoFields:"_3Z2eoZ",dialInModeSubDescription:"_2tuv7D"}},763:function(e,t,i){e.exports={modalOverlay:"_2vQV4L",modalWrapper:"_23On7f",modal:"_3W8XtK"}},764:function(e,t,i){e.exports={presentationMode:"_1QurOT",presentationIcon:"_1cjDw5",presentationModeTitle:"IMTtdH",presentationModeDescription:"_7zI-ot",bullet:"_2gz2mE",bulletText:"_3MjWTN",joinButton:"_150gOd"}},765:function(e,t,i){e.exports={modeSelect:"ouKLRp",modeOption:"_3RRZh7",checkmark:"tB64gX"}},766:function(e,t,i){e.exports={nameChangeModal:"_3v7d3z",signedInDescription:"_2BmyaU",signedInName:"_3pfFaS",signedOutDescription:"_2BmEAu",continueButton:"_2et93m",setDisplayNameButton:"_3KxnX8",displayNameInput:"Lep2su",altActionLink:"_2dbbIL",signingOut:"_3Da9mf"}},767:function(e,t,i){e.exports={callMenu:"_3hUiNX",sidebar:"_3jqU-z",sidebarButton:"T2Wg6W",selected:"XKMlEV",closedcaptionselected:"_28wcWm",hasUnreadMessages:"sVqyhr",helpButton:"StKgf9",diagnosticsButton:"_214U2M",notificationCount:"_2kGdnk",participantCount:"_15EDbS",lobbyNotification:"P7LlDp",shown:"_3yRG2E",slideIn:"_2v0VLt",notShown:"_1x4kdj",lobbyNotificationSpan:"Uc6u4u",sidepanel:"_1sDA__",empty:"_1dNHlB",rightAlignedCloseButton:"T18e8J",closeButton:"_1KlgJb",participantButton:"_13ydWj",hidden:"_1VSW65",persistentButton:"_25h7_4",showingLobbyNotification:"_1-LI-n"}},768:function(e,t,i){e.exports={joinInfoHeader:"_3Wuxry",chatMessagesContainer:"_9DX4VC",chatMessages:"_2OW-Mn",noMessages:"_3aVAOj",scrollToBottom:"_1rTjbY"}},769:function(e,t,i){e.exports={chatMessage:"_2M_BBK",shouldCombineWithPreviousMessage:"_3jmoky",oldestUnreadIndicator:"_3D1fLk",oldestUnreadLine:"_2hug4A",oldestUnreadText:"_3WHXf6",avatar:"_2xHJCK",selfAvatar:"_1PemKP",greenFilled:"_1ykX5l",messageDetail:"_2iFBDO",bluetext:"_3zJjLx",greentext:"_37Ipwc",participantLabel:"kQnH4t",participantToEveryone:"_1yulgl",timeStamp:"_3PzWT-",messageBody:"_3m71HM",nameRightOriented:"_2u3FCw"}},770:function(e,t,i){e.exports={messageForm:"br7HzL",participantSelectionContainer:"_1u338O",selectBox:"_1-rlj8",tag:"_2gsg8d",messageTextArea:"_2VD8cc",hasText:"_2Czgcg",sendButton:"f9Yklx",sendButtonLeft:"_2CXR80",desktop:"_3fCykc"}},771:function(e,t,i){e.exports={joinInfoHeader:"_1FXVhf",languageSelectContainer:"_2EsTCk",title:"_3avk0Z",selectBox:"_2DpjOE",captionsContainer:"i8vzCU",captions:"_3EtrNR",noCaptions:"_3dfsFv"}},772:function(e,t,i){e.exports={closedCaption:"_3firt2",captionDetail:"_17k1X2",captionBody:"_1RR25E"}},773:function(e,t,i){e.exports={captionsForm:"zoHJBY",captionsTextArea:"_15DxIb",hasText:"_2-21pQ",sendButton:"_1Ir7bT",sendButtonLeft:"_3mImnl",desktop:"_3DDthW",saveCaptionsButton:"_3Qd9ti"}},774:function(e,t,i){e.exports={callControlsSection:"_2Uq-kA",callControlsSectionHeadingContainer:"_1CB-HA",sectionHeading:"_3zkKuK",controlGrid:"zGbd3l",muting:"_27Fjkf",buttonLabel:"_3z5Mwo",label:"_2uTTjH",blockAllVideoLabel:"_1fNKZN",blockAllVideoOnAction:"h-_ke8",labeledButton:"OK8sG7",button:"_25SJ-d",buttonRightOriented:"_2WpQQQ"}},775:function(e,t,i){e.exports={joinInfoHeader:"uQgqLy",filesContainer:"_1qGFLK",files:"_1av-Kg",fileBottom:"_1doTH6",noSharedFiles:"_3MiU27"}},776:function(e,t,i){e.exports={fileMessage:"E8ASyA",avatar:"_3nCKgX",selfAvatar:"GBD03G",downloadingIndicator:"_3EFEmv",messageDetail:"_2-xNjg",downloadIcon:"_1LrWQa",deleteIcon:"_1RWRSf",fileInfo:"_2tRT1L",fileName:"_15VKVY",fileViewSenderDetailWrapper:"mQPo9-",fileViewContainer:"_1RpaVp",fileViewType:"_1rkVqv",fileViewContent:"_362VhZ",fileViewContentTopSection:"USX0QV",fileViewContentNameSection:"_1l9TtF",fileViewContentDownloadActions:"_1Oqffi",fileViewContentDeleteActions:"_2WQ30d",fileViewAltContentTopSection:"_1qlvol",fileViewAltContentNameSection:"nLhp2w",fileViewAltContentActions:"_2CqMNl",fileViewContentBottomSection:"_1IpcYq"}},777:function(e,t,i){e.exports={newFileContainer:"_39zY7w",newFileType:"_3C1uVj",newFileContent:"_1P5Gw1",newFileContentTopSection:"uoDkMg",newFileContentNameSection:"_22WMas",newFileContentActions:"_2vszY5",newFileContentBottomSection:"_1ZLbZW",newFilePluginContainer:"_3un2BU",newFileDragDrop:"ynr1jl",loading:"_28gkdD",newFileActionArea:"_2WgASM",fileActionButtons:"_2Raj-N",shareButton:"_3KvPhx",addButton:"LDBPJq"}},778:function(e,t,i){e.exports={notification:"_1IkaRd",dialogIcon:"DvN8xJ",description:"VJm0ol",dialogButtonContainer:"_358tZ7",dialogButtons:"_2r_rUw",cancelButton:"_10BSRE"}},779:function(e,t,i){e.exports={joinInfoHeader:"_2dTtqU",sectionHeading:"_1k912n",dialogWrapper:"_3zDipJ",emailIconButton:"_3Lpcoy",collapsibleWrapper:"j5Ckym",meetingInfo:"Hk3c4y",itemName:"_12X65E",itemValue:"Ao0Phu",hideableSpanValue:"_2LYpDW",allowOverflow:"gae8St",joinInfo:"_3i4NQ_",copyJoinLinkButton:"_2sRj9B",participantListItem:"WaTN7a",spanIvrNumbers:"_2YCYql",mediaStats:"nrAFo7",mediaStatsNotificationStatus:"Pur3mu",muteStatusLabel:"BZrV_-",mediaStatsHealthMessage:"_Pqu0d",mediaStatsGoodMessage:"_2qZfOA",mediaStatsPoorMessage:"_90KO5q",mediaStatsBadMessage:"_2Tub6R",statsValues:"zzhITY",sendRecieveHeading:"_3HbAXT",sendHeading:"_3GErBW",receiveHeading:"_1tLTWD",headingRightAligned:"_2II2K_",audioVideoHeading:"_3RR-lO",stats:"_2mejUK",statsRightAligned:"_1W9LaG",copyTextArea:"Vxt4bw"}},780:function(e,t,i){e.exports={headerTitle:"PxklVu",titleAndArrow:"_2OV-Ht",headerIcon:"YQEFaa",dropdownIcon:"_3CHwse"}},781:function(e,t,i){e.exports={layoutSelection:"_3JeOmS",layoutOption:"k42GUD",layoutButton:"_2ESm7y",selected:"_19Hli9",layoutName:"_1VHWrQ",disabled:"SSSUBE"}},782:function(e,t,i){e.exports={joinInfoHeader:"YPEaSR",meetingNotesContainer:"_1ct9aB",meetingNotes:"_2fjbwo",draftNoteButton:"jPQmBT",noNotes:"_3EzJvx",takeNoteButton:"_3H6Ozt",draftButton:"_3MSa9A"}},783:function(e,t,i){e.exports={meetingNotes:"pZO_mr",noteDetail:"jgQHXB",noteDetailContainer:"_2fp1Xf",noteBody:"_2bDnyi",editButtonStyle:"_2IcYl6"}},784:function(e,t,i){e.exports={notesForm:"yrriBK",notesTextArea:"feFBAn",hasText:"_2wFWwL",desktop:"_3TTcBp",noteSaveDiscardButtons:"_2Hl1G1",cancelButton:"_3jHfWN"}},785:function(e,t,i){e.exports={joinInfoHeader:"_1Vw2HY",surveysPane:"_16RmPo",surveyBtnContainer:"np-qU3",viewSurveyButton:"_2YiU7G",noActiveSurvey:"_3x0ar_",takeSurveyButton:"_3ksYmd"}},786:function(e,t,i){e.exports={notesForm:"_2tMFaq",notesTextArea:"_3dyoRO",hasText:"_2tT8rC",desktop:"RfdEpR",submitButtons:"UFJtHi",submitResponse:"_2oNAUU",cancelButton:"_9IfpNo",submitText:"_5eWxmR",questionOptionGroup:"eO1pkU",questionText:"_1N1aFI",radioGroup:"_2Y2pYR",radio:"zidxtu",radioGroupArabic:"_2vcCGF",radioLabel:"_310h5J",radioDescription:"_2Qntm5"}},787:function(e,t,i){e.exports={joinInfoHeader:"_138Qdd",surveyTitle:"_1XO53B",inputBoxStyle:"_2rZNbb",questionContainer:"jdvGMy",addOptionContainer:"gk3BgC",addContainer:"_32M2J7",addQuestionContainer:"_3JS-TP",deleteButton:"_17nCci",surveyButtons:"_3e7GTU",questionOptionsForm:"_8gf9wF",notesForm:"_3RAdtv",notesTextArea:"o5EU8O",hasText:"_2wFVbC",addButton:"_2Q_lvi",desktop:"_3Gpqdm",surveyButtonContainer:"_3-Mcek",surveyNameContainer:"_3dWNBk",surveyTitleInfo:"TLhZlc",surveyStatusInfo:"_1vf2Yh",surveyEnded:"_1sdkJO",surveyYetStart:"c64Utm",surveyLive:"_1V0Kx4",surveyTimeInfo:"_2DO23H",noSurveys:"_2ZmQGh",surveyName:"_1ojjo8",surveysData:"_2dKS9d",surveysDataForArabic:"_2rm5CK",viewSurveysContainer:"_4UkKiE",noSurveyResultsFound:"_3XQ42g",questionResponseContainer:"mVbfYj",optionMeterContainer:"_4LaXR6",details:"_1CzHLT",timerStyle:"_27Em4f",optionDetailsContainer:"_1PYxLX",optionCount:"_26_TlR",optionText:"_2cB3E-",optionMeter:"_31zMUL",questionText:"_1JmEpM",countDetails:"jYyZ7K",participationDetails:"_1mcoAM",endedText:"_1zYJc6",createSurveyButtonContainer:"_2pqXHH",cancelButton:"wu33Eq",closeButton:"TzR6oL",noteSaveDiscardButtons:"n1Rgdq"}},789:function(e,t,i){"use strict";i.r(t);var a=i(636),n=i.n(a),s=i(38),o=i.n(s),r=i(1),l=i.n(r),c=i(31),d=i(6),p=i.n(d),h=i(333),u=i(325),m=i(343),g=i(0),_=i(8),b=i(4);function S(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function v(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?S(Object(i),!0).forEach((function(t){f(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):S(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function f(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const C=()=>()=>{h.b.switchToNextCamera()},E=e=>(t,i)=>{const a=Object(b.fc)(i());if(a){const t=p.a.getStorageVariable(_.a.MIRRORED_SELF_VIEWS);p.a.setStorageVariable(_.a.MIRRORED_SELF_VIEWS,v(v({},t),{},{[a.id]:e}))}return t({isSelfViewMirrored:e,type:g.qe})},T={};function O(e,t){T[e]=t}function N(e){delete T[e]}function y(e){return!!e&&o.a.every(e.getTracks(),e=>"audio"===e.kind)}function j(e){return T[e]?T[e]:null}const M=e=>t=>{t(Object(u.updateSelectedLayout)(e)),m.c.request().then(t=>{t.selectLayout(e)})};var k=i(14),w=i(121);let A=[],D=k.i.HEALTH_STATUS_UNDEFINED,P=1;const I=e=>(t,i)=>{const a=Object(b.mb)(i()),n=Object(b.pb)(i());t({mediaStatValues:e,type:g.Cd});const s=(e=>{A.push(e);let t,i=0,a=0,n=0,s=0;return A.forEach(e=>{e.audioJitter<30&&e.videoRecvJitter<30&&e.audiorecvPacketsLost<5&&e.videoRecvPacketsLost<5?(i+=1,D=k.i.HEALTH_STATUS_GOOD,3===i&&(s=i,i=0,A=[]),(a||n)<3&&(a=0,n=0),1===P&&(t=P,D=k.i.HEALTH_STATUS_GOOD,P=0)):e.audioJitter>100||e.videoRecvJitter>100||e.audiorecvPacketsLost>15||e.videoRecvPacketsLost>15?(n+=1,D=k.i.HEALTH_STATUS_BAD,3===n&&(s=n,n=0,A=[]),(i||a)<3&&(i=0,a=0),1===P&&(t=P,D=k.i.HEALTH_STATUS_BAD,P=0)):(e.audioJitter>29&&e.audioJitter<101||e.videoRecvJitter>29&&e.audioJitter<101||e.audiorecvPacketsLost>4&&e.audiorecvPacketsLost<16||e.videoRecvPacketsLost>4&&e.videoRecvPacketsLost<16)&&(a+=1,D=k.i.HEALTH_STATUS_POOR,3===a&&(s=a,a=0,A=[]),(i||n)<3&&(i=0,n=0),1===P&&(t=P,D=k.i.HEALTH_STATUS_POOR,P=0))}),{mediaStatisticsHealthStatus:D,counter:s,defaultCount:t}})(e),o=s.mediaStatisticsHealthStatus,r=s.defaultCount,l=s.counter,c=Object(b.Wc)(i());o!==n&&(c?d.setStorageVariable(_.a.MEDIA_STATISTICS_HEALTH_STATUS,o):d.setStorageVariable(_.a.MEDIA_STATISTICS_HEALTH_STATUS,k.i.HEALTH_STATUS_UNDEFINED),t({type:g.ze,healthStatus:o})),o!==a&&(c?1!==r&&3!==l||(t(R(o)),t({type:g.ye,healthStatus:o}),o===k.i.HEALTH_STATUS_POOR&&t({type:g.Nd,videoDisabled:Object(b.dd)(i())})):t({type:g.ye,healthStatus:o}),o===k.i.HEALTH_STATUS_GOOD&&a!==k.i.HEALTH_STATUS_UNDEFINED?t({type:g.Rc,networkImprovementFlag:!0}):t({type:g.Rc,networkImprovementFlag:!1}))},R=e=>(t,i)=>{const a=Object(b.dd)(i()),n=Object(b.Vb)(i()),s=Object(b.ic)(i()),o=Object(b.Ud)(i());if(e===k.i.HEALTH_STATUS_BAD||D===k.i.HEALTH_STATUS_POOR&&o)s!==w.a.AUDIO_ONLY&&(d.setStorageVariable(_.a.LAST_SELECTED_LAYOUT,s),t(M(w.a.AUDIO_ONLY)));else if(e===k.i.HEALTH_STATUS_POOR)if(a||t(()=>{m.c.request().then(e=>{e.setCameraMute(!0,!0)})}),n)t(M(w.a.PRESENTATION));else{const e=d.getStorageVariable(_.a.LAST_SELECTED_LAYOUT);t(M(null!==e?e:s))}else if(n)t(M(w.a.PRESENTATION_AND_VIDEO));else{const e=d.getStorageVariable(_.a.LAST_SELECTED_LAYOUT);t(M(null!==e?e:s))}};var B=i(326),L=i(84);const x={};function F(){return e=>{x.changeSelectedDevices=t=>{var i,a,n;e((i=t.camera||void 0,a=t.microphone||void 0,n=t.speaker||void 0,e=>{m.c.request().then(e=>{e.onSelectedDevicesChanged(i,a,n)}).catch(()=>{});let t=!1;if(i){const e=p.a.getStorageVariable(_.a.MIRRORED_SELF_VIEWS);e&&e[i.id]&&(t=!0)}return e({camera:i,isSelfViewMirrored:t,microphone:a,speaker:n,type:g.E})}))},x.changeAvailableDevices=t=>{var i,a,n;e((i=t.cameras,a=t.microphones,n=t.speakers,{cameras:i,microphones:a,speakers:n,type:g.w}))},x.localStreamChanged=(t,i)=>{t?e(((e,t,i)=>a=>{O("localStream",e),a({aspectRatio:h.e.getAspectRatio(e),hasAudio:t,hasVideo:i,streamId:e.id,type:g.sd})})(t,i.audio,i.video)):(e(e=>{N("localStream"),e({type:g.vd})}),Object(m.d)()||(h.g.off(h.c.CHANGE_SELECTED_DEVICES,x.changeSelectedDevices),h.g.off(h.c.CHANGE_AVAILABLE_DEVICES,x.changeAvailableDevices),h.g.off(h.c.CHANGE_LOCALSTREAM,x.localStreamChanged),h.g.off(h.c.CHANGE_DESKTOP_STREAM,x.desktopStreamChanged),h.g.off(h.c.CHANGE_USER_MEDIA_PERMISSIONS,x.userMediaPermissionChanged),h.g.off(h.c.CHANGE_LOCALSTREAM_SETTINGS,x.localStreamSettingsChanged),h.g.off(h.c.CHANGE_MICLEVEL,x.micLevelChanged),h.g.off(h.c.CHANGE_LOCALSTREAM_OVERLAY,x.localStreamOverlayChange),h.g.off(h.c.UPDATE_MEDIA_STATS_VALUE,x.mediaStats)))},x.desktopStreamChanged=t=>{e(t?(e=>t=>{O("localContentStream",e),t({streamId:e.id,type:g.qd})})(t):e=>{N("localContentStream"),e({type:g.rd})})},x.userMediaPermissionChanged=t=>{var i;e((i=t,{type:g.Dd,state:i}))},x.localStreamSettingsChanged=t=>{e((e=>({type:g.ud,aspectRatio:h.e.getAspectRatio(e)}))(t))},x.micLevelChanged=t=>{e((e=>t=>{t({micAudioLevel:e,type:g.wd})})(t))},x.localStreamOverlayChange=t=>{e((e=>t=>{t({applyOverlayText:e,type:g.td})})(t))},x.mediaStats=t=>{const i={audioJitter:t.audio.recv.jitter,audioSendCodec:t.audio.send.codec,audioReceiveCodec:t.audio.recv.codec,videoSendCodec:t.video.send.codec,videoReceiveCodec:t.video.recv.codec,videoSendFrameHeight:t.video.send.frameHeight,audioSendPacketsLost:t.audio.send.packetsLost,audiorecvPacketsLost:t.audio.recv.packetsLost,videoRecvFrameHeight:t.video.recv.frameHeight,videoSendFramesPerSecond:t.video.send.framesPerSecond,videoSendPacketsLost:t.video.send.packetsLost,videoRecvFramesPerSecond:t.video.recv.framesPerSecond,videoRecvJitter:t.video.recv.jitter,videoRecvPacketsLost:t.video.recv.packetsLost,presentationRecvJitter:t.presentation.recv.jitter,presentationRecvPacketLost:t.presentation.recv.packetsLost,presentationRecvFrameHeight:t.presentation.recv.frameHeight,presentationRecvFramesPerSecond:t.presentation.recv.framesPerSecond,presentationRecvCodec:t.presentation.recv.codec,presentationSendJitter:t.presentation.send.jitter,presentationSendCodec:t.presentation.send.codec,presentationSendPacketLost:t.presentation.send.packetsLost,presentationSendFrameHeight:t.presentation.send.frameHeight,presentationSendFramesPerSecond:t.presentation.send.framesPerSecond};e(I(i))},h.g.on(h.c.CHANGE_SELECTED_DEVICES,x.changeSelectedDevices),h.g.on(h.c.CHANGE_AVAILABLE_DEVICES,x.changeAvailableDevices),h.g.on(h.c.CHANGE_LOCALSTREAM,x.localStreamChanged),h.g.on(h.c.CHANGE_DESKTOP_STREAM,x.desktopStreamChanged),h.g.on(h.c.CHANGE_USER_MEDIA_PERMISSIONS,x.userMediaPermissionChanged),h.g.on(h.c.CHANGE_LOCALSTREAM_SETTINGS,x.localStreamSettingsChanged),h.g.on(h.c.CHANGE_MICLEVEL,x.micLevelChanged),h.g.on(h.c.CHANGE_LOCALSTREAM_OVERLAY,x.localStreamOverlayChange),h.g.on(h.c.UPDATE_MEDIA_STATS_VALUE,x.mediaStats)}}function V(){return(e,t)=>{m.a.on(m.b.CHANGE_CONNECTION_STATE,t=>{e((e=>({connectionState:e,type:g.pd}))(t))}),m.a.on(m.b.CHANGE_REMOTE_STREAM,t=>{e(t?(e=>t=>{O("remoteStream",e),t({streamId:e.id,type:g.zd})})(t):e=>{N("remoteStream"),e({type:g.Ad})})}),m.a.on(m.b.CHANGE_REMOTE_CONTENT_STREAM,t=>{e(t?(e=>t=>{O("remoteContentStream",e),t({streamId:e.id,type:g.xd})})(t):e=>{N("remoteContentStream"),e({type:g.yd})})}),m.a.on(m.b.JOIN_SUCCESS,()=>{e(Object(u.joinCallSuccess)())}),m.a.on(m.b.JOIN_FAILED,t=>{e(Object(u.joinCallFailed)(t))}),m.a.on(m.b.DROPPED_FROM_CALL,t=>{e(Object(u.leaveCall)(t))}),m.a.on(m.b.AWAITING_ACTIVATION_CHANGED,t=>{e(Object(u.awaitingActivationChanged)(t))}),m.a.on(m.b.MICROPHONE_MUTED_STATUS_CHANGED,t=>{e(Object(u.microphoneMutedStatusChanged)(t))}),m.a.on(m.b.MICROPHONE_BLOCKED_STATUS_CHANGED,t=>{e(Object(u.handleMicrophoneBlockedStatusChange)(t))}),m.a.on(m.b.CAMERA_BLOCKED_STATUS_CHANGED,t=>{e(Object(u.handleCameraBlockedStatusChange)(t))}),m.a.on(m.b.FAR_END_CAMERA_CONTROLS_ENABLED,(t,i)=>{e(Object(u.farEndCameraControlsViewChanged)(i,t))}),m.a.on(m.b.STUDIO_MODE_AUDIO_STATUS_CHANGED,t=>{e(Object(u.studioModeAudioStatusChanged)(t))}),m.a.on(m.b.STUDIO_MODE_VIDEO_STATUS_CHANGED,t=>{e(Object(u.studioModeVideoStatusChanged)(t))}),m.a.on(m.b.CAMERA_MUTED_STATUS_CHANGED,t=>{e(Object(u.cameraMutedStatusChanged)(t))}),m.a.on(m.b.SHARE_FAILED,()=>{e(Object(u.shareFailed)())}),m.a.on(m.b.UPDATE_PARTICIPATION_PERMISSIONS,t=>{e(Object(u.updateParticipationPermissions)(t))}),m.a.on(m.b.PARTICIPANT_PUT_RECEIVED,(t,i)=>{e(Object(u.putParticipant)(t,i))}),m.a.on(m.b.PARTICIPANT_DELETE_RECEIVED,t=>{e(Object(u.deleteParticipant)(t))}),m.a.on(m.b.UPDATE_AVAILABLE_LAYOUTS,t=>{e(Object(u.updateAvailableLayouts)(t))}),m.a.on(m.b.UPDATE_REMOTE_CONTENT_MAX_ZOOM,(t,i)=>{e(((e,t)=>({maxWidth:e,maxHeight:t,type:g.D}))(t,i))}),m.a.on(m.b.UPDATE_SELECTED_LAYOUT,i=>{i===w.a.NONE?e(Object(u.updateSelectedLayout)(Object(b.ic)(t()))):e(Object(u.updateSelectedLayout)(i))}),m.a.on(m.b.PUBSUB_RESET,(function(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];e(Object(u.pubsubReset)(t,i,a,n))})),m.a.on(m.b.CALL_INFO_RECEIVED,t=>{e(Object(u.currentCallInfoUpdated)(t))}),m.a.on(m.b.ACCESS_METHODS_RECEIVED,t=>{e(Object(u.currentAccessMethodsUpdated)(t))}),m.a.on(m.b.SPACE_PROFILE_RECEIVED,t=>{e(Object(u.currentSpaceCallLegProfileUpdated)(t))}),m.a.on(m.b.MOVE_START,t=>{e(Object(u.callMoveStart)(t))}),m.a.on(m.b.MOVE_SUCCESS,()=>{e(Object(u.callMoveSuccess)())}),m.a.on(m.b.MOVE_FAILED,()=>{e(Object(u.callMoveFailed)())}),m.a.on(m.b.CHAT_MESSAGE_RECEIVED,t=>{e(Object(u.chatMessageReceived)(t))}),m.a.on(m.b.CLOSED_CAPTION_RECEIVED,t=>{e(Object(u.closedCaptionReceived)(t))}),m.a.on(m.b.FILE_SHARE_DETAILS_RECEIVED,t=>{e(Object(u.fileShareDetailsReceived)(t))}),m.a.on(m.b.SURVEY_DATA_RECEIVED,t=>{e(Object(u.surveyDataReceived)(t))}),m.a.on(m.b.ACTIVE_SURVEY_DATA_RECEIVED,t=>{e(Object(u.activeSurveyDataReceived)(t))}),m.a.on(m.b.HAND_STATUS_CHANGED,t=>{e(Object(u.handStatusChanged)(t))}),m.a.on(m.b.MEETING_NOTE_RECEIVED,t=>{e(Object(u.updateMeetingNotesReceived)(t))}),m.a.on(m.b.PARTICIPANT_ROLE_CHANGED,(t,i)=>{e(Object(u.participantRoleChanged)(t,i))})}}const U=()=>e=>{e(e=>{e(L.d(Object(h.l)())),e(L.c(Object(h.m)()))}),Object(h.k)(B.MediaLibApi),e(F()),e(V()),Object(m.e)()};const H=()=>{m.a.removeAllListeners(),Object(m.f)()};var G=i(361),W=i.n(G),z=i(2),J=i(118),K=i(637),Y=i.n(K),q=i(27),Q=i(37),Z=i(54),X=i(10),$=i(21);var ee=Object(c.b)(e=>({}))(e=>{let{type:t,className:i="",title:a,description:n,link:s,onClose:o,onRetryClick:l,onDismissClick:c}=e;const d=[Y.a.title,t===$.b.INFO&&Y.a.notificationInfo,t===$.b.SUCCESS&&Y.a.notificationSuccess,t===$.b.FAILURE&&Y.a.notificationFail].filter(Boolean).join(" ");return r.createElement("section",{id:"userNotificationEltaninFailure",tabIndex:0,role:"alert","aria-live":"assertive",className:[Y.a.notification,i].filter(Boolean).join(" ")},r.createElement(X.D,{className:[Y.a.notificationIcon,Y.a.notificationFail].join(" ")}),r.createElement("h4",{className:d},a),r.createElement("div",{className:Y.a.eltaninLinkSection},r.createElement("span",{className:Y.a.description},Object(z.Translate)("eltanin_error_notification_description"),r.createElement(Z.a,{className:Y.a.Appslink,target:"_blank",href:s,title:s,rel:"noopener noreferrer"},"link"),r.createElement("span",{className:Y.a.eltaninFailureDescription},n))),r.createElement(Q.c,{"aria-label":Object(z.Translate)("dialog_close"),className:Y.a.closeButton,onClick:o},r.createElement(X.f,null)),r.createElement("div",{className:Y.a.buttonSection},r.createElement(q.a,{onClick:l,"aria-label":Object(z.Translate)("eltanin_error_retry_button_title")},Object(z.Translate)("eltanin_error_retry_button_title")),r.createElement(q.a,{onClick:c,"aria-label":Object(z.Translate)("eltanin_error_dismiss_button_title")},Object(z.Translate)("eltanin_error_dismiss_button_title"))))});function te(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function ie(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?te(Object(i),!0).forEach((function(t){ae(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):te(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function ae(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class ne extends l.a.Component{constructor(e){super(e),ae(this,"specificEventSource",void 0),ae(this,"generalEventSource",void 0),ae(this,"appsAllowed",""),ae(this,"selfGuid",Object(J.c)()),ae(this,"currentMeetingID",Object(J.a)()),ae(this,"currentUsername",Object(J.b)()),ae(this,"eltaninJWT",d.getStorageVariable(_.a.ELTANIN_JWT)),ae(this,"eltaninIP",d.getStorageVariable(_.a.ELTANIN_ADDRESS)),ae(this,"eltaninPort",d.getStorageVariable(_.a.ELTANIN_PORT)),ae(this,"validateEltaninData",e=>{var t,i,a;return!!(null==e||null===(t=e.toString())||void 0===t?void 0:t.trim())&&!(null===(i=e.toString())||void 0===i?void 0:i.includes("none"))&&!(null===(a=e.toString())||void 0===a?void 0:a.includes("undefined"))}),ae(this,"checkFileShareAndSurveyOptions",()=>this.props.surveyEnabled||this.props.fileShareEnabled),this.state={eltaninError:!1,isDismissButtonClicked:!1},this.startSpecificEventListener=this.startSpecificEventListener.bind(this),this.startGeneralEventListener=this.startGeneralEventListener.bind(this),this.onRetryButtonClick=this.onRetryButtonClick.bind(this),this.onDismissButtonClick=this.onDismissButtonClick.bind(this)}componentDidMount(){this.appsAllowed=JSON.stringify({fileshare:this.props.fileShareEnabled,survey:this.props.surveyEnabled}),this.validateEltaninData(this.eltaninIP)&&this.validateEltaninData(this.eltaninPort)&&this.checkFileShareAndSurveyOptions()&&(!this.specificEventSource&&this.props.permissions.surveyOpsAllowed&&this.startSpecificEventListener(),this.generalEventSource||this.startGeneralEventListener())}componentDidUpdate(){this.appsAllowed=JSON.stringify({fileshare:this.props.fileShareEnabled,survey:this.props.surveyEnabled}),this.validateEltaninData(this.eltaninIP)&&this.validateEltaninData(this.eltaninPort)&&this.checkFileShareAndSurveyOptions()&&(!this.specificEventSource&&this.props.permissions.surveyOpsAllowed&&this.startSpecificEventListener(),this.generalEventSource||this.startGeneralEventListener())}componentWillUnmount(){this.specificEventSource&&this.specificEventSource.close(),this.generalEventSource&&this.generalEventSource.close()}render(){const e="https://".concat(this.eltaninIP,":").concat(this.eltaninPort,"/api/ping");return l.a.createElement(l.a.Fragment,null,this.state.eltaninError&&!this.state.isDismissButtonClicked&&l.a.createElement("div",{className:W.a.notifications},l.a.createElement(ee,{key:"eltanin_error",type:$.b.FAILURE,title:Object(z.Translate)("meeting_apps_network_error_notification_title"),description:Object(z.Translate)("eltanin_network_error_notification_description"),link:e,onClose:()=>this.onDismissButtonClick(),onRetryClick:()=>this.onRetryButtonClick(),onDismissClick:()=>this.onDismissButtonClick()})))}onDismissButtonClick(){return this.setState({isDismissButtonClicked:!0}),this.specificEventSource?this.specificEventSource.close():this.generalEventSource?this.generalEventSource.close():void 0}onRetryButtonClick(){this.setState({eltaninError:!1,isDismissButtonClicked:!1}),this.props.permissions.surveyOpsAllowed&&this.startSpecificEventListener(),this.startGeneralEventListener()}startSpecificEventListener(){this.specificEventSource=new EventSource("https://".concat(this.eltaninIP,":").concat(this.eltaninPort,"/api/events/eltanin-specific-events/").concat(this.eltaninJWT,"/").concat(this.currentMeetingID,"/").concat(this.selfGuid,"/").concat(this.currentUsername,"/").concat(this.appsAllowed)),this.specificEventSource.onerror=e=>{if(this.setState({eltaninError:!0}),this.specificEventSource)return this.specificEventSource.close()},this.specificEventSource.addEventListener("message",e=>{const t=JSON.parse(e.data);if(t&&"survey_update"===t.event){const e=t.data;if(e.ownerId&&e.callId){const t=new Date(0);t.setUTCSeconds(e.timeStamp),m.a.emit(m.b.SURVEY_DATA_RECEIVED,ie(ie({},e),{},{timestamp:t,timestampText:t.toLocaleString("en-US")}))}}})}startGeneralEventListener(){this.generalEventSource=new EventSource("https://".concat(this.eltaninIP,":").concat(this.eltaninPort,"/api/events/eltanin-general-events/").concat(this.eltaninJWT,"/").concat(this.currentMeetingID,"/").concat(this.selfGuid,"/").concat(this.currentUsername)),this.generalEventSource.onerror=e=>{if(this.setState({eltaninError:!0}),this.generalEventSource)return this.generalEventSource.close()},this.generalEventSource.addEventListener("message",e=>{const t=JSON.parse(e.data);if(t&&"active_survey_update"===t.event){const e=t.data;if(e.callId){const t=new Date(e.timeStamp);m.a.emit(m.b.ACTIVE_SURVEY_DATA_RECEIVED,ie(ie({},e),{},{timestamp:t,timestampText:t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}))}}})}}var se=Object(c.b)(e=>({}))(ne),oe=i(13);const re=Object(oe.a)([b.z],e=>e.length),le=Object(oe.a)([b.Ob],e=>Object.values(e)),ce=Object(oe.a)([le],e=>e.length),de=Object(oe.a)([le],e=>e.filter(e=>e.awaitingActivation).length),pe=Object(oe.a)([le],e=>e.filter(e=>e.handStatus===k.h.Raised).length),he=Object(oe.a)([le],e=>e.filter(e=>e.isWB3&&e.guid!==Object(J.c)()).sort((e,t)=>e.displayName.localeCompare(t.displayName,void 0,{sensitivity:"base"}))),ue=Object(oe.a)([b.Nd,b.ad,b.bd],(e,t,i)=>e||t||i),me=Object(oe.a)([b.Qc,b.Rc],(e,t)=>e||t);var ge=i(60);const _e=Object(oe.a)([ge.b,b.fe],(e,t)=>e&&t),be=Object(oe.a)([b.G,b.s,b.t],(e,t,i)=>!!e&&!!e.length||!!t||!!i);var Se=i(124),ve=i(329),fe=i(22),Ce=i(9),Ee=i(638),Te=i.n(Ee);var Oe=Object(c.b)(e=>({isFileUploadFailureCORS:b.rd(e)}))(e=>{let{type:t,className:i="",title:a,description:n,link:s,onClose:o,isFileUploadFailureCORS:l}=e;const c=[Te.a.title,t===$.b.INFO&&Te.a.notificationInfo,t===$.b.SUCCESS&&Te.a.notificationSuccess,t===$.b.FAILURE&&Te.a.notificationFail].filter(Boolean).join(" ");return r.createElement("section",{id:"userNotificationEltaninFailure",tabIndex:0,role:"alert","aria-live":"assertive",className:[Te.a.notification,i].filter(Boolean).join(" ")},r.createElement(X.D,{className:[Te.a.notificationIcon,Te.a.notificationFail].join(" ")}),r.createElement("h4",{className:c},a),r.createElement("div",{className:Te.a.eltaninLinkSection},r.createElement("span",{className:Te.a.description},Object(z.Translate)("eltanin_error_notification_description"),r.createElement(Z.a,{className:Te.a.Appslink,target:"_blank",href:s,title:s,rel:"noopener noreferrer"},"link"),r.createElement("span",{className:Te.a.eltaninFailureDescription},n))),r.createElement(Q.c,{"aria-label":Object(z.Translate)("dialog_close"),className:Te.a.closeButton,onClick:o},r.createElement(X.f,null)))}),Ne=i(129);class ye extends r.PureComponent{constructor(e){var t,i,a;super(e),a=void 0,(i="expiryTimeout")in(t=this)?Object.defineProperty(t,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[i]=a,this.expireNotifications=this.expireNotifications.bind(this)}expireNotifications(){const e=Date.now()-Ce.j,t=Date.now()-Ce.l,i=Date.now()-Ce.c;let a=!(this.props.muteAllAudioNotificationTime||this.props.muteAllVideoNotificationTime||this.props.deleteFileStatusNotificationTime||this.props.shareFileStatusNotificationTime||this.props.surveyLaunchStatusNotificationTime||this.props.downloadFileStatusNotificationTime||this.props.mediaStatisticsNotificationTime||this.props.isOptimiseForTextNotificationTime);this.props.muteAllAudioNotificationTime&&this.props.muteAllAudioNotificationTime<e&&(a=!0,this.props.onDismissMuteAllAudioNotification()),this.props.muteAllVideoNotificationTime&&this.props.muteAllVideoNotificationTime<e&&(a=!0,this.props.onDismissMuteAllVideoNotification()),this.props.shareFileStatusNotificationTime&&this.props.shareFileStatusNotificationTime<i&&(a=!0,this.props.onDismissFileUploadNotification()),this.props.surveyLaunchStatusNotificationTime&&this.props.surveyLaunchStatusNotificationTime<i&&(a=!0,this.props.onDismissSurveyLaunchNotification()),this.props.deleteFileStatusNotificationTime&&this.props.deleteFileStatusNotificationTime<i&&(a=!0,this.props.onDismissFileDeleteNotification()),this.props.downloadFileStatusNotificationTime&&this.props.downloadFileStatusNotificationTime<i&&(a=!0,this.props.onDismissFileDownloadNotification()),this.props.mediaStatisticsNotificationTime&&this.props.mediaStatisticsNotificationTime<e&&(a=!0,this.props.onDismissMediaStatisticsNotification()),this.props.isOptimiseForTextNotificationTime&&this.props.isOptimiseForTextNotificationTime<t&&(a=!0,this.props.onDismissIsOptimiseForTextNotification()),a||(this.expiryTimeout=setTimeout(this.expireNotifications,Ce.i))}componentDidUpdate(){(this.props.muteAllAudioNotificationTime||this.props.muteAllVideoNotificationTime||this.props.shareFileStatusNotificationTime||this.props.mediaStatisticsNotificationTime||this.props.surveyLaunchStatusNotificationTime||this.props.isOptimiseForTextNotificationTime)&&(this.expiryTimeout=setTimeout(this.expireNotifications,Ce.i))}componentWillUnmount(){clearTimeout(this.expiryTimeout)}render(){const e=o.a.compact([this.props.videoUnblockedNotificationTime&&!this.props.participantPermissions.unblockOwnVideo&&{notification:this.renderVideoUnblockedNotification(this.props.isInStudioModeVideo),time:this.props.videoUnblockedNotificationTime},this.props.audioUnblockedNotificationTime&&!this.props.participantPermissions.unblockOwnAudio&&{notification:this.renderAudioUnblockedNotification(this.props.isInStudioModeAudio),time:this.props.audioUnblockedNotificationTime},this.props.videoBlockedNotificationTime&&{notification:this.renderVideoBlockedNotification(this.props.isInStudioModeVideo,this.props.participantPermissions.unblockOwnVideo),time:this.props.videoBlockedNotificationTime},this.props.audioBlockedNotificationTime&&{notification:this.renderAudioBlockedNotification(this.props.isInStudioModeAudio,this.props.participantPermissions.unblockOwnAudio),time:this.props.audioBlockedNotificationTime},this.props.diagnosticsNotificationTime&&{notification:this.renderDiagnosticsNotification(this.props.isLastDiagnosticsRequestSuccessful),time:this.props.diagnosticsNotificationTime},this.props.deleteFileStatusNotificationTime&&{notification:this.renderDeleteFileNotification(this.props.isFileDeleteSuccessful),time:this.props.deleteFileStatusNotificationTime},this.props.shareFileStatusNotificationTime&&{notification:this.renderShareFileNotification(this.props.isFileShareSuccessful,this.props.serverResponseOnFileRequestFail),time:this.props.shareFileStatusNotificationTime},this.props.surveyLaunchStatusNotificationTime&&{notification:this.renderSurveyLaunchNotification(this.props.isSurveyLaunchSuccessful),time:this.props.surveyLaunchStatusNotificationTime},this.props.downloadFileStatusNotificationTime&&{notification:this.renderDownloadFileNotification(this.props.isFileDownloadSuccessful,this.props.serverResponseOnFileRequestFail),time:this.props.downloadFileStatusNotificationTime},this.props.muteAllAudioNotificationTime&&{notification:this.renderMuteAllAudioNotification(this.props.muteAllAudioBlockState),time:this.props.muteAllAudioNotificationTime},this.props.muteAllVideoNotificationTime&&{notification:this.renderMuteAllVideoNotification(this.props.muteAllVideoBlockState),time:this.props.muteAllVideoNotificationTime},this.props.shareFailureNotificationTime&&{notification:this.renderShareFailureNotification(),time:this.props.shareFailureNotificationTime},this.props.isOptimiseForTextNotificationTime&&{notification:this.renderIsOptimiseForTextNotification(),time:this.props.isOptimiseForTextNotificationTime},this.props.changeParticipantRoleNotificationTime&&{notification:this.renderChangeParticipantRoleNotification(this.props.participantAccessMethodGuid,this.props.participantCospaceUserCallLegProfile),time:this.props.changeParticipantRoleNotificationTime},this.props.signOutFailureNotificationTime&&{notification:this.renderSignOutFailureNotification(),time:this.props.signOutFailureNotificationTime},this.props.callMoveNotificationTime&&{notification:this.renderCallMoveNotification(this.props.spaceName),time:this.props.callMoveNotificationTime},this.props.chatMessageSendFailureNotificationTime&&{notification:this.renderChatMessageSendFailureNotification(this.props.chatMessageSendFailureReason),time:this.props.chatMessageSendFailureNotificationTime},this.props.fileInvalidSizeNotificationTime&&{notification:this.renderInvalidFileSizeNotification(),time:this.props.fileInvalidSizeNotificationTime},this.props.fileInvalidCountNotificationTime&&{notification:this.renderInvalidFileCountNotification(),time:this.props.fileInvalidCountNotificationTime},this.props.fileInvalidTypeNotificationTime&&{notification:this.renderInvalidFileTypeNotification(),time:this.props.fileInvalidTypeNotificationTime},this.props.eltaninFailureNotificationTime&&{notification:this.renderElatninFailureNotification(),time:this.props.eltaninFailureNotificationTime},this.props.mediaStatisticsNotificationTime&&!this.props.isMediaStatsNotificationMuted&&{notification:this.renderMediaStatisticsNotification(),time:this.props.mediaStatisticsNotificationTime}]);if(0===e.length)return null;e.sort((e,t)=>e.time<t.time?-1:1);const t=e.map(e=>e.notification).slice(e.length-4,e.length);return r.createElement("section",{className:W.a.notifications},t)}renderVideoUnblockedNotification(e){return r.createElement(Ne.a,{key:"video_unblocked",type:$.b.INFO,title:e?Object(z.Translate)("call_video_unblocked_notification_studio_mode"):Object(z.Translate)("call_video_unblocked_notification"),description:e?Object(z.Translate)("call_video_unblocked_notification_description_studio_mode"):Object(z.Translate)("call_video_unblocked_notification_description"),onClose:this.props.onDismissVideoUnblockedNotification})}renderAudioUnblockedNotification(e){return r.createElement(Ne.a,{key:"audio_unblocked",type:$.b.INFO,title:e?Object(z.Translate)("call_audio_unblocked_notification_studio_mode"):Object(z.Translate)("call_audio_unblocked_notification"),description:e?Object(z.Translate)("call_audio_unblocked_notification_description_studio_mode"):Object(z.Translate)("call_audio_unblocked_notification_description"),onClose:this.props.onDismissAudioUnblockedNotification})}renderVideoBlockedNotification(e,t){return r.createElement(Ne.a,{key:"video_blocked",type:$.b.INFO,title:Object(z.Translate)("call_video_blocked_notification"),description:t?Object(z.Translate)("call_video_blocked_notification_description_can_unblock"):e?Object(z.Translate)("call_video_blocked_notification_description_cant_unblock_studio_mode"):Object(z.Translate)("call_video_blocked_notification_description_cant_unblock"),onClose:this.props.onDismissVideoBlockedNotification})}renderAudioBlockedNotification(e,t){return r.createElement(Ne.a,{key:"audio_blocked",type:$.b.INFO,title:Object(z.Translate)("call_audio_blocked_notification"),description:t?Object(z.Translate)("call_audio_blocked_notification_description_can_unblock"):e?Object(z.Translate)("call_audio_blocked_notification_description_cant_unblock_studio_mode"):Object(z.Translate)("call_audio_blocked_notification_description_cant_unblock"),onClose:this.props.onDismissAudioBlockedNotification})}renderDiagnosticsNotification(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return r.createElement(Ne.a,{key:"diagnostics",type:e?$.b.SUCCESS:$.b.FAILURE,title:e?Object(z.Translate)("diagnostics_response_success_title"):Object(z.Translate)("diagnostics_response_fail_title"),description:e?Object(z.Translate)("diagnostics_response_success_description"):Object(z.Translate)("diagnostics_response_fail_description"),onClose:this.props.onDismissDiagnosticsNotification})}renderElatninFailureNotification(){const e=d.getStorageVariable(_.a.ELTANIN_ADDRESS),t=d.getStorageVariable(_.a.ELTANIN_PORT),i="https://".concat(e,":").concat(t,"/api/ping");return r.createElement(Oe,{key:"eltanin_failure",type:$.b.FAILURE,title:Object(z.Translate)("meeting_apps_network_error_notification_title"),description:Object(z.Translate)("eltanin_network_error_notification_description"),link:i,onClose:this.props.onDismissEltaninFailureNotification})}renderShareFileNotification(){let e=arguments.length>1?arguments[1]:void 0;return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?r.createElement(Ne.a,{key:"file_share_success",type:$.b.SUCCESS,title:Object(z.Translate)("file_sharing_success_notification_title"),description:Object(z.Translate)("file_sharing_success_notification_description"),onClose:this.props.onDismissFileUploadNotification}):r.createElement(Ne.a,{key:"file_share_failure",type:$.b.FAILURE,title:Object(z.Translate)("file_upload_failed_notification_title"),description:e||Object(z.Translate)("file_upload_failed_notification_description_optional"),onClose:this.props.onDismissFileUploadNotification})}renderDeleteFileNotification(){if(!(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]))return r.createElement(Ne.a,{key:"file_delete",type:$.b.FAILURE,title:Object(z.Translate)("file_delete_failed_notification_title"),description:Object(z.Translate)("file_delete_failed_notification_description"),onClose:this.props.onDismissFileDeleteNotification})}renderSurveyLaunchNotification(){if(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])return r.createElement(Ne.a,{key:"survey_launch",type:$.b.SUCCESS,title:Object(z.Translate)("survey_launch_success_notification_title"),description:Object(z.Translate)("survey_launch_success_notification_description"),onClose:this.props.onDismissSurveyLaunchNotification})}renderDownloadFileNotification(){let e=arguments.length>1?arguments[1]:void 0;if(!(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]))return r.createElement(Ne.a,{key:"file_download",type:$.b.FAILURE,title:Object(z.Translate)("file_download_failed_notification_title"),description:e||Object(z.Translate)("file_download_failed_notification_description"),onClose:this.props.onDismissFileDownloadNotification})}renderInvalidFileSizeNotification(){return r.createElement(Ne.a,{key:"file_size_invalid",type:$.b.FAILURE,title:Object(z.Translate)("file_upload_failed_notification_title"),description:Object(z.Translate)("file_upload_failed_notification_description"),onClose:this.props.onDismissInvalidFileSizeNotification})}renderInvalidFileCountNotification(){return r.createElement(Ne.a,{key:"file_count_invalid",type:$.b.FAILURE,title:Object(z.Translate)("file_upload_failed_notification_title"),description:Object(z.Translate)("invalid_file_count_notification_description"),onClose:this.props.onDismissInvalidFileCountNotification})}renderInvalidFileTypeNotification(){return r.createElement(Ne.a,{key:"file_type_invalid",type:$.b.FAILURE,title:Object(z.Translate)("invalid_file_type_notification_title"),description:Object(z.Translate)("invalid_file_type_notification_description"),onClose:this.props.onDismissInvalidFileTypeNotification})}renderMuteAllAudioNotification(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=e?Object(z.Translate)("call_sidebar_controls_mute_notification_title"):Object(z.Translate)("call_sidebar_controls_unmute_notification_title"),i=e?Object(z.Translate)("call_sidebar_controls_audio_off_notification"):Object(z.Translate)("call_sidebar_controls_audio_on_notification");return r.createElement(Ne.a,{key:"all_mute_audio",type:$.b.INFO,title:t,description:i,onClose:this.props.onDismissMuteAllAudioNotification})}renderMediaStatisticsNotification(){if(this.props.mediaStatsHealthStatus===k.i.HEALTH_STATUS_BAD)return r.createElement(Ne.a,{key:"media_statistics",type:$.b.SIGNAL_BAD,description:this.props.isAudioPriorFlagEnabled?Object(z.Translate)("health_status_bad_message_notification"):Object(z.Translate)("health_status_bad_message_audiopriorflagdisabled_notification"),onClose:this.props.onDismissMediaStatisticsNotification});{const e=d.getSessionVariable(_.a.CAMERA_MUTE);return r.createElement(Ne.a,{key:"media_statistics",type:this.props.mediaStatsHealthStatus===k.i.HEALTH_STATUS_POOR?$.b.SIGNAL_POOR:$.b.SIGNAL_GOOD,description:this.props.mediaStatsHealthStatus===k.i.HEALTH_STATUS_POOR?!this.props.isVideoDisabled&&this.props.isAudioPriorFlagEnabled?Object(z.Translate)("health_status_poor_message_notification_off_video"):Object(z.Translate)("health_status_poor_message_notification_modified"):this.props.hasNetworkImproved&&e&&this.props.isAudioPriorFlagEnabled?Object(z.Translate)("health_status_good_message_notification_on_video"):Object(z.Translate)("health_status_good_message_notification"),onClose:this.props.onDismissMediaStatisticsNotification})}}renderMuteAllVideoNotification(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=e?Object(z.Translate)("call_sidebar_controls_video_disabled_notification_title"):Object(z.Translate)("call_sidebar_controls_video_enabled_notification_title"),i=e?Object(z.Translate)("call_sidebar_controls_video_off_notification"):Object(z.Translate)("call_sidebar_controls_video_on_notification");return r.createElement(Ne.a,{key:"all_mute_video",type:$.b.INFO,title:t,description:i,onClose:this.props.onDismissMuteAllVideoNotification})}mapGuidToRoleName(e,t){if(e){const t=this.props.accessMethods.find(t=>t.guid===e);return null==t?void 0:t.name}{const e=this.props.accessMethods.find(e=>e.callLegProfile===t);return null==e?void 0:e.name}}renderChangeParticipantRoleNotification(e,t){let i=this.mapGuidToRoleName(e,t);return""!==i&&void 0!==i||(i=Object(z.Translate)("members_call_participation_call_leg_profile_space_default")),r.createElement(Ne.a,{key:"role_changed",type:$.b.SUCCESS,title:Object(z.Translate)("change_participant_role_notification"),description:i?Object(z.Translate)("change_participant_role_notification_description",i):"",onClose:this.props.onDismissChangeParticipantRoleNotification})}renderShareFailureNotification(){return r.createElement(Ne.a,{key:"share_failed",type:$.b.FAILURE,title:Object(z.Translate)("share_failure_notification"),description:Object(z.Translate)("share_failure_notification_description"),onClose:this.props.onDismissShareFailureNotification})}renderIsOptimiseForTextNotification(){return r.createElement(Ne.a,{key:"optimise_for_text",type:$.b.INFO,title:Object(z.Translate)("media_settings_optimise_for_text_notification_title"),description:Object(z.Translate)("media_settings_optimise_for_text_notification_description"),onClose:this.props.onDismissIsOptimiseForTextNotification})}renderSignOutFailureNotification(){return r.createElement(Ne.a,{key:"sign_out_failure",type:$.b.FAILURE,title:Object(z.Translate)("sign_out_failure_notification_title"),description:Object(z.Translate)("sign_out_failure_notification_description"),onClose:this.props.onDismissSignOutFailureNotification})}renderCallMoveNotification(e){return r.createElement(Ne.a,{key:"call_move",type:$.b.INFO,title:Object(z.Translate)("call_move_notification_title"),description:e?Object(z.Translate)("call_move_notification_description",e):"",onClose:this.props.onDismissCallMoveNotification})}renderChatMessageSendFailureNotification(e){let t=Object(z.Translate)("chat_message_send_failure_title_generic");e===k.e.TOO_LARGE&&(t=Object(z.Translate)("chat_message_send_failure_title_too_large"));let i=Object(z.Translate)("chat_message_send_failure_description_generic");return e===k.e.TOO_LARGE?i=Object(z.Translate)("chat_message_send_failure_description_too_large"):e===k.e.NOT_ALLOWED&&(i=Object(z.Translate)("chat_message_send_failure_description_not_allowed")),r.createElement(Ne.a,{key:"chat_message_send_failure",type:$.b.FAILURE,title:t,description:i,onClose:this.props.onDismissChatMessageSendFailureNotification})}}var je=Object(c.b)(e=>({chatMessageSendFailureNotificationTime:b.x(e),chatMessageSendFailureReason:b.y(e),fileInvalidSizeNotificationTime:b.R(e),fileInvalidCountNotificationTime:b.Q(e),fileInvalidTypeNotificationTime:b.S(e),audioBlockedNotificationTime:b.i(e),audioUnblockedNotificationTime:b.j(e),callMoveNotificationTime:b.r(e),diagnosticsNotificationTime:b.L(e),changeParticipantRoleNotificationTime:b.w(e),isLastDiagnosticsRequestSuccessful:b.xd(e),isFileDeleteSuccessful:b.nd(e),deleteFileStatusNotificationTime:b.K(e),shareFileStatusNotificationTime:b.Mc(e),surveyLaunchStatusNotificationTime:b.Dc(e),eltaninFailureNotificationTime:b.P(e),downloadFileStatusNotificationTime:b.M(e),isFileShareSuccessful:b.qd(e),isSurveyLaunchSuccessful:b.Zd(e),isFileDownloadSuccessful:b.od(e),serverResponseOnFileRequestFail:b.he(e),isInStudioModeAudio:b.td(e),isInStudioModeVideo:b.ud(e),isMicrophoneBlocked:b.Id(e),isCameraBlocked:b.cd(e),isMicrophoneMuted:b.Jd(e),isCameraMuted:b.dd(e),mediaStatisticsNotificationTime:b.nb(e),mediaStatsHealthStatus:b.mb(e),hasNetworkImproved:b.Sc(e),muteAllAudioBlockState:b.Db(e),muteAllAudioNotificationTime:b.Eb(e),muteAllVideoBlockState:b.Fb(e),muteAllVideoNotificationTime:b.Gb(e),participantPermissions:b.Pb(e),shareFailureNotificationTime:b.mc(e),isOptimiseForTextNotificationTime:b.Kb(e),signOutFailureNotificationTime:b.qc(e),spaceName:b.s(e),videoBlockedNotificationTime:b.Kc(e),videoUnblockedNotificationTime:b.Lc(e),accessMethods:b.G(e),participantAccessMethodGuid:b.Mb(e),participantCospaceUserCallLegProfile:b.Nb(e),isMediaStatsNotificationMuted:b.qb(e),isAudioPriorFlagEnabled:b.Wc(e),isVideoDisabled:b.be(e)}),e=>({onDismissChatMessageSendFailureNotification:()=>e(Object(ve.f)()),onDismissAudioBlockedNotification:()=>e(Object(ve.a)()),onDismissAudioUnblockedNotification:()=>e(Object(ve.b)()),onDismissCallMoveNotification:()=>e(Object(ve.d)()),onDismissDiagnosticsNotification:()=>e(Object(ve.g)()),onDismissFileDeleteNotification:()=>e(Object(ve.i)()),onDismissFileDownloadNotification:()=>e(Object(ve.j)()),onDismissFileUploadNotification:()=>e(Object(ve.k)()),onDismissSurveyLaunchNotification:()=>e(Object(ve.t)()),onDismissEltaninFailureNotification:()=>e(Object(ve.h)()),onDismissVideoBlockedNotification:()=>e(Object(ve.u)()),onDismissVideoUnblockedNotification:()=>e(Object(ve.v)()),onDismissMuteAllAudioNotification:()=>e(Object(ve.q)()),onDismissInvalidFileSizeNotification:()=>e(Object(ve.m)()),onDismissInvalidFileCountNotification:()=>e(Object(ve.l)()),onDismissInvalidFileTypeNotification:()=>e(Object(ve.n)()),onDismissMuteAllVideoNotification:()=>e(Object(ve.r)()),onDismissMediaStatisticsNotification:()=>e(Object(ve.p)()),onDismissShareFailureNotification:()=>e(Object(ve.s)()),onDismissSignOutFailureNotification:()=>e(Object(fe.f)()),onDismissChangeParticipantRoleNotification:()=>e(Object(ve.e)()),onDismissIsOptimiseForTextNotification:()=>e(Object(ve.o)())}))(ye),Me=i(639),ke=i.n(Me),we=i(17),Ae=i(640),De=i.n(Ae),Pe=i(59),Ie=i(71);class Re extends r.PureComponent{constructor(e){super(e)}render(){return l.a.createElement("section",{className:De.a.transitionScreen},l.a.createElement("section",{className:[De.a.body,this.props.bodyClassName].filter(Boolean).join(" ")},this.props.children),l.a.createElement("header",{className:De.a.header},l.a.createElement(Ie.a,{className:De.a.languageButton,selectedLanguage:this.props.selectedLanguage,onClick:this.props.onShowLanguageSelectionDialog}),this.props.helpLink&&l.a.createElement(Pe.a,{"aria-label":Object(z.Translate)("meeting_joining_options_help"),className:[De.a.decorationButton,De.a.helpButton].join(" "),helpLocation:this.props.helpLink}),l.a.createElement(Q.c,{className:[De.a.decorationButton,De.a.closeButton].join(" "),onClick:this.props.onClose,title:this.props.closeButtonAssistive},this.props.closeIcon),this.props.header),l.a.createElement("footer",{className:De.a.footer},this.props.footer))}}var Be=Re,Le=i(29),xe=i(18),Fe=i(12),Ve=i(96),Ue=i(24);class He extends r.PureComponent{constructor(e){super(e),this.getTitle=this.getTitle.bind(this),this.renderBodyContent=this.renderBodyContent.bind(this),this.renderHeaderContent=this.renderHeaderContent.bind(this)}render(){const e=Object(Fe.f)(Fe.a.PORTAL),t=this.props.isSignedIn&&!e,i=e&&e.exp&&e.exp<Math.floor(Date.now()/1e3),a=!(this.props.isCallNonRejoinable||t||i||this.props.isCallEndedByHost);return l.a.createElement(Be,{onClose:this.props.onGoHome,closeButtonAssistive:Object(z.Translate)("home"),header:this.renderHeaderContent(),bodyClassName:[ke.a.body,!a&&ke.a.withoutRejoinButton].filter(Boolean).join(" "),closeIcon:l.a.createElement(X.p,null),selectedLanguage:this.props.selectedLanguage,onShowLanguageSelectionDialog:this.props.onShowLanguageSelectionDialog},this.renderBodyContent(a))}renderHeaderContent(){return l.a.createElement("h1",{className:ke.a.header},this.props.spaceName||Object(z.Translate)("call_dropped_fallback_title"))}renderBodyContent(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",{className:ke.a.callDroppedTitle,"data-test":"call_drop_title"},this.getTitle()),e&&l.a.createElement(q.a,{className:ke.a.rejoinButton,"data-test":"call_drop_rejoin_button",onClick:this.props.onRejoinMeeting},Object(z.Translate)("call_dropped_rejoin")),l.a.createElement(Ve.a,{"data-test":"call_drop_go_home_link",className:ke.a.homeButton,onClick:this.props.onGoHome}))}getTitle(){return this.props.isRemovedFromCall?Object(z.Translate)("call_dropped_removed"):this.props.isCallEndedByHost?Object(z.Translate)("call_dropped_call_ended"):this.props.hasMediaConnectFailed?Object(z.Translate)("call_dropped_connect_fail"):this.props.hasMediaReconnectFailed||this.props.isCallEndedWithError?Object(z.Translate)("call_dropped_reconnect_fail"):void Object(we.f)("unrecognised call drop reason")}}var Ge=Object(c.b)(e=>({hasMediaConnectFailed:Object(b.Qc)(e),hasMediaReconnectFailed:Object(b.Rc)(e),isCallEndedByHost:Object(b.ad)(e),isCallEndedWithError:Object(b.bd)(e),isCallNonRejoinable:Object(Se.d)(e),isSignedIn:Object(b.Vd)(e),isRemovedFromCall:Object(b.Nd)(e),selectedLanguage:Object(b.hc)(e),spaceName:Object(Se.b)(e)}),e=>({onGoHome:()=>e(Object(xe.b)()),onRejoinMeeting:()=>e(Object(xe.c)()),onShowLanguageSelectionDialog:()=>e(Object(Le.c)(Ue.a.LANGUAGE_SELECTION))}))(He),We=i(25),ze=i.n(We),Je=i(641),Ke=i.n(Je),Ye=i(85);class qe extends r.PureComponent{constructor(e){super(e),this.state={userDescription:"",currentFocus:0},this.onUserDescriptionChange=this.onUserDescriptionChange.bind(this),this.onTabPressed=this.onTabPressed.bind(this)}componentDidMount(){document.addEventListener("keydown",this.onTabPressed)}componentWillUnmount(){document.removeEventListener("keydown",this.onTabPressed)}onTabPressed(e){var t,i,a,n;if("Tab"===e.key){let s;switch(e.preventDefault(),this.state.currentFocus){case 0:case 4:this.setState({currentFocus:1}),s=document.getElementById("inputArea"),null===(t=document.getElementById("inputArea"))||void 0===t||t.focus();break;case 1:this.setState({currentFocus:2}),s=document.getElementById("confirmButton"),null===(i=document.getElementById("confirmButton"))||void 0===i||i.focus();break;case 2:this.setState({currentFocus:3}),s=document.getElementById("cancelButton"),null===(a=document.getElementById("cancelButton"))||void 0===a||a.focus();break;case 3:default:this.setState({currentFocus:4}),s=document.getElementById("dialog_close"),null===(n=document.getElementById("dialog_close"))||void 0===n||n.focus()}}}render(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",{className:[Object(Ye.a)()?ze.a.dialogTitleRightOriented:ze.a.dialogTitle,Ke.a.title].join(" ")},Object(z.Translate)("diagnostics_title")),l.a.createElement("div",{className:[ze.a.dialogContents,Ke.a.content].join(" ")},l.a.createElement("p",{className:[ze.a.dialogDescription,Ke.a.description].join(" ")},Object(z.Translate)("diagnostics_description")),l.a.createElement("textarea",{id:"inputArea","aria-label":Object(z.Translate)("diagnostics_user_description_placeholder"),className:Ke.a.textArea,onChange:this.onUserDescriptionChange,placeholder:Object(z.Translate)("diagnostics_user_description_placeholder"),value:this.state.userDescription})),l.a.createElement("div",{className:ze.a.dialogButtons},l.a.createElement(q.a,{id:"cancelButton","aria-label":Object(z.Translate)("dialog_cancel"),className:ze.a.cancelButton,disabled:this.props.isSendingDiagnostics,onClick:this.props.onCancel},Object(z.Translate)("dialog_cancel")),l.a.createElement(q.a,{id:"confirmButton","aria-label":Object(z.Translate)("diagnostics_send_report"),className:ze.a.confirmButton,loading:this.props.isSendingDiagnostics,onClick:this.props.onSendDiagnostics.bind(this,this.state.userDescription)},Object(z.Translate)("diagnostics_send_report"))))}onUserDescriptionChange(e){e.target.value.length>5e3||this.setState({userDescription:e.target.value})}}var Qe=Object(c.b)(e=>({isSendingDiagnostics:Object(b.Sd)(e)}),e=>({onSendDiagnostics:t=>e(Object(u.sendDiagnostics)(t))}))(qe),Ze=i(642),Xe=i.n(Ze),$e=i(58);class et extends r.PureComponent{constructor(e){var t,i,a;super(e),a=void 0,(i="expiryTimer")in(t=this)?Object.defineProperty(t,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[i]=a,this.state={attemptsLeft:3},this.onExitButtonClilck=this.onExitButtonClilck.bind(this),this.setExpiryTimer=this.setExpiryTimer.bind(this),this.retryJoinCall=this.retryJoinCall.bind(this)}componentDidMount(){(this.state.attemptsLeft<1||this.props.isInCall)&&this.props.dismissDialog(),this.setExpiryTimer(),d.setStorageVariable(_.a.MEDIA_RECONNECT_IN_PROGRESS,!0)}componentWillUnmount(){this.expiryTimer&&clearInterval(this.expiryTimer),this.props.dismissDialog()}componentDidUpdate(){(this.state.attemptsLeft<1||this.props.isInCall)&&this.props.dismissDialog()}setExpiryTimer(){this.expiryTimer&&clearInterval(this.expiryTimer);this.expiryTimer=setInterval(()=>this.retryJoinCall(),15e3)}render(){return this.state.attemptsLeft>0?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:Xe.a.content},l.a.createElement("section",{className:Xe.a.loadingIndicatorStyle},l.a.createElement($e.a,null)),l.a.createElement("p",{className:Xe.a.title},Object(z.Translate)("media_reconnect_dialog_title")),l.a.createElement("p",{className:Xe.a.description},Object(z.Translate)("media_reconnect_attempts_info_title")),l.a.createElement("p",{className:Xe.a.description},this.state.attemptsLeft+" "+Object(z.Translate)("media_reconnect_attempts_left_title")),l.a.createElement("div",{className:Xe.a.exitButton},l.a.createElement(q.a,{"aria-label":Object(z.Translate)("media_reconnect_exit_button_title"),autoFocus:!0,className:Xe.a.exitButton,onClick:this.onExitButtonClilck},Object(z.Translate)("media_reconnect_exit_button_title"))))):null}onExitButtonClilck(){return this.expiryTimer&&clearInterval(this.expiryTimer),this.setState({attemptsLeft:0}),this.props.dismissDialog(),this.props.leaveCall()}retryJoinCall(){this.setState({attemptsLeft:this.state.attemptsLeft-1}),this.props.isInCall||this.props.retryCallConnect(this.props.joinParams,this.props.joinMode)}}var tt=Object(c.b)(e=>{const t=Object(Se.a)(e);if(!t)throw new Error("Attempting to join without join params");return{joinParams:t,isInCall:Object(b.sd)(e),joinMode:Object(b.gc)(e)}},e=>({dismissDialog:()=>e(Object(Le.b)()),retryCallConnect:(t,i)=>e(Object(u.joinCall)(t,i,void 0)),leaveCall:()=>e(Object(u.joinCallFailed)(void 0))}))(et),it=i(643),at=i.n(it);class nt extends r.PureComponent{constructor(e){super(e),this.onSaveButtonClick=this.onSaveButtonClick.bind(this),this.onDiscardButtonClilck=this.onDiscardButtonClilck.bind(this)}render(){const e=d.getStorageVariable(_.a.MEETING_NOTES_STORE);return l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",{className:[Object(Ye.a)()?ze.a.dialogTitleRightOriented:ze.a.dialogTitle,at.a.title].join(" ")},Object(z.Translate)("notes_dialog_title")),l.a.createElement("div",{className:[ze.a.dialogContents,at.a.content].join(" ")},l.a.createElement("p",{className:[ze.a.dialogDescription,at.a.description].join(" ")},Object(z.Translate)("notes_dialog_description"))),l.a.createElement("div",{className:ze.a.dialogButtons},l.a.createElement(q.a,{"aria-label":Object(z.Translate)("notes_discard"),className:ze.a.cancelButton,onClick:this.onDiscardButtonClilck},Object(z.Translate)("notes_discard")),l.a.createElement(q.a,{"aria-label":Object(z.Translate)("notes_save"),autoFocus:!0,className:ze.a.confirmButton,disabled:!e,onClick:this.onSaveButtonClick},Object(z.Translate)("notes_save"))))}onSaveButtonClick(){const e=d.getStorageVariable(_.a.MEETING_NOTES_STORE),t=Date().toString(),i=Object(z.Translate)("notes_header").concat("-"+t).concat(".txt"),a=document.createElement("a"),n=new Blob([e],{type:"text/plain;charset=utf-8"});a.href=URL.createObjectURL(n),a.download=i,document.body.appendChild(a),a.click(),d.removeStorageVariable(_.a.MEETING_NOTES_STORE),this.props.dismissDialog()}onDiscardButtonClilck(){d.removeStorageVariable(_.a.MEETING_NOTES_STORE),this.props.dismissDialog()}}var st=Object(c.b)(e=>({meetingNotes:Object(b.vb)(e)}),e=>({dismissDialog:()=>e(Object(Le.b)())}))(nt),ot=i(89),rt=i(135),lt=i(136);class ct extends r.PureComponent{constructor(e){super(e)}render(){switch(this.props.dialogType){case Ue.a.SEND_DIAGNOSTICS:return r.createElement(ot.a,{onCancel:this.props.onCancel,className:ze.a.diagnosticsDialog,"aria-label":Object(z.Translate)("diagnostics_title")},r.createElement(Qe,{onCancel:this.props.onCancel}));case Ue.a.SAVE_DISCARD_NOTES:return r.createElement(ot.a,{onCancel:this.props.onCancel,className:ze.a.diagnosticsDialog,"aria-label":Object(z.Translate)("notes_dialog_title")},r.createElement(st,null));case Ue.a.RECONNECT_MEDIA_CONFIRMATION:return r.createElement(ot.a,{onCancel:this.props.onCancel,isMediaReconnectDialog:!0,"aria-label":Object(z.Translate)("media_reconnect_dialog_title")},r.createElement(tt,null));case Ue.a.LANGUAGE_SELECTION:return r.createElement(ot.a,{onCancel:this.props.onCancel,"aria-label":Object(z.Translate)("language_selection_title")},r.createElement(rt.a,{selectedLanguage:this.props.selectedLanguage,onSetLanguage:this.props.onSetLanguage,onCancel:this.props.onCancel}));case Ue.a.SHARE_INVITATION:return r.createElement(ot.a,{onCancel:this.props.onCancel,"aria-label":Object(z.Translate)("invitation_dialog_title")},r.createElement(lt.b,{onCancel:this.props.onCancel}));default:return null}}}var dt=Object(c.b)(e=>({dialogType:b.H(e),selectedLanguage:b.hc(e)}),e=>({onCancel:()=>e(Object(Le.b)()),onSetLanguage:t=>e(Object(xe.l)(t,!0))}))(ct),pt=i(418),ht=i.n(pt),ut=i(88),mt=i.n(ut),gt=i(62),_t=i(644),bt=i(342),St=i(645),vt=i.n(St);var ft=l.a.forwardRef((e,t)=>{let{handleTitle:i,isActive:a,viewA:n,viewB:s}=e;const o=Object(r.useRef)(null),c=Object(r.useRef)(),[d,p]=Object(r.useState)(!1),[h,u]=Object(r.useState)(),m=!(!n||!s),g={height:h};Object(r.useImperativeHandle)(t,()=>({resetResizing:()=>{p(!1),u(void 0)}}));const _=e=>{let{clientY:t}=e;if(c.current){const e=t-c.current.offsetHeight,i=c.current.clientHeight;u(i+e)}},b=()=>{p(!1),document.removeEventListener("mouseup",b),document.removeEventListener("mousemove",_),document.onselectstart=()=>null};return Object(r.useEffect)(()=>()=>{document.removeEventListener("mouseup",b),document.removeEventListener("mousemove",_),document.onselectstart=()=>null},[]),l.a.createElement("section",{className:[vt.a.splitView,d&&vt.a.draggingHandle].filter(Boolean).join(" ")},n,m&&!Object(gt.b)()&&l.a.createElement("div",{className:[vt.a.handle,d&&vt.a.draggingHandle,a&&vt.a.isActive].filter(Boolean).join(" "),ref:o,title:i,onMouseDown:()=>{p(!0),document.addEventListener("mouseup",b),document.addEventListener("mousemove",_),document.onselectstart=()=>!1}}),s&&l.a.cloneElement(s,{elementRef:c,style:g}))}),Ct=i(646),Et=i.n(Ct),Tt=i(647),Ot=i.n(Tt),Nt=i(648),yt=i.n(Nt),jt=i(649),Mt=i.n(jt),kt=i(650),wt=i.n(kt),At=i(651),Dt=i.n(At),Pt=i(652),It=i.n(Pt),Rt=i(653),Bt=i.n(Rt),Lt=i(654),xt=i.n(Lt),Ft=(i(655),i(656)),Vt=i.n(Ft),Ut=i(160),Ht=i.n(Ut),Gt=i(657),Wt=i.n(Gt),zt=i(658),Jt=i.n(zt),Kt=i(659),Yt=i.n(Kt),qt=i(660),Qt=i.n(qt),Zt=i(661),Xt=i.n(Zt),$t=i(662),ei=i.n($t),ti=i(414),ii=i.n(ti),ai=(i(162),i(163)),ni=i.n(ai),si=i(663),oi=i.n(si),ri=i(664),li=i.n(ri),ci=i(665),di=i.n(ci),pi=i(666),hi=i.n(pi),ui=i(164),mi=i.n(ui),gi=i(667),_i=i.n(gi),bi=i(415),Si=i.n(bi),vi=(i(668),i(669)),fi=i.n(vi),Ci=i(670),Ei=i.n(Ci),Ti=i(165),Oi=i.n(Ti),Ni=i(416),yi=i.n(Ni),ji=i(671),Mi=i.n(ji),ki=i(672),wi=i.n(ki),Ai=i(673),Di=i.n(Ai),Pi=i(674),Ii=i.n(Pi),Ri=i(675),Bi=i.n(Ri),Li=i(676),xi=i.n(Li),Fi=(i(677),i(678)),Vi=i.n(Fi),Ui=i(679),Hi=i.n(Ui),Gi=i(680),Wi=i.n(Gi),zi=i(681),Ji=i.n(zi),Ki=i(682),Yi=i.n(Ki),qi=i(683),Qi=i.n(qi),Zi=i(684),Xi=i.n(Zi),$i=(i(685),i(167)),ea=i.n($i),ta=i(686),ia=i.n(ta),aa=i(687),na=i.n(aa),sa=i(688),oa=i.n(sa),ra=i(689),la=i.n(ra),ca=i(690),da=i.n(ca),pa=i(691),ha=i.n(pa),ua=i(692),ma=i.n(ua),ga=i(693),_a=i.n(ga),ba=i(694),Sa=i.n(ba),va=i(695),fa=i.n(va),Ca=i(696),Ea=i.n(Ca),Ta=i(697),Oa=i.n(Ta),Na=i(698),ya=i.n(Na),ja=i(699),Ma=i.n(ja),ka=i(700),wa=i.n(ka),Aa=i(701),Da=i.n(Aa),Pa=i(702),Ia=i.n(Pa),Ra=i(703),Ba=i.n(Ra),La=i(704),xa=i.n(La),Fa=i(705),Va=i.n(Fa),Ua=i(706),Ha=i.n(Ua),Ga=i(707),Wa=i.n(Ga),za=i(708),Ja=i.n(za),Ka=i(709),Ya=i.n(Ka),qa=i(710),Qa=i.n(qa),Za=i(711),Xa=i.n(Za),$a=i(712),en=i.n($a),tn=i(713),an=i.n(tn),nn=i(714),sn=i.n(nn),on=i(715),rn=i.n(on),ln=i(716),cn=i.n(ln),dn=i(717),pn=i.n(dn),hn=i(718),un=i.n(hn),mn=i(719),gn=i.n(mn),_n=i(720),bn=i.n(_n),Sn=i(721),vn=i.n(Sn),fn=i(722),Cn=i.n(fn),En=i(723),Tn=i.n(En),On=i(724),Nn=i.n(On),yn=i(725),jn=i.n(yn),Mn=i(726),kn=i.n(Mn),wn=i(727),An=i.n(wn),Dn=i(728),Pn=i.n(Dn),In=i(729),Rn=i.n(In),Bn=i(730),Ln=i.n(Bn),xn=i(731),Fn=i.n(xn),Vn=i(732),Un=i.n(Vn),Hn=i(733),Gn=i.n(Hn),Wn=i(734),zn=i.n(Wn),Jn=i(735),Kn=i.n(Jn),Yn=i(736),qn=i.n(Yn),Qn=i(737),Zn=i.n(Qn),Xn=i(738),$n=i.n(Xn),es=i(739),ts=i.n(es),is=i(740),as=i.n(is),ns=i(741),ss=i.n(ns),os=i(742),rs=i.n(os),ls=i(743),cs=i.n(ls),ds=i(744),ps=i.n(ds),hs=i(745),us=i.n(hs),ms=i(746),gs=i.n(ms),_s=i(747),bs=i.n(_s),Ss=i(16);function vs(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function fs(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?vs(Object(i),!0).forEach((function(t){Cs(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):vs(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Cs(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Es(e){return e.filter(Boolean).join(" ")}const Ts=e=>Object(Ss.b)(mi.a,fs({className:Es([Et.a.tick,e.className])},e)),Os=e=>Object(Ss.b)(ni.a,fs({className:Es([Et.a.leave,e.className])},e)),Ns=e=>Object(Ss.b)(un.a,fs({className:Es([Et.a.share,e.className])},e)),ys=e=>Object(Ss.b)(la.a,fs({className:Et.a.microphone},e)),js=e=>Object(Ss.b)(da.a,fs({className:Et.a.microphone},e)),Ms=e=>Object(Ss.b)(oa.a,fs({className:Es([Et.a.microphoneMuted,e.className])},e)),ks=e=>Object(Ss.b)(Ln.a,fs({className:Es([Et.a.mutedLock,e.className])},e)),ws=e=>Object(Ss.b)(ii.a,fs({className:Et.a.camera},e)),As=e=>Object(Ss.b)(Yt.a,fs({className:Es([Et.a.cameraMuted,e.className])},e)),Ds=e=>Object(Ss.b)(Qt.a,fs({className:Es([Et.a.cameraMuted,e.className])},e)),Ps=e=>Object(Ss.b)(ei.a,fs({className:Es([Et.a.swapCamera,e.className])},e)),Is=e=>Object(Ss.b)(yi.a,fs({className:Et.a.email},e)),Rs=e=>Object(Ss.b)(jn.a,fs({className:Es([Et.a.wifi,e.className])},e)),Bs=e=>Object(Ss.b)(Vt.a,fs({className:Es([Et.a.audioVideo,e.className])},e)),Ls=e=>Object(Ss.b)(di.a,fs({className:Es([Et.a.checkmarkActive,e.className])},e)),xs=e=>Object(Ss.b)(xa.a,fs({className:Es([Et.a.framedPresentation,e.className])},e)),Fs=e=>Object(Ss.b)(ya.a,fs({className:Es([Et.a.pin,e.className])},e)),Vs=e=>Object(Ss.b)(bs.a,fs({className:Es([Et.a.mirror,e.className])},e)),Us=e=>Object(Ss.b)(Rn.a,fs({className:Es([Et.a.backGroundsIcon,e.className])},e)),Hs=e=>Object(Ss.b)(Fn.a,fs({className:Es([Et.a.closeRedIcon,e.className])},e)),Gs=e=>Object(Ss.b)(Va.a,fs({className:Es([Et.a.raiseHand,e.className])},e)),Ws=e=>Object(Ss.b)(Ha.a,fs({className:Es([Et.a.raiseHand,e.className])},e)),zs=e=>Object(Ss.b)(xt.a,fs({className:Es([Et.a.inCallChangeRole,e.className])},e)),Js=e=>Object(Ss.b)(Bt.a,fs({className:Es([Et.a.inCallChangeRole,e.className])},e)),Ks=e=>Object(Ss.b)(Xt.a,e),Ys=e=>Object(Ss.b)(fi.a,e),qs=e=>Object(Ss.b)(en.a,e),Qs=e=>Object(Ss.b)(wi.a,e),Zs=e=>Object(Ss.b)(Ii.a,e),Xs=e=>Object(Ss.b)(Di.a,e),$s=e=>Object(Ss.b)(Jt.a,e),eo=e=>Object(Ss.b)(na.a,e),to=e=>Object(Ss.b)(Ot.a,e),io=e=>Object(Ss.b)(Dt.a,e),ao=e=>Object(Ss.b)(It.a,e),no=e=>Object(Ss.b)(Oa.a,e),so=e=>Object(Ss.b)(Ba.a,e),oo=e=>Object(Ss.b)(Ea.a,e),ro=e=>Object(Ss.b)(fa.a,e),lo=e=>Object(Ss.b)(Nn.a,e),co=e=>Object(Ss.b)(rs.a,e),po=e=>Object(Ss.b)(wt.a,e),ho=e=>Object(Ss.b)(Sa.a,e),uo=e=>Object(Ss.b)(li.a,e),mo=e=>Object(Ss.b)(oi.a,e),go=e=>Object(Ss.b)(cn.a,e),_o=e=>Object(Ss.b)(ma.a,e),bo=e=>Object(Ss.b)(wa.a,e),So=e=>Object(Ss.b)(_i.a,e),vo=e=>Object(Ss.b)(Yi.a,e),fo=e=>Object(Ss.b)(Ei.a,e),Co=e=>Object(Ss.b)(Si.a,e),Eo=e=>Object(Ss.b)(yt.a,e),To=e=>Object(Ss.b)(Oi.a,e),Oo=e=>Object(Ss.b)(Ma.a,e),No=e=>Object(Ss.b)(bn.a,e),yo=e=>Object(Ss.b)(ha.a,e),jo=e=>Object(Ss.b)(Wa.a,e),Mo=e=>Object(Ss.b)(Ht.a,e),ko=e=>Object(Ss.b)(Wt.a,e),wo=e=>Object(Ss.b)(Tn.a,e),Ao=e=>Object(Ss.b)(Pn.a,e),Do=e=>Object(Ss.b)(qn.a,fs({className:Es([Et.a.farendcameracontrol,e.className])},e)),Po=e=>Object(Ss.b)(ts.a,e),Io=e=>Object(Ss.b)(Bi.a,e),Ro=e=>Object(Ss.b)(Wi.a,e),Bo=e=>Object(Ss.b)(xi.a,e),Lo=e=>Object(Ss.b)(Vi.a,e),xo=e=>Object(Ss.b)(Ji.a,e),Fo=e=>Object(Ss.b)(Hi.a,e),Vo=e=>Object(Ss.b)($n.a,e),Uo=e=>Object(Ss.b)(Zn.a,e),Ho=e=>Object(Ss.b)(Gn.a,e),Go=e=>Object(Ss.b)(zn.a,e),Wo=e=>Object(Ss.b)(Kn.a,e),zo=e=>Object(Ss.b)(Un.a,e),Jo=e=>Object(Ss.b)(as.a,e),Ko=e=>Object(Ss.b)(us.a,e),Yo=e=>Object(Ss.b)(gs.a,e),qo=e=>Object(Ss.b)(ss.a,e),Qo=e=>Object(Ss.b)(cs.a,e),Zo=e=>Object(Ss.b)(ps.a,e),Xo=e=>Object(Ss.b)(Xi.a,e),$o=e=>Object(Ss.b)(Qi.a,e),er=e=>Object(Ss.b)(Ia.a,e),tr=e=>Object(Ss.b)(Da.a,e),ir=e=>Object(Ss.b)(kn.a,e),ar=e=>Object(Ss.b)(An.a,e),nr=e=>Object(Ss.b)(_a.a,e),sr=e=>Object(Ss.b)(sn.a,fs({className:Es([Et.a.defaultIndicator,e.className])},e)),or=e=>Object(Ss.b)(Ya.a,fs({className:Es([Et.a.recordingIndicator,e.className])},e)),rr=e=>Object(Ss.b)(Cn.a,fs({className:Es([Et.a.defaultIndicator,e.className])},e)),lr=e=>Object(Ss.b)(vn.a,e),cr=e=>Object(Ss.b)(Qa.a,e),dr=e=>Object(Ss.b)(Ja.a,e),pr=e=>Object(Ss.b)(rn.a,e),hr=e=>Object(Ss.b)(an.a,e),ur=e=>Object(Ss.b)(pn.a,e),mr=e=>Object(Ss.b)(Mt.a,e),gr=e=>Object(Ss.b)(hi.a,e),_r=e=>Object(Ss.b)(Xa.a,e),br=e=>Object(Ss.b)(gn.a,e),Sr=e=>Object(Ss.b)(ea.a,e),vr=e=>Object(Ss.b)(ia.a,e),fr=e=>Object(Ss.b)(Mi.a,e);var Cr=i(748),Er=i.n(Cr);class Tr extends l.a.Component{constructor(e){var t,i,a;super(e),a=150,(i="FONT_SIZE_SCALE_FACTOR")in(t=this)?Object.defineProperty(t,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[i]=a}render(){const e=this.FONT_SIZE_SCALE_FACTOR/this.props.text.length,t={fontSize:"clamp(0.75rem, ".concat(e,"vw, 1.25rem)"),minHeight:"0vw",lineHeight:"clamp(0.75rem, ".concat(e,"vw, 1.25rem)")};return l.a.createElement("span",{role:"alert","data-test":"in_call_banner",style:t,className:[this.props.className,Er.a.banner].filter(Boolean).join(" ")},this.props.text)}}var Or=i(749),Nr=i.n(Or),yr=i(750),jr=i.n(yr);var Mr=e=>{let{callback:t,leaveButtonPosition:i,endMeetingAllowed:a}=e;const n=Object(r.useRef)(null),s=e=>{n.current&&e.target instanceof Element&&!n.current.contains(e.target)&&t(Ce.g.NONE)},o=()=>{t(Ce.g.NONE)};return Object(r.useEffect)(()=>(document.addEventListener("click",s),window.addEventListener("resize",o),()=>{document.removeEventListener("click",s),window.removeEventListener("resize",o)})),document.documentElement.style.setProperty("--center-leave-button",i.right-i.width/2+window.pageXOffset+"px"),l.a.createElement("div",{className:jr.a.outerDiv,onKeyDown:function(e){"Escape"===e.key&&t(Ce.g.NONE)}},l.a.createElement("section",{ref:n,className:jr.a.leaveOptionsContainer},l.a.createElement("button",{autoFocus:!0,"aria-label":Object(z.Translate)("call_leave_meeting"),className:jr.a.leaveOption,onClick:()=>{t(Ce.g.LEAVE)}},Object(z.Translate)("call_leave_meeting")),a&&l.a.createElement("button",{"aria-label":Object(z.Translate)("call_end_meeting"),className:jr.a.leaveOption,onClick:()=>{t(Ce.g.END_MEETING)}},Object(z.Translate)("call_end_meeting"))),l.a.createElement("div",{className:jr.a.arrowDown}))},kr=i(87),wr=i(7);function Ar(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Dr extends r.PureComponent{constructor(e){super(e),Ar(this,"lastTouchStart",void 0),this.state={showLeaveModeDialog:!1,overrideIsActiveProp:!1},this.lastTouchStart=void 0,this.isEndMeetingAllowed=this.isEndMeetingAllowed.bind(this),this.onShareClick=this.onShareClick.bind(this),this.onMicrophoneMuteClick=this.onMicrophoneMuteClick.bind(this),this.onRaiseHandClick=this.onRaiseHandClick.bind(this),this.onLeaveButtonClicked=this.onLeaveButtonClicked.bind(this),this.onLeaveModeSelectionCallback=this.onLeaveModeSelectionCallback.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onMouseEnter=this.onMouseEnter.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this),this.getCurrParticipantStatus=this.getCurrParticipantStatus.bind(this),this.oncameraclick=this.oncameraclick.bind(this)}componentDidMount(){document.addEventListener("touchstart",this.onTouchStart)}componentWillUnmount(){document.removeEventListener("touchstart",this.onTouchStart)}onMouseEnter(){Object(gt.b)()||this.setState({overrideIsActiveProp:!0})}onMouseLeave(){Object(gt.b)()||this.setState({overrideIsActiveProp:!1})}componentDidUpdate(e){e.isActive&&!this.props.isActive&&this.setState({showLeaveModeDialog:!1})}onTouchStart(e){this.props.isActive?this.lastTouchStart=void 0:this.lastTouchStart=e.timeStamp}shouldIgnoreClick(e){return!!(this.lastTouchStart&&e&&e.timeStamp-this.lastTouchStart<Ce.o)}getCurrParticipantStatus(e){const t=this.props.participants.filter(e=>e.guid===Object(J.c)());return t[0]&&t[0][e]}render(){const e=this.props.joinMode!==wr.a.PRESENTATION_ONLY&&(this.props.hasLocalStreamAudio||this.props.localMicPermissionStatus===kr.b.REQUESTING),t=this.props.participationPermissions.unblockOwnAudio||!this.props.isInStudioModeAudio&&!this.props.isMicrophoneBlocked,i=this.props.isMicrophoneMuted||this.props.isMicrophoneBlocked,a=this.getCurrParticipantStatus("handStatus")===k.h.Raised,n=!1!==this.getCurrParticipantStatus("awaitingActivation"),s=t?Object(z.Translate)("call_unmute_microphone_button"):Object(z.Translate)("call_unmute_microphone_blocked_button"),o=t?Object(z.Translate)("call_unmute_microphone_button_assistive"):Object(z.Translate)("call_unmute_microphone_blocked_button"),r=this.props.isActive||this.state.overrideIsActiveProp,c=this.props.isCameraMuted||this.props.isCameraBlocked,d=this.props.participationPermissions.unblockOwnVideo||!this.props.isInStudioModeVideo&&!this.props.isCameraBlocked,p=this.props.joinMode!==wr.a.PRESENTATION_ONLY&&(this.props.hasLocalStreamVideo||this.props.localCamPermissionStatus===kr.b.REQUESTING);return l.a.createElement("section",{className:Nr.a.callControls,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},e&&l.a.createElement(Q.a,{title:i?s:Object(z.Translate)("call_mute_microphone_button"),"aria-label":i?o:Object(z.Translate)("call_mute_microphone_button_assistive"),onClick:this.onMicrophoneMuteClick,className:[Nr.a.microphoneMuteToggleButton,!r&&!i&&Nr.a.hidden,!r&&i&&Nr.a.activeHidden,!r&&Object(gt.b)()&&i&&Nr.a.activeHiddenMobile,!r&&i&&Nr.a.microphoneActiveHidden,r&&Nr.a.active].filter(Boolean).join(" "),toggled:i,disabled:!t},this.props.isMicrophoneMuted||this.props.isMicrophoneBlocked?l.a.createElement(Ms,null):l.a.createElement(js,null),!t&&l.a.createElement(Q.b,{className:Nr.a.secondary_notification,isToggled:i},l.a.createElement(ks,null))),p&&l.a.createElement(Q.a,{title:c?Object(z.Translate)("call_unmute_camera_button"):Object(z.Translate)("call_mute_camera_button"),"aria-label":c?Object(z.Translate)("call_unmute_camera_button_assistive"):Object(z.Translate)("call_mute_camera_button_assistive"),onClick:this.oncameraclick,className:[Nr.a.cameraMuteToggleButtonInCallControls,r&&Nr.a.active,!r&&!c&&Nr.a.hidden,!r&&c&&Nr.a.activeHidden,!r&&Object(gt.b)()&&c&&Nr.a.activeHiddenMobile,!r&&c&&Nr.a.cameraActiveHidden].filter(Boolean).join(" "),toggled:c,disabled:!d},this.props.isCameraMuted||this.props.isCameraBlocked?l.a.createElement(As,null):l.a.createElement(ws,null),!d&&l.a.createElement(Q.b,{className:Nr.a.secondary_notification,isToggled:c},l.a.createElement(ks,null))),this.props.raiseHandEnabled&&!n&&l.a.createElement(Q.a,{title:a?Object(z.Translate)("call_lower_hand"):Object(z.Translate)("call_raise_hand"),onClick:this.onRaiseHandClick,disabled:this.props.isJoining,className:[Nr.a.raiseHandToggleButton,!r&&!a&&Nr.a.hidden,!r&&a&&Nr.a.activeHidden,!r&&Object(gt.b)()&&a&&Nr.a.activeHiddenMobile,!r&&a&&Nr.a.handActiveHidden,r&&Nr.a.active].filter(Boolean).join(" "),toggled:a},l.a.createElement(Ws,null)),this.props.supportsSharing&&this.props.participationPermissions.sendPresentation&&l.a.createElement(Q.a,{title:this.props.isSharing?Object(z.Translate)("call_stop_sharing"):Object(z.Translate)("call_start_sharing"),onClick:this.onShareClick,disabled:this.props.isJoining,className:[Nr.a.shareToggleButton,!r&&Nr.a.hidden,!r&&this.props.isSharing&&Nr.a.activeHidden,!r&&Object(gt.b)()&&this.props.isSharing&&Nr.a.activeHiddenMobile,!r&&this.props.isSharing&&Nr.a.sharingActiveHidden,r&&Nr.a.active].filter(Boolean).join(" "),toggled:this.props.isSharing},l.a.createElement(Ns,null)),l.a.createElement(Q.a,{title:Object(z.Translate)("call_leave_meeting"),className:[Nr.a.leaveButton,!r&&Nr.a.hidden,r&&Nr.a.active].filter(Boolean).join(" "),onClick:this.onLeaveButtonClicked},l.a.createElement(Os,null)),this.state.showLeaveModeDialog&&l.a.createElement(Mr,{callback:this.onLeaveModeSelectionCallback,endMeetingAllowed:this.isEndMeetingAllowed(),leaveButtonPosition:this.state.leaveButtonPosition}))}oncameraclick(e){this.shouldIgnoreClick(e)||this.props.onCameraMuteToggle()}isEndMeetingAllowed(){return this.props.participationPermissions&&this.props.participationPermissions.endConference&&this.props.participantCount>1}onLeaveButtonClicked(e){if(this.shouldIgnoreClick(e))return;const t=e&&e.target&&e.target.getBoundingClientRect();d.getStorageVariable(_.a.MEETING_NOTES_STORE)?this.props.onShowDialog(Ue.a.SAVE_DISCARD_NOTES):t&&this.isEndMeetingAllowed()?this.setState({leaveButtonPosition:t,showLeaveModeDialog:!0}):this.props.onLeaveClick()}onLeaveModeSelectionCallback(e){this.setState({showLeaveModeDialog:!1}),e===Ce.g.LEAVE?this.props.onLeaveClick():e===Ce.g.END_MEETING&&this.props.onEndCallClick()}onMicrophoneMuteClick(e){this.shouldIgnoreClick(e)||this.props.onMicrophoneMuteToggle()}onRaiseHandClick(e){if(this.shouldIgnoreClick(e))return;this.getCurrParticipantStatus("handStatus")===k.h.Raised?this.props.onLowerHand(Object(J.c)()):this.props.onRaiseHand(Object(J.c)())}onShareClick(e){this.shouldIgnoreClick(e)||(this.props.isSharing?this.props.onShareStop():this.props.onShareStart())}}Ar(Dr,"defaultProps",{isSharing:!1,onEndCallClick:()=>{},onLeaveClick:()=>{},onShareStart:()=>{},onShareStop:()=>{},supportsSharing:!1});var Pr=Object(c.b)(e=>({hasLocalStreamAudio:b.Oc(e),isInStudioModeAudio:b.td(e),hasLocalStreamVideo:b.Pc(e),isInStudioModeVideo:b.ud(e),isSharing:b.Ud(e),joinMode:b.gc(e),participantCount:ce(e),supportsSharing:b.Qd(e),participants:le(e),raiseHandEnabled:b.Md(e)}),e=>({onShareStart:()=>e(Object(u.startSharing)()),onShareStop:()=>e(Object(u.stopSharing)()),onRaiseHand:t=>e(Object(u.setRaiseHand)(t,k.h.Raised)),onLowerHand:t=>e(Object(u.setRaiseHand)(t,k.h.Lowered)),onShowDialog:t=>e(Object(Le.c)(t))}))(Dr),Ir=i(751),Rr=i.n(Ir);const Br=e=>{let{children:t,className:i,enabled:a,title:n,dataTest:s}=e;return l.a.createElement("div",{className:[Rr.a.indicatorWrapper,!a&&Rr.a.hidden,a&&Rr.a.active,i].filter(Boolean).join(" "),"data-test":s},l.a.createElement("div",{className:Rr.a.spanWrapper,role:"alert","aria-live":"assertive"},n&&l.a.createElement("span",{tabIndex:0},n)),t)};class Lr extends r.PureComponent{constructor(e){super(e)}render(){return l.a.createElement("section",{className:Rr.a.callIndicators},this.props.mediaStatsHealthStatus===k.i.HEALTH_STATUS_GOOD&&l.a.createElement(Br,{dataTest:"network_good_icon",enabled:this.props.mediaStatsHealthStatus===k.i.HEALTH_STATUS_GOOD},l.a.createElement(X.u,null)),this.props.mediaStatsHealthStatus===k.i.HEALTH_STATUS_POOR&&l.a.createElement(Br,{dataTest:"network_poor_icon",enabled:this.props.mediaStatsHealthStatus===k.i.HEALTH_STATUS_POOR},l.a.createElement(X.v,null)),this.props.mediaStatsHealthStatus===k.i.HEALTH_STATUS_BAD&&l.a.createElement(Br,{dataTest:"network_bad_icon",enabled:this.props.mediaStatsHealthStatus===k.i.HEALTH_STATUS_BAD},l.a.createElement(X.t,null)),l.a.createElement(Br,{enabled:this.props.isLocked,title:Object(z.Translate)("call_is_locked")},l.a.createElement(sr,null)),l.a.createElement(Br,{enabled:this.props.isRecorded,title:Object(z.Translate)("call_is_recorded")},l.a.createElement(or,null)),l.a.createElement(Br,{enabled:this.props.isStreamed,title:Object(z.Translate)("call_is_streamed")},l.a.createElement(rr,null)))}}var xr=Object(c.b)(e=>({isLocked:b.hd(e),isRecorded:b.id(e),isStreamed:b.jd(e),mediaStatsHealthStatus:b.pb(e)}),e=>({}))(Lr),Fr=i(752),Vr=i.n(Fr);class Ur extends l.a.Component{constructor(e){var t,i,a;super(e),a=void 0,(i="expiryTimer")in(t=this)?Object.defineProperty(t,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[i]=a,this.state={shouldRemoveCaption:!1,expireCurrentCaption:!1},this.setExpiryTimer=this.setExpiryTimer.bind(this)}componentDidMount(){this.setExpiryTimer()}componentDidUpdate(e){this.setExpiryTimer(),e.captions!==this.props.captions&&this.setState({shouldRemoveCaption:!1,expireCurrentCaption:!1})}componentWillUnmount(){this.expiryTimer&&clearTimeout(this.expiryTimer)}setExpiryTimer(){this.expiryTimer&&clearTimeout(this.expiryTimer);this.expiryTimer=setTimeout(()=>{this.setState({shouldRemoveCaption:!0,expireCurrentCaption:!0})},6e3)}render(){const{className:e,captions:t}=this.props;return 0===t.length||this.state.shouldRemoveCaption?null:l.a.createElement("span",{role:"alert","data-test":"in_call_captions",className:[e,Vr.a.message,this.state.expireCurrentCaption&&Vr.a.messagePendingRemoval,Vr.a.messageBottom,Vr.a.messageBottomDefault].filter(Boolean).join(" ")},t[t.length-1].body)}}var Hr=i(753),Gr=i.n(Hr),Wr=i(336);function zr(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Jr extends r.PureComponent{constructor(e,t){super(e),zr(this,"previewRef",l.a.createRef()),zr(this,"snapPositionStorageKey",void 0),zr(this,"onMoveDebounced",void 0),this.snapPositionStorageKey=t;let i=p.a.getStorageVariable(this.snapPositionStorageKey);null==i&&(i=this.getDefaultSnapPosition()),this.state={isDraggable:!0,shouldReportNoGoZones:!0,snapPosition:i},this.props.onSnapPositionChange&&this.props.onSnapPositionChange(i),this.onMove=this.onMove.bind(this),this.handleDocumentMouseDown=this.handleDocumentMouseDown.bind(this),this.handleDocumentTouchStart=this.handleDocumentTouchStart.bind(this),this.handleDocumentMouseMove=this.handleDocumentMouseMove.bind(this),this.handleDocumentTouchMove=this.handleDocumentTouchMove.bind(this),this.handleDocumentMouseUpTouchEnd=this.handleDocumentMouseUpTouchEnd.bind(this),this.onMoveDebounced=o.a.debounce(this.onMove,400)}componentDidUpdate(e,t){this.state.dragStartOffset&&!t.dragStartOffset?(document.addEventListener("mousemove",this.handleDocumentMouseMove),document.addEventListener("mouseup",this.handleDocumentMouseUpTouchEnd),document.addEventListener("touchmove",this.handleDocumentTouchMove),document.addEventListener("touchend",this.handleDocumentMouseUpTouchEnd)):!this.state.dragStartOffset&&t.dragStartOffset&&(document.removeEventListener("mousemove",this.handleDocumentMouseMove),document.removeEventListener("mouseup",this.handleDocumentMouseUpTouchEnd),document.removeEventListener("touchmove",this.handleDocumentTouchMove),document.removeEventListener("touchend",this.handleDocumentMouseUpTouchEnd)),!this.state.shouldReportNoGoZones&&this.state.shouldReportNoGoZones===t.shouldReportNoGoZones||this.state.dragStartOffset||this.onMoveDebounced()}componentDidMount(){document.addEventListener("mousedown",this.handleDocumentMouseDown),document.addEventListener("touchstart",this.handleDocumentTouchStart),this.onMove()}componentWillUnmount(){document.removeEventListener("mousedown",this.handleDocumentMouseDown),document.removeEventListener("mousemove",this.handleDocumentMouseMove),document.removeEventListener("mouseup",this.handleDocumentMouseUpTouchEnd),document.removeEventListener("touchstart",this.handleDocumentTouchStart),document.removeEventListener("touchmove",this.handleDocumentTouchMove),document.removeEventListener("touchend",this.handleDocumentMouseUpTouchEnd)}setPreviewRef(e){0}onMove(){const e={x:0,y:0,height:0,width:0};if(this.state.shouldReportNoGoZones&&this.previewRef.current&&this.props.remoteViewDOMRect){const t=this.previewRef.current.getBoundingClientRect();e.x=t.x-this.props.remoteViewDOMRect.x,e.y=t.y-this.props.remoteViewDOMRect.y,e.height=t.height,e.width=t.width}return this.props.onMove(e)}handleDocumentMouseDown(e){this.state.isDraggable&&0===e.button&&this.previewRef&&this.previewRef.current&&this.previewRef.current.contains(e.target)&&(this.setState({dragStartOffset:{x:e.clientX-this.previewRef.current.offsetLeft,y:e.clientY-this.previewRef.current.offsetTop}}),e.stopPropagation(),e.preventDefault())}handleDocumentTouchStart(e){if(!this.state.isDraggable)return;const t=e.touches&&e.touches.length?e.touches[0]:void 0;t&&this.previewRef&&this.previewRef.current&&this.previewRef.current.contains(t.target)&&(this.setState({dragStartOffset:{x:t.clientX-this.previewRef.current.offsetLeft,y:t.clientY-this.previewRef.current.offsetTop}}),e.stopPropagation(),e.preventDefault())}handleDocumentMouseMove(e){this.state.dragStartOffset&&(this.setState({dragPosition:{x:e.clientX-this.state.dragStartOffset.x,y:e.clientY-this.state.dragStartOffset.y}}),e.stopPropagation(),e.preventDefault())}handleDocumentTouchMove(e){if(!this.state.dragStartOffset)return;const t=e.touches&&e.touches.length?e.touches[0]:void 0;t&&this.setState({dragPosition:{x:t.clientX-this.state.dragStartOffset.x,y:t.clientY-this.state.dragStartOffset.y}}),e.stopPropagation(),e.preventDefault()}handleDocumentMouseUpTouchEnd(e){if(this.previewRef&&this.previewRef.current){if(!this.state.dragPosition)return this.setState({dragPosition:void 0,dragStartOffset:void 0});let t=this.previewRef.current.offsetWidth;[Wr.b.TOP_RIGHT,Wr.b.BOTTOM_RIGHT].includes(this.state.snapPosition)&&(t=-this.previewRef.current.offsetWidth);let i=this.previewRef.current.offsetHeight;[Wr.b.BOTTOM_LEFT,Wr.b.BOTTOM_RIGHT].includes(this.state.snapPosition)&&(i=-this.previewRef.current.offsetHeight);let a=this.state.snapPosition;a=this.state.dragPosition.x<window.innerWidth/2-t/2?this.state.dragPosition.y<window.innerHeight/2-i/2?Wr.b.TOP_LEFT:Wr.b.BOTTOM_LEFT:this.state.dragPosition.y<window.innerHeight/2-i/2?Wr.b.TOP_RIGHT:Wr.b.BOTTOM_RIGHT,this.setState({dragPosition:void 0,dragStartOffset:void 0,snapPosition:a}),p.a.setStorageVariable(this.snapPositionStorageKey,a),this.props.onSnapPositionChange&&this.props.onSnapPositionChange(a),e.stopPropagation(),e.preventDefault()}}}function Kr(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function Yr(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Kr(Object(i),!0).forEach((function(t){qr(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Kr(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function qr(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var Qr=Object(c.b)(e=>({selectedParticipantGuid:b.ge(e),participants:le(e)}),e=>({onCloseCameraControls:t=>e(Object(u.farEndCameraControlsViewChanged)(t,!1)),onZoomInClick:t=>e(Object(u.sendZoomCameraControls)(t,k.d.ZOOM_IN)),onZoomOutClick:t=>e(Object(u.sendZoomCameraControls)(t,k.d.ZOOM_OUT)),onPanLeftClick:t=>e(Object(u.sendPanCameraControls)(t,k.d.PAN_LEFT)),onPanRightClick:t=>e(Object(u.sendPanCameraControls)(t,k.d.PAN_RIGHT)),onTiltUpClick:t=>e(Object(u.sendTiltCameraControls)(t,k.d.TILT_UP)),onTiltDownClick:t=>e(Object(u.sendTiltCameraControls)(t,k.d.TILT_DOWN))}))(class extends Jr{constructor(e){super(e,_.a.FECC_CAMERA_CONTROLS_POSITION),qr(this,"expiryTimer",void 0),this.state=Yr(Yr({},this.state),{},{closeCameraControls:!1}),this.onCloseClick=this.onCloseClick.bind(this),this.onHandlerMouseDown=this.onHandlerMouseDown.bind(this),this.onHandlerMouseUp=this.onHandlerMouseUp.bind(this)}render(){const e=this.state.snapPosition===Wr.b.BOTTOM_LEFT,t=this.state.snapPosition===Wr.b.BOTTOM_RIGHT,i=this.state.snapPosition===Wr.b.TOP_LEFT,a=this.state.snapPosition===Wr.b.TOP_RIGHT,n=e||i,s=t||a,o=[this.props.className&&this.props.className.allPositions,Gr.a.FarEndCamControls,e&&Gr.a.cameraControlsBottomLeft,t&&Gr.a.cameraControlsBottomRight,i&&Gr.a.cameraControlsTopLeft,a&&Gr.a.cameraControlsTopRight,n&&this.props.className&&this.props.className.leftPositions,s&&this.props.className&&this.props.className.rightPositions,this.state.dragStartOffset&&Gr.a.isDragging,Object(gt.b)()?Gr.a.mobile:Gr.a.notMobile,["ios","safari"].includes(Object(gt.a)().name)&&Gr.a.safariDisableMoveAnimation,this.props.isCallMenuOpen&&Gr.a.callMenuOpen].filter(Boolean).join(" "),l=this.state.dragStartOffset&&this.state.dragPosition?{left:this.state.dragPosition.x+"px",top:this.state.dragPosition.y+"px"}:void 0,c=this.props.participants.find(e=>e.guid===this.props.selectedParticipantGuid);return void 0!==this.props.selectedParticipantGuid&&this.props.selectedParticipantGuid&&!this.state.closeCameraControls?r.createElement("section",{className:o,style:l,ref:this.previewRef},r.createElement("div",{className:Gr.a.participantNameContainer},r.createElement("label",{"data-test":"selected_participantname",className:Gr.a.name},null==c?void 0:c.displayName),r.createElement(Q.c,{"data-test":"close_button",className:Gr.a.closeButton,onClick:this.onCloseClick},r.createElement(X.f,null))),r.createElement("div",{className:Gr.a.cameraControlsPanel},r.createElement("div",{className:Gr.a.panelGridContainer},r.createElement(Q.c,{"data-test":"pan_left_button",className:Gr.a.panLeftButton,onClick:()=>this.props.onPanLeftClick(this.props.selectedParticipantGuid),onMouseDown:()=>this.onHandlerMouseDown("panLeft")},r.createElement(Ho,null)),r.createElement(Q.c,{"data-test":"pan_right_button",className:Gr.a.panRightButton,onClick:()=>this.props.onPanRightClick(this.props.selectedParticipantGuid),onMouseDown:()=>this.onHandlerMouseDown("panRight")},r.createElement(Go,null)),r.createElement(Q.c,{"data-test":"tilt_up_button",className:Gr.a.tiltUpButton,onClick:()=>this.props.onTiltUpClick(this.props.selectedParticipantGuid),onMouseDown:()=>this.onHandlerMouseDown("tiltUp")},r.createElement(Wo,null)),r.createElement(Q.c,{"data-test":"tilt_down_button",className:Gr.a.tiltDownButton,onClick:()=>this.props.onTiltDownClick(this.props.selectedParticipantGuid),onMouseDown:()=>this.onHandlerMouseDown("tiltDown")},r.createElement(zo,null)),r.createElement(Q.c,{"data-test":"zoom_in_button",className:Gr.a.zoomInButton,onClick:()=>this.props.onZoomInClick(this.props.selectedParticipantGuid),onMouseDown:()=>this.onHandlerMouseDown("zoomIn")},r.createElement(Vo,null)),r.createElement("div",{className:Gr.a.zoomCellSpacer}),r.createElement(Q.c,{"data-test":"zoom_out_button",className:Gr.a.zoomOutButton,onClick:()=>this.props.onZoomOutClick(this.props.selectedParticipantGuid),onMouseDown:()=>this.onHandlerMouseDown("zoomOut")},r.createElement(Uo,null))))):null}onHandlerMouseDown(e){return this.expiryTimer=setInterval(()=>{switch(e){case"zoomIn":this.props.onZoomInClick(this.props.selectedParticipantGuid);break;case"zoomOut":this.props.onZoomOutClick(this.props.selectedParticipantGuid);break;case"tiltUp":this.props.onTiltUpClick(this.props.selectedParticipantGuid);break;case"tiltDown":this.props.onTiltDownClick(this.props.selectedParticipantGuid);break;case"panRight":this.props.onPanRightClick(this.props.selectedParticipantGuid);break;case"panLeft":this.props.onPanLeftClick(this.props.selectedParticipantGuid)}},600),document.addEventListener("mouseup",this.onHandlerMouseUp),!1}onHandlerMouseUp(){return this.expiryTimer&&clearTimeout(this.expiryTimer),document.removeEventListener("mouseup",this.onHandlerMouseUp),!1}onCloseClick(){this.setState({closeCameraControls:!0}),this.props.onCloseCameraControls(this.props.selectedParticipantGuid)}getDefaultSnapPosition(){return Wr.b.TOP_LEFT}}),Zr=i(754),Xr=i.n(Zr);class $r extends l.a.Component{constructor(e){super(e)}render(){let e;const t="leftTop"===this.props.logoFilePosition,i="rightTop"===this.props.logoFilePosition,a="leftBottom"===this.props.logoFilePosition,n="rightBottom"===this.props.logoFilePosition;return e=[Xr.a.logoImage,Xr.a.logoSize,t&&Xr.a.logoImageLeftTop,i&&Xr.a.logoImageRightTop,a&&Xr.a.logoImageLeftBottom,n&&Xr.a.logoImageRightBottom].filter(Boolean).join(" "),l.a.createElement("img",{className:e,id:"logoimage",src:this.props.logoFileSrc,alt:""})}}var el=$r,tl=i(755),il=i.n(tl);class al extends l.a.Component{constructor(e){var t,i,a;super(e),a=void 0,(i="expiryTimer")in(t=this)?Object.defineProperty(t,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[i]=a,this.state={isExpired:!1,shouldBeginRemoval:!1},this.removeMessage=this.removeMessage.bind(this),this.setExpiryTimer=this.setExpiryTimer.bind(this),this.checkPositionValid=this.checkPositionValid.bind(this)}componentDidMount(){document.documentElement.style.setProperty("--message-offset","".concat(this.props.offset)),this.setExpiryTimer(),this.checkPositionValid()}componentDidUpdate(e){this.props.offset!==e.offset&&document.documentElement.style.setProperty("--message-offset","".concat(this.props.offset)),this.props.messageExpiry!==e.messageExpiry&&this.setExpiryTimer(),this.props.messagePosition!==e.messagePosition&&this.checkPositionValid()}componentWillUnmount(){this.expiryTimer&&clearTimeout(this.expiryTimer)}checkPositionValid(){["top","middle","bottom"].includes(this.props.messagePosition||"")||Object(we.f)("received unrecognised in-call message position ".concat(this.props.messagePosition,"!"))}setExpiryTimer(){this.expiryTimer&&clearTimeout(this.expiryTimer);const e=Math.min(this.props.messageExpiry.getTime()-Date.now(),2147483647);this.setState({isExpired:e<0,shouldBeginRemoval:!1}),e?this.expiryTimer=setTimeout(()=>{this.setState({shouldBeginRemoval:!0})},e):Object(we.f)("in-call message that was to be rendered has already expired at ".concat(this.props.messageExpiry.toString()))}getTopStyling(){return this.props.offset?[il.a.messageTop,il.a.messageTopOffsetted].join(" "):[il.a.messageTop,il.a.messageTopDefault].join(" ")}getBottomStyling(){return this.props.offset?[il.a.messageBottom,il.a.messageBottomOffsetted].join(" "):[il.a.messageBottom,il.a.messageBottomDefault].join(" ")}render(){const{className:e,messageText:t,messagePosition:i}=this.props;return!this.state.isExpired&&t?l.a.createElement("span",{role:"alert","data-test":"in_call_message",className:[e,il.a.message,this.state.shouldBeginRemoval&&il.a.messagePendingRemoval,"top"===i&&this.getTopStyling(),"middle"===i&&il.a.messageMiddle,"bottom"===i&&this.getBottomStyling()].filter(Boolean).join(" "),onTransitionEnd:this.removeMessage},t):null}removeMessage(e){"opacity"===e.propertyName&&this.setState({isExpired:!0})}}var nl=i(419),sl=i.n(nl),ol=i(756),rl=i.n(ol);function ll(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function cl(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ll(Object(i),!0).forEach((function(t){dl(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ll(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function dl(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class pl extends Jr{constructor(e){super(e,_.a.PRESENTATION_PREVIEW_SNAP_POSITION),dl(this,"streamViewRef",l.a.createRef());let t=p.a.getStorageVariable(_.a.PINNED_PRESENTATION_PREVIEW);null==t&&(t=!0),this.state=cl(cl({},this.state),{},{isPinned:t}),this.onPinToggle=this.onPinToggle.bind(this)}componentDidUpdate(e,t){if(super.componentDidUpdate(e,t),this.props.onVisibilityChange){const i=!e.isActive&&!t.isPinned,a=!this.props.isActive&&!this.state.isPinned;a&&!i?this.props.onVisibilityChange(!1):!a&&i&&this.props.onVisibilityChange(!0)}}componentDidMount(){super.componentDidMount(),this.props.onVisibilityChange&&this.props.onVisibilityChange(!0)}componentWillUnmount(){super.componentWillUnmount(),this.props.onVisibilityChange&&this.props.onVisibilityChange(!1)}render(){const e=j("localContentStream");if(!e)return null;const t=!!o.a.filter(e.getTracks(),{kind:"audio"}).length,i=this.state.snapPosition===Wr.b.BOTTOM_LEFT,a=this.state.snapPosition===Wr.b.BOTTOM_RIGHT,n=this.state.snapPosition===Wr.b.TOP_LEFT,s=this.state.snapPosition===Wr.b.TOP_RIGHT,r=i||n,c=a||s,d=[this.props.className&&this.props.className.allPositions,rl.a.presentationPreview,i&&rl.a.presentationPreviewBottomLeft,a&&rl.a.presentationPreviewBottomRight,n&&rl.a.presentationPreviewTopLeft,s&&rl.a.presentationPreviewTopRight,r&&this.props.className&&this.props.className.leftPositions,c&&this.props.className&&this.props.className.rightPositions,this.state.dragStartOffset&&rl.a.isDragging,Object(gt.b)()?rl.a.mobile:rl.a.notMobile,!this.state.isPinned&&!this.props.isActive&&sl.a.hidden,this.state.isPinned&&!this.props.isActive&&sl.a.visibleWithoutButtons,this.state.isPinned&&this.props.isActive&&sl.a.visibleWithButtons,["ios","safari"].includes(Object(gt.a)().name)&&rl.a.safariDisableMoveAnimation,this.props.isCallMenuOpen&&rl.a.callMenuOpen].filter(Boolean).join(" "),p=this.state.dragStartOffset&&this.state.dragPosition?{left:this.state.dragPosition.x+"px",top:this.state.dragPosition.y+"px"}:void 0;return l.a.createElement("section",{className:d,style:p,ref:this.previewRef},l.a.createElement(bt.a,{key:"local_content_stream",ref:this.streamViewRef,stream:e,muted:!0,onSizeChange:this.props.onSizeChange,className:[rl.a.presentationPreviewVideo].join(" "),"data-test":"local_content_stream"}),l.a.createElement(Q.a,{title:this.state.isPinned?Object(z.Translate)("call_unpin_presentation_preview"):Object(z.Translate)("call_pin_presentation_preview"),className:rl.a.pinToggleButton,onClick:this.onPinToggle,onMouseDown:this.stopMouseDownTouchStartPropagation,onTouchStart:this.stopMouseDownTouchStartPropagation,toggled:this.state.isPinned},l.a.createElement(Fs,null)),t&&l.a.createElement(br,{className:rl.a.presentingWithAudioIndicator,"data-test":"sharing_with_audio_speaker_indicator"}))}getDefaultSnapPosition(){return Wr.b.BOTTOM_RIGHT}onPinToggle(){const e=!this.state.isPinned;p.a.setStorageVariable(_.a.PINNED_PRESENTATION_PREVIEW,e),this.setState({isPinned:e,shouldReportNoGoZones:e})}stopMouseDownTouchStartPropagation(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()}}var hl=i(757),ul=i.n(hl),ml=i(758),gl=i.n(ml);function _l(e,t,i,a){return t||e.displayName||"none"===e.id&&i||a}var bl=i(32),Sl=i(3),vl=i(5);var fl=i(123),Cl=i(63);function El(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Tl extends r.PureComponent{constructor(e){super(e),El(this,"settingsRef",l.a.createRef()),El(this,"handleFileUploadClick",()=>{this.state.inputReference.current.click()}),this.state={isHDEnabled:h.f.isHDEnabled(),blurMode:h.f.blurMode(),blurIntensity:h.f.blurIntensity(),selectedStaticImageId:0,isBackgroundsClicked:!1,inputReference:l.a.createRef(),customVb:[],adminCustomVbCount:this.fetchCount(),isOptimiseForTextChecked:p.a.getStorageVariable(_.a.OPTIMISE_FOR_TEXT)},this.onCameraSelectClick=this.onCameraSelectClick.bind(this),this.onMicrophoneSelectClick=this.onMicrophoneSelectClick.bind(this),this.onSpeakerSelectClick=this.onSpeakerSelectClick.bind(this),this.onBlurStatusChange=this.onBlurStatusChange.bind(this),this.onStaticBackgroundImageApply=this.onStaticBackgroundImageApply.bind(this),this.onKeyPressed=this.onKeyPressed.bind(this),this.onHDChange=this.onHDChange.bind(this),this.onBlurIntensityChange=this.onBlurIntensityChange.bind(this),this.onBlurIntensityReset=this.onBlurIntensityReset.bind(this),this.renderBackgroundBlur=this.renderBackgroundBlur.bind(this),this.supportedBlurBrowser=this.supportedBlurBrowser.bind(this),this.renderBackdrops=this.renderBackdrops.bind(this),this.handleOnFileChange=this.handleOnFileChange.bind(this),this.onFocusOut=this.onFocusOut.bind(this)}render(){return l.a.createElement("section",{tabIndex:0,ref:this.settingsRef,onBlur:e=>this.onFocusOut(e),className:[this.props.isInCall?gl.a.mediaSettingsInCall:gl.a.mediaSettings,this.props.className].filter(Boolean).join(" "),onKeyDown:this.onKeyPressed},this.props.onClose&&l.a.createElement(Q.c,{"aria-label":Object(z.Translate)("media_settings_close_button"),className:gl.a.closeButton,onClick:this.props.onClose,title:Object(z.Translate)("media_settings_close_button")},l.a.createElement(X.e,null)),l.a.createElement("section",{className:gl.a.settingsSection,"aria-label":Object(z.Translate)("media_settings_camera"),tabIndex:0},l.a.createElement(ws,{"aria-hidden":!0}),l.a.createElement("header",null,Object(z.Translate)("media_settings_camera")),l.a.createElement(Cl.b,{"aria-label":Object(z.Translate)("media_settings_camera"),autoFocus:!0,value:this.props.selectedCamera&&this.props.selectedCamera.id,className:gl.a.deviceSelect,onChange:this.onCameraSelectClick},this.props.availableCameras.map(e=>l.a.createElement(Cl.a,{key:e.id,value:e.id,"aria-label":e.displayName},function(e){return _l(e,o.a.isNumber(e.displayName)?Object(z.Translate)("media_settings_numeric_camera_name",e.displayName):"",Object(z.Translate)("media_settings_no_camera"),Object(z.Translate)("media_settings_camera_default"))}(e)))),this.props.selectedCamera&&"none"!==this.props.selectedCamera.id&&this.props.localCamPermissionStatus!==kr.b.DENIED&&this.renderMirrorCheckbox(),this.props.selectedCamera&&"none"!==this.props.selectedCamera.id&&this.props.localCamPermissionStatus!==kr.b.DENIED&&this.renderHDCheckbox()),l.a.createElement("section",{className:gl.a.settingsSection},l.a.createElement(ys,{"aria-hidden":!0}),l.a.createElement("header",null,Object(z.Translate)("media_settings_microphone")),l.a.createElement(Cl.b,{"aria-label":Object(z.Translate)("media_settings_microphone"),value:this.props.selectedMicrophone&&this.props.selectedMicrophone.id,className:gl.a.deviceSelect,onChange:this.onMicrophoneSelectClick},this.props.availableMicrophones.map(e=>{return l.a.createElement(Cl.a,{key:e.id,value:e.id},_l(t=e,o.a.isNumber(t.displayName)?Object(z.Translate)("media_settings_numeric_microphone_name",t.displayName):"",Object(z.Translate)("media_settings_no_microphone"),Object(z.Translate)("media_settings_microphone_default")));var t})),l.a.createElement("div",{className:gl.a.audioMeterContainer},!this.props.hasLocalStreamAudio&&l.a.createElement(Ms,{className:gl.a.micNotWorkingIcon}),l.a.createElement("meter",{value:this.props.micAudioLevel,className:gl.a.audioMeter})),"safari"!==Object(gt.a)().name&&l.a.createElement(l.a.Fragment,null,l.a.createElement(br,{"aria-hidden":!0}),l.a.createElement("header",null,Object(z.Translate)("media_settings_speakers")),l.a.createElement(Cl.b,{"aria-label":Object(z.Translate)("media_settings_speakers"),value:this.props.selectedSpeaker&&this.props.selectedSpeaker.id,className:gl.a.deviceSelect,onChange:this.onSpeakerSelectClick},this.props.availableSpeakers.map(e=>l.a.createElement(Cl.a,{key:e.id,value:e.id},function(e){return _l(e,o.a.isNumber(e.displayName)?Object(z.Translate)("media_settings_numeric_speaker_name",e.displayName):"",Object(z.Translate)("media_settings_no_speaker"),Object(z.Translate)("media_settings_speaker_default"))}(e)))))),this.props.isInCall&&l.a.createElement("section",{className:gl.a.settingsSection},l.a.createElement(ur,null),l.a.createElement("header",null,Object(z.Translate)("media_settings_sharing")),this.optimiseForTextCheckbox()),this.props.isInCall&&this.props.backgroundBlurAllowed&&this.supportedBlurBrowser()&&this.props.selectedCamera&&"none"!==this.props.selectedCamera.id&&this.props.localCamPermissionStatus!==kr.b.DENIED&&this.renderBackgroundBlur())}onFocusOut(e){var t,i;this.settingsRef.current&&!(null===(t=this.settingsRef)||void 0===t||null===(i=t.current)||void 0===i?void 0:i.contains(e.relatedTarget))&&null!==e.relatedTarget&&this.props.onClose&&this.props.onClose()}fetchCount(){new Promise((e,t)=>{Sl.c.get("/branding/utils.json",{responseType:"json",baseURL:""}).then(i=>{i.status===vl.a.OK&&null!=i.data||t("Utils.json is not present"),e(i.data)}).catch(e=>{t(e)})}).then(e=>{const t=JSON.stringify(e.vb_count);/^[0-9]{1,2}$/.test(t)?this.setState({adminCustomVbCount:e}):this.setState({adminCustomVbCount:0})},e=>{this.setState({adminCustomVbCount:0})})}renderBackgroundBlur(){return l.a.createElement("section",{className:gl.a.blurControlSection},l.a.createElement("div",{className:gl.a.blurHeader},l.a.createElement(wo,null),l.a.createElement("header",null,Object(z.Translate)("media_settings_background_virtual"))),l.a.createElement("div",{className:this.props.isInCall?gl.a.blurOptionSmall:gl.a.blurOption},l.a.createElement(q.a,{className:[gl.a.virtualBackDropOptions,this.state.blurMode===k.a.NONE&&gl.a.selected].filter(Boolean).join(" "),"aria-label":Object(z.Translate)("media_settings_background_none"),autoFocus:!0,onClick:()=>this.onBlurStatusChange(k.a.NONE)},l.a.createElement("div",null,l.a.createElement("span",{className:gl.a.vbIcon},l.a.createElement(Mo,null)),l.a.createElement("span",{className:gl.a.vbText},Object(z.Translate)("media_settings_background_none")))),l.a.createElement(q.a,{className:[gl.a.virtualBackDropOptions,this.state.blurMode===k.a.BLUR&&gl.a.selected].filter(Boolean).join(" "),"aria-label":Object(z.Translate)("media_settings_background_blur"),autoFocus:!0,onClick:()=>this.onBlurStatusChange(k.a.BLUR)},l.a.createElement("div",null,l.a.createElement("span",{className:gl.a.vbIcon},l.a.createElement(ko,null)),l.a.createElement("span",{className:gl.a.vbText},Object(z.Translate)("media_settings_background_blur")))),l.a.createElement(q.a,{className:[gl.a.virtualBackDropOptions,this.state.blurMode===k.a.STATIC&&gl.a.selected].filter(Boolean).join(" "),"aria-label":Object(z.Translate)("media_settings_background_images"),autoFocus:!0,onClick:()=>this.onBlurStatusChange(k.a.STATIC)},l.a.createElement("div",null,l.a.createElement("span",{className:gl.a.vbIcon},l.a.createElement(Us,null)),l.a.createElement("span",{className:gl.a.vbText},Object(z.Translate)("media_settings_background_images")))),this.state.isBackgroundsClicked&&this.renderBackdrops()),this.state.blurMode===k.a.BLUR&&l.a.createElement("div",null,l.a.createElement("div",{className:gl.a.blurIntensityControls},l.a.createElement("span",{className:gl.a.blurPercentage},Object(z.Translate)("media_settings_background_blur").concat(" "),this.state.blurIntensity.toString().concat("%")),l.a.createElement("button",{className:gl.a.resetButton,onClick:()=>this.onBlurIntensityReset(),disabled:50===this.state.blurIntensity},Object(z.Translate)("media_settings_background_blur_intensity_reset"))),l.a.createElement("input",{type:"range",name:"intensityRange",className:gl.a.intensityHandler,min:0,max:100,value:this.state.blurIntensity,step:25,onChange:this.onBlurIntensityChange})))}renderBackdrops(){return l.a.createElement("div",{className:gl.a.backdropsPanel},0===this.state.adminCustomVbCount&&[...Array(this.props.backdrops)].map((e,t)=>l.a.createElement(q.a,{className:[gl.a.staticBackdrops,this.state.blurMode===k.a.STATIC&&1===this.state.selectedStaticImageId&&gl.a.selected].filter(Boolean).join(" "),onClick:()=>this.onStaticBackgroundImageApply(t+1)},l.a.createElement("img",{src:"/bgimages/thumbnail".concat((t+1).toString().concat(".jpg"))}))),0!==this.state.adminCustomVbCount&&[...Array(this.state.adminCustomVbCount.vb_count)].map((e,t)=>l.a.createElement(q.a,{className:[gl.a.staticBackdrops,this.state.blurMode===k.a.STATIC&&1===this.state.selectedStaticImageId&&gl.a.selected].filter(Boolean).join(" "),onClick:()=>this.onStaticBackgroundImageApply(t+1)},l.a.createElement("img",{src:"/branding/vb_images_".concat((t+1).toString().concat(".jpeg"))}))),this.state.customVb.map((e,t)=>l.a.createElement("div",{className:gl.a.staticBackdrops},l.a.createElement(q.a,{className:[gl.a.staticBackdrops,this.state.blurMode===k.a.STATIC&&1===this.state.selectedStaticImageId&&gl.a.selected].filter(Boolean).join(" "),onClick:()=>this.onStaticBackgroundImageApply(this.props.backdrops+t+1)},l.a.createElement("img",{src:e})),l.a.createElement("button",{className:gl.a.customStaticBackdropsClose,onClick:()=>this.handleCloseCustomStaticBackground(t)},l.a.createElement(Hs,null)))),l.a.createElement("input",{style:{display:"none"},ref:this.state.inputReference,type:"file",onChange:this.handleOnFileChange,multiple:!0}),l.a.createElement("div",{className:gl.a.plusIconTooltip},l.a.createElement(q.a,{className:[gl.a.staticBackdrops].filter(Boolean).join(" "),"aria-label":Object(z.Translate)("media_settings_background_images"),autoFocus:!0,disabled:!0,onClick:()=>null},l.a.createElement(X.x,{className:gl.a.plusIcon})),l.a.createElement("span",{className:gl.a.plusIconTooltiptext},Object(z.Translate)("media_settings_images_plusicon_tooltip_text"))))}handleCloseCustomStaticBackground(e){this.state.customVb.splice(e,1),this.setState({customVb:this.state.customVb})}handleOnFileChange(e){if(!(e.target.files&&e.target.files[0]))return;const t=[];for(const i of e.target.files)t.push(URL.createObjectURL(i));this.setState({customVb:this.state.customVb.concat(t)}),e.target.value=null}onBlurIntensityChange(e){this.setState({blurIntensity:e.target.value,selectedStaticImageId:0}),h.f.setBlurMode(1,e.target.value)}onBlurIntensityReset(){this.setState({blurIntensity:50,selectedStaticImageId:0}),h.f.setBlurMode(1,50)}renderMirrorCheckbox(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(fl.a,{checked:this.props.isSelfViewMirrored,className:gl.a.deviceSettingsCheckbox,"data-test":"mirror_self_view_checkbox",id:"mirror_self_view_checkbox",onChange:e=>this.props.onSelfViewMirrorChange(e.target.checked)}),l.a.createElement("label",{className:[gl.a.mirrorLabel,Object(Ye.a)()&&gl.a.labelRightAligned].filter(Boolean).join(" "),htmlFor:"mirror_self_view_checkbox"},Object(z.Translate)("media_settings_mirror_self_view")))}renderHDCheckbox(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(fl.a,{checked:this.state.isHDEnabled,className:gl.a.deviceSettingsCheckbox,"data-test":"hd_checkbox",id:"hd_checkbox",onChange:this.onHDChange}),l.a.createElement("label",{className:[gl.a.hdLabel,Object(Ye.a)()&&gl.a.labelRightAligned].filter(Boolean).join(" "),htmlFor:"hd_checkbox"},Object(z.Translate)("call_hd_enable")))}optimiseForTextCheckbox(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(fl.a,{checked:this.state.isOptimiseForTextChecked,className:gl.a.deviceSettingsCheckbox,"data-test":"optimise_checkbox",id:"optimise_checkbox",onChange:e=>{var t;return this.onOptimiseForTextChange((null==e||null===(t=e.target)||void 0===t?void 0:t.checked)||!1)}}),l.a.createElement("label",{className:[gl.a.optimiseForTextLabel,Object(Ye.a)()&&gl.a.labelRightAligned].filter(Boolean).join(" "),htmlFor:"optimise_checkbox"},Object(z.Translate)("media_settings_optimise_for_text")))}onHDChange(){h.f.setHDEnabled(!h.f.isHDEnabled()),this.setState({isHDEnabled:h.f.isHDEnabled()})}onOptimiseForTextChange(e){if(p.a.setStorageVariable(_.a.OPTIMISE_FOR_TEXT,e),this.setState({isOptimiseForTextChecked:e}),h.f.setPresentationResolutionRestrict(e?"max1080p":this.props.contentResolution),e&&this.props.isSharing)return this.props.onSelectOptimiseForText()}onKeyPressed(e){"Escape"===e.key&&this.props.onClose&&this.props.onClose()}onCameraSelectClick(e){const t=this.props.availableCameras.find(t=>t.id===e.target.value);t&&t!==this.props.selectedCamera&&this.props.onSelectCamera(t)}onMicrophoneSelectClick(e){const t=this.props.availableMicrophones.find(t=>t.id===e.target.value);t&&t!==this.props.selectedMicrophone&&this.props.onSelectMicrophone(t)}onSpeakerSelectClick(e){const t=this.props.availableSpeakers.find(t=>t.id===e.target.value);t&&t!==this.props.selectedSpeaker&&this.props.onSelectSpeaker(t)}onBlurStatusChange(e){e===k.a.STATIC?this.setState({isBackgroundsClicked:!this.state.isBackgroundsClicked,blurMode:k.a.STATIC}):(e===k.a.BLUR&&this.state.blurMode!==k.a.BLUR||e===k.a.NONE&&this.state.blurMode!==k.a.NONE)&&(h.f.setBlurMode(e,this.state.blurIntensity),this.setState({blurMode:h.f.blurMode(),blurIntensity:h.f.blurIntensity(),selectedStaticImageId:0,isBackgroundsClicked:!1}))}onStaticBackgroundImageApply(e){const t=document.createElement("img");if(0===this.state.adminCustomVbCount&&e>this.props.backdrops)t.src=this.state.customVb[e-this.props.backdrops-1],t.onload=()=>{h.f.setBlurMode(2,this.state.blurIntensity,null,this.state.customVb[e-this.props.backdrops-1],!1)},this.setState({blurMode:k.a.STATIC,selectedStaticImageId:e});else{if(this.state.adminCustomVbCount){const i="vb_images_".concat(e.toString().concat(".jpeg"));t.src="/branding/".concat(i),t.onload=()=>{h.f.setBlurMode(2,this.state.blurIntensity,i,null,!0)}}else{const i="background".concat(e.toString().concat(".jpg"));t.src="/bgimages/".concat(i),t.onload=()=>{h.f.setBlurMode(2,this.state.blurIntensity,i,null,!1)}}this.setState({blurMode:k.a.STATIC,selectedStaticImageId:e})}}supportedBlurBrowser(){switch(Object(gt.a)().name){case"chrome":case"edge-chromium":case"firefox":case"safari":return!0;default:return!1}}}El(Tl,"defaultProps",{availableCameras:[],availableMicrophones:[],availableSpeakers:[],className:"",micAudioLevel:0,selectedCamera:void 0,selectedMicrophone:void 0,selectedSpeaker:void 0,backdrops:8});var Ol=Object(c.b)(e=>({availableCameras:b.k(e),availableMicrophones:b.m(e),availableSpeakers:b.n(e),hasLocalStreamAudio:b.Oc(e),isSelfViewMirrored:b.Rd(e),localCamPermissionStatus:b.eb(e),micAudioLevel:b.Cb(e),selectedCamera:b.fc(e),selectedMicrophone:b.kc(e),selectedSpeaker:b.lc(e),isInCall:b.sd(e),backgroundBlurAllowed:b.Yc(e),blurStatus:b.Lb(e),contentResolution:Object(bl.f)(e),isSharing:b.Ud(e)}),e=>({onSelectCamera:t=>e((e=>()=>{h.b.selectCamera(e)})(t)),onSelectMicrophone:t=>e((e=>()=>{h.b.selectMicrophone(e)})(t)),onSelectSpeaker:t=>e((e=>()=>{h.b.selectSpeaker(e)})(t)),onSelfViewMirrorChange:t=>e(E(t)),onSelectOptimiseForText:()=>e(Object(u.isOptimisedForTextChecked)())}))(Tl),Nl=i(759),yl=i.n(Nl);function jl(e){let{className:t,isActive:i,onVisibilityChange:a}=e;const n=Object(c.c)(),s=Object(c.d)(e=>Object(b.Bc)(e)),o=Object(c.d)(e=>Object(b.cb)(e)),d=Object(c.d)(e=>Object(b.Hb)(e)),h=Object(J.c)(),[u,m]=Object(r.useState)(p.a.getStorageVariable(_.a.PINNED_SPEAKING_INDICATOR)||!1);Object(r.useEffect)(()=>{const e=setTimeout(()=>{!s.length&&o&&d&&n(Object(ve.w)())},Ce.k);return()=>{clearTimeout(e)}},[s,o,d]),Object(r.useEffect)(()=>{a(i||u)},[i,u]),Object(r.useEffect)(()=>()=>a(!1),[]);let g;s.length?g=s[s.length-1]:o&&d&&Date.now()-d<Ce.k&&(g=o);let S=Object(z.Translate)("call_nobody_speaking");var v;g&&(S=g.guid===h?Object(z.Translate)("participant_subname_self"):null===(v=g)||void 0===v?void 0:v.displayName);return l.a.createElement("div",{className:[t,yl.a.speakingIndicator,!u&&!i&&yl.a.hidden].filter(Boolean).join(" ")},l.a.createElement("label",{className:[yl.a.label,Object(Ye.a)()&&yl.a.nameRightOriented].filter(Boolean).join(" ")},Object(z.Translate)("call_speaking_indicator")),l.a.createElement("span",{className:[yl.a.name,Object(Ye.a)()&&yl.a.nameRightOriented].filter(Boolean).join(" ")},S),l.a.createElement(Q.c,{title:u?Object(z.Translate)("call_unpin_speaking_indicator"):Object(z.Translate)("call_pin_speaking_indicator"),"aria-label":u?Object(z.Translate)("call_unpin_speaking_indicator_assistive"):Object(z.Translate)("call_pin_speaking_indicator_assistive"),className:yl.a.pinButton,onClick:()=>{const e=!u;m(e),p.a.setStorageVariable(_.a.PINNED_SPEAKING_INDICATOR,e)},toggled:u},l.a.createElement(Fs,null)))}var Ml=i(332);function kl(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function wl(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?kl(Object(i),!0).forEach((function(t){Al(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):kl(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Al(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var Dl=Object(c.b)(e=>({availableCameras:b.k(e),hasLocalStreamVideo:b.Pc(e),isInStudioModeVideo:b.ud(e),isSelfViewMirrored:b.Rd(e),localStreamAspectRatio:b.hb(e),localStreamId:b.ib(e),selectedCamera:b.fc(e),overlayTextStatus:b.Lb(e)}),e=>({onSelfViewMirrorChange:t=>e(E(t)),onSwitchToNextCamera:()=>e(C())}))(class extends Jr{constructor(e){super(e,_.a.SELF_VIEW_SNAP_POSITION),Al(this,"streamViewRef",l.a.createRef()),Al(this,"lastTouchStart",void 0),Al(this,"placeholderRef",l.a.createRef()),Al(this,"placeholderResizeObserver",void 0),this.lastTouchStart=void 0;const t=Object(gt.b)()&&window.innerWidth<window.innerHeight,i=p.a.getStorageVariable(_.a.PINNED_SELF_VIEW)||!1;this.state=wl(wl({},this.state),{},{aspectRatioClassName:t?ul.a.aspect_9_16:ul.a.aspect_16_9,isHDEnabled:h.f.isHDEnabled(),isPinned:i,isShowingDeviceSettings:!1,isShowingMoreOptions:!1,shouldReportNoGoZones:i,showDeviceSettingsSlideAnimation:!1}),this.placeholderResizeObserver=new ResizeObserver(e=>{this.props.onSizeChange&&this.props.onSizeChange({height:e[0].contentRect.height,width:e[0].contentRect.width})}),this.renderSelfViewVideo=this.renderSelfViewVideo.bind(this),this.renderSelfViewOverlay=this.renderSelfViewOverlay.bind(this),this.renderSelfViewControls=this.renderSelfViewControls.bind(this),this.onMoreOptionsClick=this.onMoreOptionsClick.bind(this),this.onHDToggle=this.onHDToggle.bind(this),this.onSwapCameraClick=this.onSwapCameraClick.bind(this),this.onPinSelfViewToggle=this.onPinSelfViewToggle.bind(this),this.onDeviceSettingsClick=this.onDeviceSettingsClick.bind(this),this.handleDocumentMouseDownTouchStart=this.handleDocumentMouseDownTouchStart.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.updateAspectRatioClassName=this.updateAspectRatioClassName.bind(this),this.onSelfViewMirrorToggle=this.onSelfViewMirrorToggle.bind(this)}componentDidUpdate(e,t){if(this.updateAspectRatioClassName(),t.showDeviceSettingsSlideAnimation===this.state.showDeviceSettingsSlideAnimation&&(t.isShowingDeviceSettings!==this.state.isShowingDeviceSettings?this.setState({showDeviceSettingsSlideAnimation:!0}):this.setState({showDeviceSettingsSlideAnimation:!1})),super.componentDidUpdate(e,t),this.props.onVisibilityChange){const i=!(e.isActive||t.isPinned||t.isShowingMoreOptions||t.isShowingDeviceSettings),a=!(this.props.isActive||this.state.isPinned||this.state.isShowingMoreOptions||this.state.isShowingDeviceSettings);a&&!i?this.props.onVisibilityChange(!1):!a&&i&&this.props.onVisibilityChange(!0)}}componentDidMount(){this.updateAspectRatioClassName(),document.addEventListener("mousedown",this.handleDocumentMouseDownTouchStart),document.addEventListener("touchstart",this.onTouchStart),super.componentDidMount(),this.placeholderRef.current&&this.placeholderResizeObserver.observe(this.placeholderRef.current),this.props.onVisibilityChange&&this.props.onVisibilityChange(!0)}componentWillUnmount(){document.removeEventListener("mousedown",this.handleDocumentMouseDownTouchStart),document.removeEventListener("touchstart",this.onTouchStart),this.props.onVisibilityChange&&this.props.onVisibilityChange(!1),super.componentWillUnmount()}render(){const e=this.props.isActive||this.state.isShowingMoreOptions||this.state.isShowingDeviceSettings,t=!this.state.isPinned&&!e,i=this.state.snapPosition===Wr.b.BOTTOM_LEFT,a=this.state.snapPosition===Wr.b.BOTTOM_RIGHT,n=this.state.snapPosition===Wr.b.TOP_LEFT,s=this.state.snapPosition===Wr.b.TOP_RIGHT,o=i||n,r=a||s,c=[this.props.className&&this.props.className.allPositions,ul.a.selfView,i&&ul.a.selfViewBottomLeft,a&&ul.a.selfViewBottomRight,n&&ul.a.selfViewTopLeft,s&&ul.a.selfViewTopRight,o&&this.props.className&&this.props.className.leftPositions,r&&this.props.className&&this.props.className.rightPositions,this.state.dragStartOffset&&ul.a.isDragging,Object(gt.b)()?ul.a.mobile:ul.a.notMobile,this.state.aspectRatioClassName,this.state.isShowingMoreOptions?ul.a.showingMoreOptions:ul.a.notShowingMoreOptions,this.state.isShowingDeviceSettings?ul.a.showingDeviceSettings:ul.a.notShowingDeviceSettings,this.state.showDeviceSettingsSlideAnimation&&ul.a.showDeviceSettingsSlideAnimation,t&&sl.a.hidden,t&&ul.a.hidden,!t&&!e&&sl.a.visibleWithoutButtons,!t&&e&&sl.a.visibleWithButtons,["ios","safari"].includes(Object(gt.a)().name)&&ul.a.safariDisableMoveAnimation,this.props.isCallMenuOpen&&ul.a.callMenuOpen].filter(Boolean).join(" "),d=this.state.dragStartOffset&&this.state.dragPosition?{left:this.state.dragPosition.x+"px",top:this.state.dragPosition.y+"px"}:void 0,p=document.getElementById("self_view");return Object(Ye.a)()?null==p||p.setAttribute("dir","rtl"):null==p||p.removeAttribute("dir"),l.a.createElement("section",{className:c,style:d,onKeyDown:this.handleKeyDown,ref:this.previewRef,id:"self_view"},l.a.createElement(jl,{className:ul.a.speakingIndicator,isActive:this.props.isActive,onVisibilityChange:this.props.onSpeakingIndicatorVisibilityChange}),this.renderSelfViewVideo(),this.renderSelfViewControls(),this.state.isShowingDeviceSettings&&l.a.createElement(Ol,{className:ul.a.deviceSettings}))}getDefaultSnapPosition(){return Object(Ml.a)()?Wr.b.BOTTOM_LEFT:Wr.b.TOP_LEFT}renderSelfViewVideo(){const e=j("localStream");if(this.props.localCamPermissionStatus===kr.b.REQUESTING)return l.a.createElement("div",{className:ul.a.selfViewPlaceholder},l.a.createElement($e.a,null));if(!e||!this.props.hasLocalStreamVideo){const e=this.props.selectedCamera&&"none"===this.props.selectedCamera.id;return l.a.createElement("div",{className:[ul.a.selfViewPlaceholder,!e&&ul.a.error].filter(Boolean).join(" "),ref:this.placeholderRef},l.a.createElement($s,null),e?Object(z.Translate)("media_settings_no_camera"):Object(z.Translate)("call_camera_not_available"))}return l.a.createElement(l.a.Fragment,null,l.a.createElement(bt.a,{key:"local_stream",ref:this.streamViewRef,stream:e,muted:!0,className:[ul.a.selfViewVideo,this.props.isSelfViewMirrored?ul.a.mirrored:ul.a.notMirrored].join(" "),onSizeChange:this.updateAspectRatioClassName,"data-test":"local_stream"}),this.renderSelfViewOverlay())}renderSelfViewOverlay(){return"blur"===this.props.overlayTextStatus&&void 0!==this.props.overlayTextStatus?l.a.createElement("span",{className:ul.a.selfViewOverlay},Object(z.Translate)("media_settings_background_blur_apply_status_message")):"background"===this.props.overlayTextStatus&&void 0!==this.props.overlayTextStatus?l.a.createElement("span",{className:ul.a.selfViewOverlay},Object(z.Translate)("media_settings_backdrop_apply_status_message")):this.props.isCameraMuted?l.a.createElement("span",{className:ul.a.selfViewOverlay},Object(z.Translate)("self_view_camera_muted_overlay")):null}renderSelfViewControls(){this.props.hasLocalStreamVideo||(this.props.localCamPermissionStatus,kr.b.REQUESTING);const e=this.props.localCamPermissionStatus!==kr.b.REQUESTING&&this.props.availableCameras.filter(e=>!e.wasAddedByMediaLib).length>1;return l.a.createElement("div",{className:ul.a.selfViewControls},l.a.createElement(Q.a,{title:Object(z.Translate)("call_self_view_more_options"),className:ul.a.moreOptionsButton,onClick:this.buttonClickWrapper.bind(this,this.onMoreOptionsClick),onMouseDown:this.stopMouseDownTouchStartPropagation,onTouchStart:this.stopMouseDownTouchStartPropagation,toggled:this.state.isShowingMoreOptions},l.a.createElement(X.w,null)),l.a.createElement("div",{className:ul.a.moreOptionsMenu},this.props.selectedCamera&&"none"!==this.props.selectedCamera.id&&this.props.localCamPermissionStatus!==kr.b.DENIED&&l.a.createElement(Q.a,{title:this.state.isHDEnabled?Object(z.Translate)("call_hd_disable"):Object(z.Translate)("call_hd_enable"),className:[ul.a.moreOptionsMenuButton,ul.a.hdButton].join(" "),onClick:this.buttonClickWrapper.bind(this,this.onHDToggle),onMouseDown:this.stopMouseDownTouchStartPropagation,onTouchStart:this.stopMouseDownTouchStartPropagation,toggled:this.state.isHDEnabled},l.a.createElement(mr,null),l.a.createElement("span",{className:ul.a.moreOptionsMenuButtonText},this.state.isHDEnabled?Object(z.Translate)("call_hd_disable"):Object(z.Translate)("call_hd_enable"))),e&&l.a.createElement(Q.a,{title:Object(z.Translate)("call_swap_camera"),className:[ul.a.moreOptionsMenuButton,ul.a.swapCameraButton].join(" "),onClick:this.buttonClickWrapper.bind(this,this.onSwapCameraClick),onMouseDown:this.stopMouseDownTouchStartPropagation,onTouchStart:this.stopMouseDownTouchStartPropagation},l.a.createElement(Ps,null),l.a.createElement("span",{className:ul.a.moreOptionsMenuButtonText},Object(z.Translate)("call_swap_camera"))),this.props.selectedCamera&&"none"!==this.props.selectedCamera.id&&this.props.localCamPermissionStatus!==kr.b.DENIED&&l.a.createElement(Q.a,{title:Object(z.Translate)("media_settings_mirror_self_view"),className:[ul.a.moreOptionsMenuButton,ul.a.mirrorSelfViewToggleButton].join(" "),onClick:this.buttonClickWrapper.bind(this,this.onSelfViewMirrorToggle),onMouseDown:this.stopMouseDownTouchStartPropagation,onTouchStart:this.stopMouseDownTouchStartPropagation,toggled:this.props.isSelfViewMirrored},l.a.createElement(Vs,null),l.a.createElement("span",{className:ul.a.moreOptionsMenuButtonText},Object(z.Translate)("media_settings_mirror_self_view"))),l.a.createElement(Q.a,{title:this.state.isPinned?Object(z.Translate)("call_unpin_self_view"):Object(z.Translate)("call_pin_self_view"),"aria-label":this.state.isPinned?Object(z.Translate)("call_unpin_self_view_assistive"):Object(z.Translate)("call_pin_self_view_assistive"),className:[ul.a.moreOptionsMenuButton,ul.a.pinSelfViewToggleButton].join(" "),onClick:this.buttonClickWrapper.bind(this,this.onPinSelfViewToggle),onMouseDown:this.stopMouseDownTouchStartPropagation,onTouchStart:this.stopMouseDownTouchStartPropagation,toggled:this.state.isPinned},l.a.createElement(Fs,null),l.a.createElement("span",{className:ul.a.moreOptionsMenuButtonText},this.state.isPinned?Object(z.Translate)("call_unpin_self_view_button_text"):Object(z.Translate)("call_pin_self_view_button_text")))),l.a.createElement(Q.a,{title:Object(z.Translate)("call_device_settings"),className:ul.a.deviceSettingsButton,onClick:this.buttonClickWrapper.bind(this,this.onDeviceSettingsClick),onMouseDown:this.stopMouseDownTouchStartPropagation,onTouchStart:this.stopMouseDownTouchStartPropagation,toggled:this.state.isShowingDeviceSettings},l.a.createElement(X.z,null)))}onMoreOptionsClick(){this.setState({isShowingMoreOptions:!this.state.isShowingMoreOptions})}onHDToggle(){h.f.setHDEnabled(!h.f.isHDEnabled()),this.setState({isHDEnabled:h.f.isHDEnabled(),isShowingMoreOptions:!1})}onSwapCameraClick(){this.props.onSwitchToNextCamera(),this.setState({isShowingMoreOptions:!1})}onPinSelfViewToggle(){const e=!this.state.isPinned;p.a.setStorageVariable(_.a.PINNED_SELF_VIEW,e),this.setState({isPinned:e,isShowingMoreOptions:!1,shouldReportNoGoZones:e})}onSelfViewMirrorToggle(){this.props.onSelfViewMirrorChange(!this.props.isSelfViewMirrored),this.setState({isShowingMoreOptions:!1})}onDeviceSettingsClick(){const e=!this.state.isShowingDeviceSettings;this.setState({isDraggable:!e,isShowingDeviceSettings:e})}stopMouseDownTouchStartPropagation(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()}handleDocumentMouseDownTouchStart(){if(this.state.isShowingMoreOptions)return this.setState({isShowingMoreOptions:!1})}onTouchStart(e){return this.props.isActive?this.lastTouchStart=void 0:this.lastTouchStart=e.timeStamp,this.handleDocumentMouseDownTouchStart()}shouldIgnoreClick(e){return!!(this.lastTouchStart&&e&&e.timeStamp-this.lastTouchStart<Ce.o)}buttonClickWrapper(e,t){if(!this.shouldIgnoreClick(t))return e(t)}handleKeyDown(e){"Escape"===e.key&&this.setState({isDraggable:!0,isShowingDeviceSettings:!1,isShowingMoreOptions:!1})}updateAspectRatioClassName(e){let t;const i=this.streamViewRef&&this.streamViewRef.current;if(i){const e=i.getVideoDimensions();e&&(t=e.width/e.height)}if(!t)return;const a=[{ratio:1,className:ul.a.aspect_1},{ratio:16/9,className:ul.a.aspect_16_9},{ratio:4/3,className:ul.a.aspect_4_3},{ratio:3/4,className:ul.a.aspect_3_4},{ratio:9/16,className:ul.a.aspect_9_16}],n=a.reduce((e,i)=>Math.abs(i.ratio-t)<Math.abs(e.ratio-t)?i:e,a[0]);n.className!==this.state.aspectRatioClassName&&this.setState({aspectRatioClassName:n.className}),this.props.onSizeChange&&e&&this.props.onSizeChange(e)}});function Pl(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function Il(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Pl(Object(i),!0).forEach((function(t){Bl(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Pl(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Rl(){return(Rl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e}).apply(this,arguments)}function Bl(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Ll extends l.a.Component{constructor(e){super(e),Bl(this,"onSelfViewMove",void 0),Bl(this,"onPresentationPreviewMove",void 0),Bl(this,"onFarEndCameraControlsMove",void 0),Bl(this,"PRESENTATION_POP_OUT_BUTTON_HEIGHT",32),Bl(this,"SPEAKING_INDICATOR_HEIGHT",48),this.state={isSpeakingIndicatorVisible:!0,presentationPreviewInfo:{height:0,isVisible:!1},selfViewInfo:{height:0,isVisible:!0},cameraControlsInfo:{height:0,isVisible:!1}};this.onSelfViewMove=o.a.debounce(this.onPreviewMove.bind(this,Wr.a.SELF_VIEW),500),this.onPresentationPreviewMove=o.a.debounce(this.onPreviewMove.bind(this,Wr.a.PRESENTATION_PREVIEW),500),this.onFarEndCameraControlsMove=o.a.debounce(this.onPreviewMove.bind(this,Wr.a.FAR_END_CAMERA_CONTROLS),500),this.onSelfViewPositionChange=this.onSelfViewPositionChange.bind(this),this.onSelfViewSizeChange=this.onSelfViewSizeChange.bind(this),this.onSelfViewVisibilityChange=this.onSelfViewVisibilityChange.bind(this),this.onPresentationPreviewPositionChange=this.onPresentationPreviewPositionChange.bind(this),this.onPresentationPreviewSizeChange=this.onPresentationPreviewSizeChange.bind(this),this.onPresentationPreviewVisibilityChange=this.onPresentationPreviewVisibilityChange.bind(this),this.onFarEndCameraControlsPositionChange=this.onFarEndCameraControlsPositionChange.bind(this),this.onFarEndCameraControlsSizeChange=this.onFarEndCameraControlsSizeChange.bind(this),this.onSpeakingIndicatorVisibilityChange=this.onSpeakingIndicatorVisibilityChange.bind(this)}render(){return l.a.createElement(l.a.Fragment,null,this.props.farEndCameraControlsEnabled&&l.a.createElement(Qr,{onMove:this.onFarEndCameraControlsMove,onSnapPositionChange:this.onFarEndCameraControlsPositionChange,onSizeChange:this.onFarEndCameraControlsSizeChange,isCallMenuOpen:this.props.isCallMenuOpen,remoteViewDOMRect:this.props.remoteViewDOMRect}),this.props.selectedJoinMode!==wr.a.PRESENTATION_ONLY&&l.a.createElement(Dl,{onMove:this.onSelfViewMove,onVisibilityChange:this.onSelfViewVisibilityChange,onSnapPositionChange:this.onSelfViewPositionChange,onSizeChange:this.onSelfViewSizeChange,isActive:this.props.isActive,isCameraMuted:this.props.isCameraMuted,localCamPermissionStatus:this.props.localCamPermissionStatus,participationPermissions:this.props.participationPermissions,remoteViewDOMRect:this.props.remoteViewDOMRect,isCallMenuOpen:this.props.isCallMenuOpen,onSpeakingIndicatorVisibilityChange:this.onSpeakingIndicatorVisibilityChange}),j("localContentStream")&&l.a.createElement(pl,{onMove:this.onPresentationPreviewMove,onVisibilityChange:this.onPresentationPreviewVisibilityChange,onSnapPositionChange:this.onPresentationPreviewPositionChange,onSizeChange:this.onPresentationPreviewSizeChange,isActive:this.props.isActive,isCallMenuOpen:this.props.isCallMenuOpen,remoteViewDOMRect:this.props.remoteViewDOMRect}),l.a.createElement(xr,null),this.props.logoFileSrc&&l.a.createElement(el,{logoFileSrc:this.props.logoFileSrc,logoFilePosition:this.props.logoFilePosition}),l.a.createElement(Pr,{isActive:!this.props.shouldShowAutoplayDialog&&this.props.isActive,isJoining:this.props.isJoining,isMicrophoneBlocked:this.props.isMicrophoneBlocked,isMicrophoneMuted:this.props.isMicrophoneMuted,localMicPermissionStatus:this.props.localMicPermissionStatus,onLeaveClick:this.props.onLeaveClick,onEndCallClick:this.props.onEndCallClick,participationPermissions:this.props.participationPermissions,onMicrophoneMuteToggle:this.props.onMicrophoneMuteToggle,onCameraMuteToggle:this.props.onCameraMuteToggle,isCameraBlocked:this.props.isCameraBlocked,isCameraMuted:this.props.isCameraMuted,localCamPermissionStatus:this.props.localCamPermissionStatus}),this.props.messageInfo&&this.props.messageInfo.messageText&&l.a.createElement(al,Rl({},this.props.messageInfo,{offset:this.getMessageOffset()})),this.props.closedCaptions&&this.props.shouldShowCaptions&&l.a.createElement(Ur,{captions:this.props.closedCaptions}))}onPreviewMove(e,t){this.props.onHandlePreviewMove(e,t)}onSelfViewSizeChange(e){this.setState(t=>Il(Il({},t),{},{selfViewInfo:Il(Il({},t.selfViewInfo),{},{height:e.height})}))}onPresentationPreviewSizeChange(e){this.setState(t=>Il(Il({},t),{},{presentationPreviewInfo:Il(Il({},t.presentationPreviewInfo),{},{height:e.height})}))}onFarEndCameraControlsSizeChange(e){this.setState(t=>Il(Il({},t),{},{cameraControlsInfo:Il(Il({},t.cameraControlsInfo),{},{height:e.height})}))}onSelfViewPositionChange(e){this.setState(t=>Il(Il({},t),{},{selfViewInfo:Il(Il({},t.selfViewInfo),{},{snapPosition:e})}))}onPresentationPreviewPositionChange(e){this.setState(t=>Il(Il({},t),{},{presentationPreviewInfo:Il(Il({},t.presentationPreviewInfo),{},{snapPosition:e})}))}onFarEndCameraControlsPositionChange(e){this.setState(t=>Il(Il({},t),{},{cameraControlsInfo:Il(Il({},t.cameraControlsInfo),{},{snapPosition:e})}))}onSpeakingIndicatorVisibilityChange(e){this.setState({isSpeakingIndicatorVisible:e})}onSelfViewVisibilityChange(e){this.setState(t=>Il(Il({},t),{},{selfViewInfo:Il(Il({},t.selfViewInfo),{},{isVisible:e})}))}onPresentationPreviewVisibilityChange(e){this.setState(t=>Il(Il({},t),{},{presentationPreviewInfo:Il(Il({},t.presentationPreviewInfo),{},{isVisible:e})}))}getMessageOffset(){const e=this.state.selfViewInfo.snapPosition===Wr.b.BOTTOM_LEFT||this.state.selfViewInfo.snapPosition===Wr.b.BOTTOM_RIGHT,t=this.state.presentationPreviewInfo.snapPosition===Wr.b.BOTTOM_LEFT||this.state.presentationPreviewInfo.snapPosition===Wr.b.BOTTOM_RIGHT;let i=0;return this.props.messageInfo&&("bottom"===this.props.messageInfo.messagePosition?(e&&this.state.selfViewInfo.isVisible&&(i=this.state.selfViewInfo.height,this.state.isSpeakingIndicatorVisible&&(i+=this.SPEAKING_INDICATOR_HEIGHT)),t&&i<this.state.presentationPreviewInfo.height&&this.state.presentationPreviewInfo.isVisible&&(i=this.state.presentationPreviewInfo.height)):"top"===this.props.messageInfo.messagePosition&&(!this.props.isRemoteContentWindowToggled&&j("remoteContentStream")&&this.props.isActive&&!Object(gt.b)()&&(i=this.PRESENTATION_POP_OUT_BUTTON_HEIGHT),e||(this.state.selfViewInfo.isVisible?i=this.state.selfViewInfo.height+this.SPEAKING_INDICATOR_HEIGHT:this.state.isSpeakingIndicatorVisible&&(i=this.SPEAKING_INDICATOR_HEIGHT)),!t&&i<this.state.presentationPreviewInfo.height&&this.state.presentationPreviewInfo.isVisible&&(i=this.state.presentationPreviewInfo.height))),i}}var xl=i(760);function Fl(e,t){if(null==e)return{};var i,a,n=function(e,t){if(null==e)return{};var i,a,n={},s=Object.keys(e);for(a=0;a<s.length;a++)i=s[a],t.indexOf(i)>=0||(n[i]=e[i]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)i=s[a],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function Vl(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function Ul(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Hl extends r.PureComponent{constructor(e){super(e),Ul(this,"onPositionChangedZoom",void 0),Ul(this,"onPositionChangedPan",void 0),Ul(this,"streamViewRef",l.a.createRef()),Ul(this,"resetButton",l.a.createRef()),Ul(this,"sectionRef",l.a.createRef()),this.state={scale:1},this.onRemoteContentStreamSizeChange=this.onRemoteContentStreamSizeChange.bind(this),this.onPositionChangedZoom=Object(s.debounce)(this.onPositionChanged.bind(this),20),this.onPositionChangedPan=Object(s.throttle)(this.onPositionChanged.bind(this),100),this.validateOrResetZoom=this.validateOrResetZoom.bind(this)}componentDidUpdate(e){e.remoteContentMaxWidth===this.props.remoteContentMaxWidth&&e.remoteContentMaxHeight===this.props.remoteContentMaxHeight||this.resetButton&&this.resetButton.current&&this.resetButton.current.click()}render(){var e;const t=null!==(e=this.props.elementRef)&&void 0!==e?e:this.sectionRef;let i=!this.state.roiDimensions||!this.state.roiDimensions.width||!this.state.roiDimensions.height||!this.props.remoteContentMaxWidth||!this.props.remoteContentMaxHeight||this.props.remoteContentMaxWidth<this.state.roiDimensions.width&&this.props.remoteContentMaxHeight<this.state.roiDimensions.height;const a=i?1:Math.max(this.props.remoteContentMaxWidth/this.state.roiDimensions.width,this.props.remoteContentMaxHeight/this.state.roiDimensions.height);a<=1&&(i=!0);let n=1,s=1,o=1;if(!i){const e=this.state.scale||1,i=window.innerWidth,a=t&&t.current&&t.current.offsetWidth||1;function r(t){return 1/(t*(e/(t<0?30:20)))/(1e-4*i)*(1e-4*i)*-t/(1e-4*i-1)}n=1/((e-e*Math.max(.2,Math.min(.99,2-i/a)))/20),n/=5,s=r(1),s/=4,o=r(-1),o/=4}const c=this.props.isRemoteContentWindowToggled?!this.props.isRemoteContentWindowActive:!this.props.isActive,d=!!this.props.remoteStream&&!y(this.props.remoteStream),p=this.props.style?function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Vl(Object(i),!0).forEach((function(t){Ul(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Vl(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},this.props.style):{};return d&&!this.props.isRemoteContentWindowToggled&&(p.maxHeight=this.props.remoteContentMaxHeight),!this.props.isRemoteContentWindowToggled&&d&&this.props.remoteContentMaxHeight&&(this.props.remoteContentMaxHeight<=window.innerHeight/2?p.minHeight=this.props.remoteContentMaxHeight:p.minHeight=window.innerHeight/2),l.a.createElement("section",{key:"remote_content_stream",className:[ht.a.remoteContentView,!i&&ht.a.zoomable].filter(Boolean).join(" "),style:p,ref:t},l.a.createElement(xl.b,{defaultScale:1,options:{disabled:i,maxScale:a},scalePadding:{disabled:!0},wheel:{step:n,limitsOnWheel:!1},pan:{velocity:!1,paddingSize:0},zoomIn:{step:s,animation:!1,animationTime:0},zoomOut:{step:o,animation:!1,animationTime:0},doubleClick:{disabled:!0},reset:{animation:!1,animationTime:0},onZoomChange:this.onPositionChangedZoom,onPanning:this.onPositionChangedPan},e=>{let{zoomIn:t,zoomOut:n,resetTransform:s,setScale:o}=e;Fl(e,["zoomIn","zoomOut","resetTransform","setScale"]);return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:ht.a.perimeterButtons},d&&!Object(gt.b)()&&!this.props.isRemoteContentWindowToggled&&l.a.createElement(Q.c,{title:Object(z.Translate)("call_pop_out_presentation_button"),className:[ht.a.perimeterButton,!this.props.isActive&&ht.a.hidden].filter(Boolean).join(" "),onClick:this.props.onRemoteContentWindowToggle,toggled:this.props.isRemoteContentWindowToggled},l.a.createElement(er,null)),this.props.isRemoteContentWindowToggled&&this.props.canRenderPopInButton&&l.a.createElement(Q.c,{title:Object(z.Translate)("call_pop_in_presentation_button"),className:[ht.a.perimeterButton,!this.props.isRemoteContentWindowActive&&ht.a.hidden].filter(Boolean).join(" "),onClick:this.props.onRemoteContentWindowToggle,toggled:this.props.isRemoteContentWindowToggled},l.a.createElement(tr,null)),!i&&l.a.createElement(Q.c,{title:Object(z.Translate)("call_zoom_out_presentation_button"),className:[ht.a.perimeterButton,c&&ht.a.hidden].filter(Boolean).join(" "),disabled:!this.state.scale||this.state.scale<=1,onClick:n},l.a.createElement(ar,null)),!i&&l.a.createElement(Q.c,{ref:this.resetButton,title:Object(z.Translate)("call_zoom_reset_presentation_button"),className:[ht.a.perimeterButton,c&&ht.a.hidden].filter(Boolean).join(" "),disabled:!this.state.scale||1===this.state.scale,onClick:s},l.a.createElement(nr,null)),!i&&l.a.createElement(Q.c,{title:Object(z.Translate)("call_zoom_in_presentation_button"),className:[ht.a.perimeterButton,c&&ht.a.hidden].filter(Boolean).join(" "),disabled:!this.state.scale||this.state.scale>=a,onClick:this.state.scale&&this.state.scale>=Math.floor(100*a)/100?o.bind(this,a,0,"easeOut"):t},l.a.createElement(ir,null))),l.a.createElement(xl.a,null,l.a.createElement(bt.a,{stream:this.props.remoteContentStream,muted:!0,"data-test":"remote_content_stream",isAutoplayExplicitlyAllowed:this.props.isAutoplayExplicitlyAllowed,isUserMediaAccessGranted:this.props.localCamPermissionStatus===kr.b.GRANTED||this.props.localMicPermissionStatus===kr.b.GRANTED,onSizeChange:this.onRemoteContentStreamSizeChange,onSucceeded:this.props.onRemoteContentStreamPlaySucceeded,onFailed:this.props.onRemoteContentStreamPlayFailed,ref:this.streamViewRef})))}))}onRemoteContentStreamSizeChange(e){if(!e)return;this.validateOrResetZoom(e),this.setState({roiDimensions:e});const t={width:Math.round(e.width*(this.state.scale||1)),height:Math.round(e.height*(this.state.scale||1))};void 0!==this.state.roiX&&void 0!==this.state.roiY&&this.state.scale&&this.state.scale>1&&(t.roiX=Math.round(this.state.roiX)||0,t.roiY=Math.round(this.state.roiY)||0,t.roiWidth=Math.round(e.width),t.roiHeight=Math.round(e.height)),this.props.onRemoteContentStreamSizeChange(t)}onPositionChanged(e){this.setState({roiX:-e.positionX,roiY:-e.positionY,scale:e.scale},this.onRemoteContentStreamSizeChange.bind(this,this.state.roiDimensions))}validateOrResetZoom(e){(!e.width||!e.height||!this.props.remoteContentMaxWidth||!this.props.remoteContentMaxHeight||!this.state.scale||this.props.remoteContentMaxWidth<e.width*this.state.scale-2&&this.props.remoteContentMaxHeight<e.height*this.state.scale-2)&&this.resetButton&&this.resetButton.current&&this.resetButton.current.click()}}var Gl=Hl;function Wl(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class zl extends r.PureComponent{constructor(e){super(e),Wl(this,"activityTimeoutId",void 0),Wl(this,"documentBodyAppendTimeoutId",void 0),Wl(this,"popUpWindow",void 0),Wl(this,"DOCUMENT_BODY_APPEND_INTERVAL","firefox"===Object(gt.a)().name?1250:0),this.state={},this.onResize=this.onResize.bind(this),this.onActivity=o.a.throttle(this.onActivity.bind(this),250),this.passMouseEventToParentWindow=this.passMouseEventToParentWindow.bind(this)}render(){return this.state.containerDiv?mt.a.createPortal(this.props.children,this.state.containerDiv):null}componentDidMount(){const e=window.open("","","width=600,height=400,left=200,top=200"),t=this.createContainerDiv();var i,a;this.props.className&&(t.className=this.props.className),e&&(window.onunload=()=>{e&&!e.closed&&e.close()},e.onunload=()=>{this.props.onClose&&this.props.onClose()},e.addEventListener("resize",this.onResize),this.props.passMouseEventsToParentWindow&&(e.addEventListener("mousedown",this.passMouseEventToParentWindow),e.addEventListener("mousemove",this.passMouseEventToParentWindow),e.addEventListener("mouseup",this.passMouseEventToParentWindow)),this.documentBodyAppendTimeoutId=setTimeout(()=>{e.document.body.appendChild(t),this.props.onDocBodyAppend&&this.props.onDocBodyAppend(),this.onResize()},this.DOCUMENT_BODY_APPEND_INTERVAL),i=window.document,a=e.document,Array.from(i.styleSheets).forEach(e=>{if(e.href){const t=i.createElement("link");t.rel="stylesheet",t.href=e.href,a.head.appendChild(t)}else if(e.cssRules){const t=i.createElement("style");Array.from(e.cssRules).forEach(e=>{t.appendChild(i.createTextNode(e.cssText))}),a.head.appendChild(t)}}),this.props.title&&(e.document.title=this.props.title),this.popUpWindow=e,this.setState({containerDiv:t}),this.onActivity(!0))}componentWillUnmount(){this.popUpWindow&&(this.popUpWindow.removeEventListener("resize",this.onResize),this.props.passMouseEventsToParentWindow&&(this.popUpWindow.removeEventListener("mousedown",this.passMouseEventToParentWindow),this.popUpWindow.removeEventListener("mousemove",this.passMouseEventToParentWindow),this.popUpWindow.removeEventListener("mouseup",this.passMouseEventToParentWindow)),this.popUpWindow.close()),this.activityTimeoutId&&clearTimeout(this.activityTimeoutId),this.documentBodyAppendTimeoutId&&clearTimeout(this.documentBodyAppendTimeoutId)}passMouseEventToParentWindow(e){if(e.target){const t=new MouseEvent(e.type,e);Object.defineProperty(t,"target",{writable:!1,value:e.target}),window.dispatchEvent(t)}}createContainerDiv(){const e=document.createElement("div");return e.onmousemove=()=>this.onActivity(!0),e.onclick=()=>this.onActivity(!0),e.onkeydown=()=>this.onActivity(!0),e.onkeyup=()=>this.onActivity(!0),e}onActivity(e){this.props.onActivity&&this.props.activityTimeout&&(this.activityTimeoutId&&clearTimeout(this.activityTimeoutId),e&&(this.activityTimeoutId=setTimeout(()=>this.onActivity(!1),this.props.activityTimeout)),this.props.onActivity(e))}onResize(){this.props.onResize&&this.state&&this.popUpWindow&&this.props.onResize({width:this.popUpWindow.innerWidth,height:this.popUpWindow.innerHeight})}}function Jl(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}Wl(zl,"defaultProps",{children:null,className:"",onClose:()=>{},onResize:e=>{},title:""});class Kl extends r.PureComponent{constructor(e){super(e),Jl(this,"onRemoteStreamSizeChange",void 0),Jl(this,"onRemoteContentStreamSizeChange",void 0),Jl(this,"remoteViewRef",l.a.createRef()),Jl(this,"zoomableRemoteContentStreamRef",l.a.createRef()),Jl(this,"splitViewRef",l.a.createRef()),Jl(this,"isUnmounted",!1),this.state={canRenderPopInButton:!1,isAutoplayExplicitlyAllowed:!1,isRemoteContentWindowActive:!1,isRemoteContentWindowToggled:!1,remoteContentStreamPlayState:k.k.NOT_SET,remoteStreamPlayState:k.k.NOT_SET,logoFileSrc:null};this.onRemoteStreamSizeChange=o.a.debounce(this.onStreamViewSizeChange.bind(this,B.StreamPurpose.MAIN),500),this.onRemoteContentStreamSizeChange=o.a.debounce(this.onStreamViewSizeChange.bind(this,B.StreamPurpose.EXTENDED),500),this.onPopUpWindowDocBodyAppend=this.onPopUpWindowDocBodyAppend.bind(this),this.onPlayClick=this.onPlayClick.bind(this),this.onPopUpWindowSizeChange=this.onPopUpWindowSizeChange.bind(this),this.onRemoteStreamPlaySucceeded=this.onRemoteStreamPlaySucceeded.bind(this),this.onRemoteContentStreamPlaySucceeded=this.onRemoteContentStreamPlaySucceeded.bind(this),this.onRemoteStreamPlayFailed=this.onRemoteStreamPlayFailed.bind(this),this.onRemoteContentStreamPlayFailed=this.onRemoteContentStreamPlayFailed.bind(this),this.onRemoteContentWindowToggle=this.onRemoteContentWindowToggle.bind(this),this.onPopUpWindowClose=this.onPopUpWindowClose.bind(this),this.setRemoteContentWindowActivity=this.setRemoteContentWindowActivity.bind(this),this.onRemoteStreamSizeChange=this.onStreamViewSizeChange.bind(this,B.StreamPurpose.MAIN),this.onRemoteContentStreamSizeChange=this.onStreamViewSizeChange.bind(this,B.StreamPurpose.EXTENDED)}componentDidMount(){this.isUnmounted=!1,Object(_t.b)(this),this.checkForInvalidFile()}componentDidUpdate(e){e.selectedLayout!==this.props.selectedLayout&&this.splitViewRef.current&&this.splitViewRef.current.resetResizing(),this.checkForInvalidFile()}componentWillUnmount(){this.isUnmounted=!0,Object(_t.a)(this)}render(){const e=d.getStorageVariable(_.a.CAPTION_LANGUAGE_SELECTED),t=this.state.remoteStreamPlayState===k.k.FAILED_NOT_ALLOWED||this.state.remoteContentStreamPlayState===k.k.FAILED_NOT_ALLOWED,i=e&&e!==Object(z.Translate)("no_captions_language_option");return l.a.createElement("div",{className:ht.a.callMedia},l.a.createElement("section",{className:ht.a.remoteMedia},this.renderRemoteViews(t),this.renderOverlay(t,i)),this.props.bannerText&&l.a.createElement(Tr,{className:ht.a.banner,text:this.props.bannerText}))}checkForInvalidFile(){this.props.logoFileName&&this.props.logoFile||this.setState({logoFileSrc:""}),this.props.logoFile&&this.props.logoFilePosition&&this.computeLogoFileSrc()}computeLogoFileSrc(){let e;const t=new FileReader;this.props.logoFile&&(e=new Blob([this.props.logoFile],{type:"image/png"}),t.onload=async()=>{this.setState({logoFileSrc:t.result})},t.readAsDataURL(e))}renderOverlay(e,t){return l.a.createElement(Ll,{isActive:this.props.isActive,isCallMenuOpen:this.props.isCallMenuOpen,logoFileSrc:this.state.logoFileSrc,logoFilePosition:this.props.logoFilePosition,isCameraBlocked:this.props.isCameraBlocked,isCameraMuted:this.props.isCameraMuted,isJoining:this.props.isJoining,isMicrophoneBlocked:this.props.isMicrophoneBlocked,isMicrophoneMuted:this.props.isMicrophoneMuted,isRemoteContentWindowToggled:this.state.isRemoteContentWindowToggled,localCamPermissionStatus:this.props.localCamPermissionStatus,localMicPermissionStatus:this.props.localMicPermissionStatus,messageInfo:this.props.messageInfo,closedCaptions:this.props.closedCaptions,shouldShowCaptions:t,participationPermissions:this.props.participationPermissions,remoteViewDOMRect:this.state.remoteViewDOMRect,selectedJoinMode:this.props.selectedJoinMode,shouldShowAutoplayDialog:e,onCameraMuteToggle:this.props.onCameraMuteToggle,onEndCallClick:this.props.onEndCallClick,onHandlePreviewMove:this.props.onHandlePreviewMove,onLeaveClick:this.props.onLeaveClick,onMicrophoneMuteToggle:this.props.onMicrophoneMuteToggle,farEndCameraControlsEnabled:this.props.farEndCameraControlsEnabled})}onPopUpWindowClose(){!this.isUnmounted&&this.state.isRemoteContentWindowToggled&&this.onRemoteContentWindowToggle()}onRemoteContentWindowToggle(){this.setState(e=>({isRemoteContentWindowToggled:!e.isRemoteContentWindowToggled,canRenderPopInButton:!1}))}getVideoPlaceholderData(e,t){if(this.props.isJoining)return{content:l.a.createElement(l.a.Fragment,null,l.a.createElement($e.a,null),Object(z.Translate)("call_joining")),testLabel:"call_joining_placeholder"};if(this.props.isAwaitingActivation)return{content:l.a.createElement(l.a.Fragment,null,l.a.createElement(Ao,null),Object(z.Translate)("call_awaiting_activation")),testLabel:"call_awaiting_activation_placeholder"};if(this.props.selectedLayout===w.a.AUDIO_ONLY)return{content:l.a.createElement(l.a.Fragment,null,l.a.createElement(Ks,null),Object(z.Translate)("audio_only_mode")),testLabel:"audio_only_placeholder"};if(1===this.props.participants.length)return{content:l.a.createElement(l.a.Fragment,null,l.a.createElement(no,null),Object(z.Translate)("only_participant")),testLabel:"only_participant_placeholder"};if(!(this.props.selectedJoinMode!==wr.a.LOCAL||e&&!y(e)||t&&!this.state.isRemoteContentWindowToggled))return{content:l.a.createElement(l.a.Fragment,null,l.a.createElement(Ks,null),Object(z.Translate)("no_remote_video")),testLabel:"no_remote_video_placeholder"};if(this.props.selectedJoinMode===wr.a.PRESENTATION_ONLY){if(this.props.isSharingScreen)return{content:l.a.createElement(l.a.Fragment,null,l.a.createElement(xs,null),Object(z.Translate)("self_presenting")),testLabel:"self_presenting_placeholder"};if(!t)return{content:l.a.createElement(l.a.Fragment,null,l.a.createElement(xs,null),Object(z.Translate)("no_one_presenting")),testLabel:"no_one_presenting_placeholder"}}return null}renderRemoteViews(e){const t=j("remoteStream"),i=j("remoteContentStream"),a=this.getVideoPlaceholderData(t,i),n=!this.state.isRemoteContentWindowToggled&&this.props.selectedLayout===w.a.PRESENTATION_AND_VIDEO,s=[n&&l.a.createElement(ft,{handleTitle:Object(z.Translate)("call_resize_videos"),key:"split_view",isActive:this.props.isActive,ref:this.splitViewRef,viewA:this.renderRemoteView(t),viewB:this.renderRemoteContentView(i,t)}),!n&&this.renderRemoteView(t),!n&&this.renderRemoteContentView(i,t)];return o.a.compact([...s,a&&l.a.createElement("section",{key:"remote_stream_placeholder_message",className:ht.a.remotePlaceholder,"data-test":a.testLabel,id:"remote_stream_placeholder_message",role:"alert"},a.content),!this.props.isJoining&&!this.props.isAwaitingActivation&&e&&l.a.createElement("section",{key:"remote_overlay",className:ht.a.remoteOverlay},l.a.createElement("span",{className:ht.a.autoplayDialogTitle},Object(z.Translate)("autoplay_dialog_title")),l.a.createElement("span",{className:ht.a.autoplayDialogDescription},Object(z.Translate)("autoplay_dialog_description")),l.a.createElement(q.a,{className:ht.a.autoplayDialogLeaveButton,onClick:this.props.onLeaveClick},Object(z.Translate)("autoplay_dialog_leave")),l.a.createElement(q.a,{className:ht.a.autoplayDialogEnableButton,onClick:this.onPlayClick},Object(z.Translate)("autoplay_dialog_enable")))])}renderRemoteView(e){return this.props.isJoining||this.props.isAwaitingActivation||!e?null:l.a.createElement(bt.a,{key:"remote_stream",stream:e,className:ht.a.remoteView,ref:this.remoteViewRef,selectedSpeaker:this.props.selectedSpeaker,isAudioStream:y(e),"data-test":"remote_stream",isAutoplayExplicitlyAllowed:this.state.isAutoplayExplicitlyAllowed,isUserMediaAccessGranted:this.props.localCamPermissionStatus===kr.b.GRANTED||this.props.localMicPermissionStatus===kr.b.GRANTED,onSizeChange:this.onRemoteStreamSizeChange,onSucceeded:this.onRemoteStreamPlaySucceeded,onFailed:this.onRemoteStreamPlayFailed})}renderRemoteContentView(e,t){return this.props.isJoining||this.props.isAwaitingActivation?null:this.state.isRemoteContentWindowToggled?l.a.createElement(zl,{key:"remoteContentViewWindow",activityTimeout:Ce.q,onClose:this.onPopUpWindowClose,onDocBodyAppend:this.onPopUpWindowDocBodyAppend,onResize:this.onPopUpWindowSizeChange,onActivity:this.setRemoteContentWindowActivity,title:Object(z.Translate)("call_pop_out_presentation_title",Object(z.Translate)("brand_browser_tab_label")),passMouseEventsToParentWindow:!0,className:ht.a.remoteContentWindow},e?l.a.createElement(Gl,{key:"remote_content_stream",remoteContentStream:e,remoteStream:t,isRemoteContentWindowToggled:this.state.isRemoteContentWindowToggled,isActive:this.props.isActive,onRemoteContentWindowToggle:this.onRemoteContentWindowToggle,isAutoplayExplicitlyAllowed:this.state.isAutoplayExplicitlyAllowed,localCamPermissionStatus:this.props.localCamPermissionStatus,localMicPermissionStatus:this.props.localMicPermissionStatus,onRemoteContentStreamSizeChange:this.onRemoteContentStreamSizeChange,onRemoteContentStreamPlaySucceeded:this.onRemoteContentStreamPlaySucceeded,onRemoteContentStreamPlayFailed:this.onRemoteContentStreamPlayFailed,remoteContentMaxWidth:this.props.remoteContentMaxWidth,remoteContentMaxHeight:this.props.remoteContentMaxHeight,canRenderPopInButton:this.state.canRenderPopInButton,isRemoteContentWindowActive:this.state.isRemoteContentWindowActive,ref:this.zoomableRemoteContentStreamRef}):l.a.createElement("section",{className:ht.a.remotePlaceholder,role:"alert"},l.a.createElement(xs,null),Object(z.Translate)("no_remote_content"))):e?l.a.createElement(Gl,{key:"zoomableRemoteContentStream",remoteContentStream:e,remoteStream:t,isRemoteContentWindowToggled:this.state.isRemoteContentWindowToggled,isActive:this.props.isActive,onRemoteContentWindowToggle:this.onRemoteContentWindowToggle,isAutoplayExplicitlyAllowed:this.state.isAutoplayExplicitlyAllowed,localCamPermissionStatus:this.props.localCamPermissionStatus,localMicPermissionStatus:this.props.localMicPermissionStatus,onRemoteContentStreamSizeChange:this.onRemoteContentStreamSizeChange,onRemoteContentStreamPlaySucceeded:this.onRemoteContentStreamPlaySucceeded,onRemoteContentStreamPlayFailed:this.onRemoteContentStreamPlayFailed,remoteContentMaxWidth:this.props.remoteContentMaxWidth,remoteContentMaxHeight:this.props.remoteContentMaxHeight,canRenderPopInButton:this.state.canRenderPopInButton,isRemoteContentWindowActive:this.state.isRemoteContentWindowActive,ref:this.zoomableRemoteContentStreamRef}):null}onPopUpWindowDocBodyAppend(){this.setState({canRenderPopInButton:!0})}setRemoteContentWindowActivity(e){this.setState({isRemoteContentWindowActive:e})}resizeObserverAvailable(){return"undefined"!=typeof ResizeObserver}onPopUpWindowSizeChange(e){var t;j("remoteContentStream")&&(!this.resizeObserverAvailable()||"firefox"===Object(gt.a)().name||(null===(t=Object(gt.a)().os)||void 0===t?void 0:t.startsWith("Windows")))&&this.zoomableRemoteContentStreamRef&&this.zoomableRemoteContentStreamRef.current&&this.zoomableRemoteContentStreamRef.current.onRemoteContentStreamSizeChange(e)}onStreamViewSizeChange(e,t){if(e===B.StreamPurpose.MAIN&&this.remoteViewRef&&this.remoteViewRef.current){const e=mt.a.findDOMNode(this.remoteViewRef.current);e&&e&&this.setState({remoteViewDOMRect:e.getBoundingClientRect()})}const i={no_go:[],purpose:e,width:t.width,height:t.height,roiX:t.roiX,roiY:t.roiY,roiWidth:t.roiWidth,roiHeight:t.roiHeight};this.props.onHandleSizeHint(i)}onRemoteStreamPlaySucceeded(){this.setState({remoteStreamPlayState:k.k.SUCCEEDED})}onRemoteContentStreamPlaySucceeded(){this.setState({remoteContentStreamPlayState:k.k.SUCCEEDED})}onRemoteStreamPlayFailed(e){this.isUnmounted||(e&&e.name&&"NotAllowedError"===e.name?this.setState({isAutoplayExplicitlyAllowed:!1,remoteStreamPlayState:k.k.FAILED_NOT_ALLOWED}):this.setState({remoteStreamPlayState:k.k.FAILED_OTHER}))}onRemoteContentStreamPlayFailed(e){this.isUnmounted||(e&&e.name&&"NotAllowedError"===e.name?this.setState({isAutoplayExplicitlyAllowed:!1,remoteContentStreamPlayState:k.k.FAILED_NOT_ALLOWED}):this.setState({remoteContentStreamPlayState:k.k.FAILED_OTHER}))}onPlayClick(){this.setState({isAutoplayExplicitlyAllowed:!0,remoteStreamPlayState:k.k.NOT_SET,remoteContentStreamPlayState:k.k.NOT_SET})}}var Yl=Object(c.b)(e=>({bannerText:b.o(e),isAwaitingActivation:b.Xc(e),isJoining:b.vd(e),isSharingScreen:b.Ud(e),localContentStreamId:b.fb(e),localCamPermissionStatus:b.eb(e),localMicPermissionStatus:b.gb(e),logoFile:b.jb(e),logoFileName:b.kb(e),logoFilePosition:b.lb(e),messageInfo:b.Bb(e),closedCaptions:b.A(e),participants:le(e),participationPermissions:b.Pb(e),remoteContentMaxWidth:b.Ub(e),remoteContentMaxHeight:b.Tb(e),remoteContentStreamId:b.Vb(e),remoteStreamId:b.Wb(e),selectedJoinMode:b.gc(e),selectedLayout:b.ic(e),farEndCameraControlsEnabled:b.ee(e),selectedSpeaker:b.lc(e)}),e=>({onEndCallClick:()=>e(Object(u.endCall)()),onHandleSizeHint:t=>e(Object(u.handleSizeHint)(t)),onHandlePreviewMove:(t,i)=>e(Object(u.handlePreviewMove)(t,i)),onLeaveClick:()=>e(Object(u.leaveCall)())}))(Kl),ql=i(761),Ql=i.n(ql),Zl=i(66),Xl=i.n(Zl),$l=i(420),ec=i.n($l);class tc extends r.PureComponent{constructor(e){var t,i,a;super(e),t=this,i="joinMeetingButtonRef",a=l.a.createRef(),i in t?Object.defineProperty(t,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[i]=a}componentDidMount(){Object(gt.b)()||setTimeout(()=>{this.joinMeetingButtonRef&&this.joinMeetingButtonRef.current&&this.joinMeetingButtonRef.current.focus()},Ce.a)}render(){return l.a.createElement(q.a,{"aria-label":Object(z.Translate)("join_meeting"),className:ec.a.joinButton,disabled:!this.props.isReadyToJoin,ref:this.joinMeetingButtonRef,onClick:this.props.onJoinCallClick},Object(z.Translate)("join_meeting"))}}class ic extends r.PureComponent{constructor(e){super(e)}render(){return l.a.createElement("section",{className:[this.props.className,ec.a.joinCallControls].filter(Boolean).join(" "),role:"region","aria-label":Object(z.Translate)("join_call_controls_assistive")},l.a.createElement(tc,{isReadyToJoin:this.props.isReadyToJoin,onJoinCallClick:this.props.onJoinCallClick}),this.props.canMuteCamera&&l.a.createElement(Q.c,{title:this.props.isCameraMuted?Object(z.Translate)("call_unmute_camera_button"):Object(z.Translate)("call_mute_camera_button"),"aria-label":this.props.isCameraMuted?Object(z.Translate)("call_unmute_camera_button_assistive"):Object(z.Translate)("call_mute_camera_button_assistive"),className:ec.a.cameraMuteToggleButton,disabled:!this.props.isReadyToJoin,onClick:this.props.onCameraMuteToggle,toggled:this.props.isCameraMuted},this.props.isCameraMuted?l.a.createElement(As,null):l.a.createElement(ws,null)),this.props.canMuteMicrophone&&l.a.createElement(Q.c,{title:this.props.isMicrophoneMuted?Object(z.Translate)("call_unmute_microphone_button"):Object(z.Translate)("call_mute_microphone_button"),"aria-label":this.props.isMicrophoneMuted?Object(z.Translate)("call_unmute_microphone_button_assistive"):Object(z.Translate)("call_mute_microphone_button_assistive"),className:ec.a.microphoneMuteToggleButton,disabled:!this.props.isReadyToJoin,onClick:this.props.onMicrophoneMuteToggle,toggled:this.props.isMicrophoneMuted},this.props.isMicrophoneMuted?l.a.createElement(Ms,null):l.a.createElement(js,null)))}}var ac=i(762),nc=i.n(ac),sc=i(173);var oc=e=>{let{className:t,ivrNumbers:i,meetingId:a,passcode:n,uri:s}=e;return l.a.createElement("section",{className:[nc.a.dialInMode,t].filter(Boolean).join(" ")},l.a.createElement(ho,{className:nc.a.dialInModeIcon}),l.a.createElement("span",{className:nc.a.dialInModeTitle},Object(z.Translate)("join_call_mode_dial_in_details")),l.a.createElement("span",{className:nc.a.dialInModeDescription},Object(z.Translate)("join_call_dial_in_description")),l.a.createElement(sc.a,{className:nc.a.joinInfoFields,ivrNumbers:i,meetingId:a,passcode:n,uri:s}),l.a.createElement("span",{className:nc.a.dialInModeSubDescription},Object(z.Translate)("join_call_dial_in_sub_description",Object(z.Translate)("join_call_mode_presentation_only"),Object(z.Translate)("join_call_mode_selection"))))},rc=i(763),lc=i.n(rc),cc=i(128);var dc=e=>{let{"aria-label":t,children:i,className:a="",onClose:n=(()=>{})}=e;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:lc.a.modalOverlay,onClick:n}),l.a.createElement(cc.a,{className:lc.a.modalWrapper,onKeyDown:function(e){"Escape"===e.key&&n()},role:"dialog",type:"section",shouldTrapFocus:()=>!Object(Ml.a)(),"aria-label":t},l.a.createElement("section",{className:[lc.a.modal,a].filter(Boolean).join(" ")},i)))},pc=i(764),hc=i.n(pc);const uc=e=>{let{className:t,isJoinCallDisabled:i,onJoinCallClick:a}=e;return l.a.createElement("section",{className:[hc.a.presentationMode,t].filter(Boolean).join(" ")},l.a.createElement(so,{className:hc.a.presentationIcon}),l.a.createElement("span",{className:hc.a.presentationModeTitle},Object(z.Translate)("join_call_mode_presentation_only")),l.a.createElement("span",{className:hc.a.presentationModeDescription},Object(z.Translate)("join_call_presentation_mode_description")),l.a.createElement(Ts,{className:hc.a.bullet}),l.a.createElement("span",{className:hc.a.bulletText},Object(z.Translate)("join_call_view_or_share_presentation")),l.a.createElement(Ts,{className:hc.a.bullet}),l.a.createElement("span",{className:hc.a.bulletText},Object(z.Translate)("join_call_manage_meeting")),l.a.createElement("span",{className:hc.a.presentationModeDescription},Object(z.Translate)("join_call_audio_and_video_turned_off")),l.a.createElement(q.a,{"aria-label":Object(z.Translate)("join_meeting"),className:hc.a.joinButton,disabled:i,onClick:a},Object(z.Translate)("join_meeting")))};var mc=i(765),gc=i.n(mc);function _c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const bc=l.a.forwardRef((e,t)=>{let{selected:i=!1,children:a,ariaLabel:n,onClick:s}=e;return l.a.createElement(q.a,{className:gc.a.modeOption,role:"listitem",ref:t,tabIndex:0,"aria-checked":i,"aria-label":n,onClick:s},a,i&&l.a.createElement(Ls,{className:gc.a.checkmark}))});class Sc extends r.PureComponent{constructor(e){super(e),_c(this,"firstOptionRef",l.a.createRef()),_c(this,"secondOptionRef",l.a.createRef()),_c(this,"thirdOptionRef",l.a.createRef()),_c(this,"modeSelectionRef",l.a.createRef()),_c(this,"modeSelectionMenuSize",this.props.isDialInAvailable?3:2),this.state={currentFocus:0},this.onSelectDialInMode=this.onSelectDialInMode.bind(this),this.onSelectLocalMode=this.onSelectLocalMode.bind(this),this.onSelectPresentationMode=this.onSelectPresentationMode.bind(this),this.onKeyPressed=this.onKeyPressed.bind(this),this.onFocusOut=this.onFocusOut.bind(this)}componentDidMount(){var e;this.state.currentFocus||(null===(e=this.firstOptionRef.current)||void 0===e||e.focus())}componentDidUpdate(){var e,t,i;this.state.currentFocus?1===this.state.currentFocus?null===(t=this.secondOptionRef.current)||void 0===t||t.focus():null===(i=this.thirdOptionRef.current)||void 0===i||i.focus():null===(e=this.firstOptionRef.current)||void 0===e||e.focus()}render(){const e=this.props.currentMode===wr.a.LOCAL?Object(z.Translate)("join_call_mode_option_selected_assistive"):Object(z.Translate)("join_call_mode_option_not_selected_assistive"),t=this.props.currentMode===wr.a.PRESENTATION_ONLY?Object(z.Translate)("join_call_mode_option_selected_assistive"):Object(z.Translate)("join_call_mode_option_not_selected_assistive"),i=this.props.currentMode===wr.a.DIAL_IN?Object(z.Translate)("join_call_mode_option_selected_assistive"):Object(z.Translate)("join_call_mode_option_not_selected_assistive");return l.a.createElement("section",{role:"list",ref:this.modeSelectionRef,onKeyDown:e=>this.onKeyPressed(e),onBlur:e=>this.onFocusOut(e),className:[this.props.className,gc.a.modeSelect].filter(Boolean).join(" ")},l.a.createElement(bc,{ref:this.firstOptionRef,selected:this.props.currentMode===wr.a.LOCAL,ariaLabel:"".concat(Object(z.Translate)("join_call_mode_local")," ").concat(e),onClick:this.onSelectLocalMode},l.a.createElement(Rs,{"aria-hidden":!0}),l.a.createElement("span",null,Object(z.Translate)("join_call_mode_local"))),l.a.createElement(bc,{ref:this.secondOptionRef,selected:this.props.currentMode===wr.a.PRESENTATION_ONLY,ariaLabel:"".concat(Object(z.Translate)("join_call_mode_presentation_only")," ").concat(t),onClick:this.onSelectPresentationMode},l.a.createElement(so,{"aria-hidden":!0}),l.a.createElement("span",null,Object(z.Translate)("join_call_mode_presentation_only"))),this.props.isDialInAvailable&&l.a.createElement(bc,{ref:this.thirdOptionRef,selected:this.props.currentMode===wr.a.DIAL_IN,ariaLabel:"".concat(Object(z.Translate)("join_call_mode_dial_in_details")," ").concat(i),onClick:this.onSelectDialInMode},l.a.createElement(ho,{"aria-hidden":!0}),l.a.createElement("span",null,Object(z.Translate)("join_call_mode_dial_in_details"))))}onKeyPressed(e){if("Escape"===e.key&&this.props.onClose(),"ArrowDown"===e.key&&(e.preventDefault(),this.state.currentFocus===this.modeSelectionMenuSize-1?this.setState({currentFocus:0}):this.setState({currentFocus:this.state.currentFocus+1})),"ArrowUp"===e.key&&(e.preventDefault(),this.state.currentFocus?this.setState({currentFocus:this.state.currentFocus-1}):this.setState({currentFocus:this.modeSelectionMenuSize-1})),"Enter"===e.key){const e=[wr.a.LOCAL,wr.a.PRESENTATION_ONLY,wr.a.DIAL_IN];this.props.onSelectJoinMode(e[this.state.currentFocus])}}onFocusOut(e){var t;this.modeSelectionRef.current&&!(null===(t=this.modeSelectionRef.current)||void 0===t?void 0:t.contains(e.relatedTarget))&&this.props.onClose&&this.props.onClose()}onSelectPresentationMode(){this.props.onSelectJoinMode(wr.a.PRESENTATION_ONLY),this.props.onClose()}onSelectLocalMode(){this.props.onSelectJoinMode(wr.a.LOCAL),this.props.onClose()}onSelectDialInMode(){this.props.onSelectJoinMode(wr.a.DIAL_IN),this.props.onClose()}}const vc=Object(c.b)(e=>({currentMode:b.gc(e)}),e=>({onSelectJoinMode:t=>e(Object(u.setJoinMode)(t))}))(Sc);var fc=i(766),Cc=i.n(fc),Ec=i(53),Tc=i(174),Oc=i(11);class Nc extends r.PureComponent{constructor(e){var t,i,a;super(e),a=!1,(i="isMounted")in(t=this)?Object.defineProperty(t,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[i]=a,this.state={displayName:e.userDisplayName||"",isShowingSignIn:e.isSignedIn||e.signInErrorCode===Oc.a.JWT_EXPIRED||!!this.props.configuration&&!this.props.configuration.allowUnauthenticatedGuests},this.renderAltAction=this.renderAltAction.bind(this),this.onDisplayNameChange=this.onDisplayNameChange.bind(this),this.onSetDisplayName=this.onSetDisplayName.bind(this),this.onGoToSignIn=this.onGoToSignIn.bind(this),this.onCancelSignIn=this.onCancelSignIn.bind(this),this.onSignIn=this.onSignIn.bind(this),this.onSignOut=this.onSignOut.bind(this),this.onKeyPressed=this.onKeyPressed.bind(this)}componentDidMount(){this.isMounted=!0,this.props.ssoLoginFailedUsername&&this.setState({isShowingSignIn:!0})}componentDidUpdate(e){!this.props.isSignedIn&&this.props.configuration&&this.props.configuration.allowUnauthenticatedGuests&&!e.userDisplayName&&this.props.userDisplayName&&this.props.onClose()}componentWillUnmount(){this.isMounted=!1}render(){return l.a.createElement("section",{className:[Cc.a.nameChangeModal,this.props.className].filter(Boolean).join(" "),onKeyDown:this.onKeyPressed},this.props.isSignedIn?this.renderSignedIn():this.renderSignedOut(),this.renderAltAction())}renderAltAction(){let e,t,i,a=!1;return this.props.isSigningOut?l.a.createElement($e.a,{className:Cc.a.signingOut}):(this.state.isShowingSignIn?this.props.isSignedIn?(e=this.onSignOut,t=Object(z.Translate)("sign_out"),i="sign_out"):this.props.configuration&&!this.props.configuration.allowUnauthenticatedGuests?(e=void 0,t=void 0):(e=this.props.isSigningIn?()=>{}:this.onCancelSignIn,t=Object(z.Translate)("continue_without_signing_in"),i="continue_without_signing_in",a=!!this.props.isSigningIn):this.props.configuration&&this.props.configuration.allowGuestJoinSignIn&&(e=this.onGoToSignIn,t=Object(z.Translate)("sign_in_instead"),i="sign_in_instead"),e&&t?l.a.createElement(Z.a,{onClick:e,disabled:a,className:Cc.a.altActionLink,"data-test":i},t):null)}renderSignedOut(){if(this.state.isShowingSignIn)return l.a.createElement(Tc.a,{submitButtonText:Object(z.Translate)("sign_in"),isSigningIn:this.props.isSigningIn,isTracing:this.props.isTracing,signInErrorCode:this.props.signInErrorCode,onSignIn:this.onSignIn,isCallClient:!0});let e=null;return e=this.props.configuration&&!this.props.configuration.allowGuestJoinSignIn?Object(z.Translate)("set_name_to_continue"):this.props.isSignedIn||this.props.userDisplayName?Object(z.Translate)("set_name_or_sign_in"):Object(z.Translate)("set_name_or_sign_in_to_continue"),l.a.createElement("form",{"data-test":"display_name_form",name:"cma_display_name_form",onSubmit:this.onSetDisplayName},l.a.createElement("p",{className:Cc.a.signedOutDescription},e),l.a.createElement(Ec.a,{"aria-label":Object(z.Translate)("enter_your_name"),placeholder:Object(z.Translate)("enter_your_name"),name:"cma_display_name_input",autoComplete:"off",lastPassIgnore:!0,value:this.state.displayName,autoFocus:!0,onChange:this.onDisplayNameChange,className:Cc.a.displayNameInput}),l.a.createElement(q.a,{"aria-label":Object(z.Translate)("set_display_name"),className:Cc.a.setDisplayNameButton,disabled:!this.state.displayName.trim(),type:"submit"},Object(z.Translate)("set_display_name")))}renderSignedIn(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("p",{className:Cc.a.signedInDescription},Object(z.Translate)("signed_in_as")),l.a.createElement("span",{className:Cc.a.signedInName},this.props.userDisplayName),l.a.createElement(q.a,{"aria-label":Object(z.Translate)("name_change_continue_assistive",this.props.userDisplayName||""),className:Cc.a.continueButton,autoFocus:!0,onClick:this.props.onClose},Object(z.Translate)("name_change_continue")))}onGoToSignIn(){this.setState({isShowingSignIn:!0})}onCancelSignIn(){this.props.onClearSignInErrorCode(),this.setState({isShowingSignIn:!1})}onSetDisplayName(e){e.preventDefault(),this.props.onSetDisplayName(this.state.displayName),this.props.onClose()}onDisplayNameChange(e){this.setState({displayName:e.target.value||""})}onSignIn(e,t,i,a){this.props.onSignIn(e,t,i,a).then(()=>this.props.onClose())}onSignOut(){this.props.onSignOut().then(()=>{this.props.userDisplayName&&(this.props.onSetDisplayName(this.props.userDisplayName),this.isMounted&&this.setState({displayName:this.props.userDisplayName})),this.props.configuration&&this.props.configuration.allowUnauthenticatedGuests&&this.isMounted&&this.onCancelSignIn()})}onKeyPressed(e){"Escape"===e.key&&this.props.onClose()}}var yc,jc=Nc,Mc=i(69),kc=i(20),wc=i(30),Ac=i(76);function Dc(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}!function(e){e.NONE="NONE",e.DEVICE_SETTINGS="DEVICE_SETTINGS",e.MODE_SELECTION="MODE_SELECTION",e.CONNECT_DEVICE="CONNECT_DEVICE"}(yc||(yc={}));class Pc extends r.PureComponent{constructor(e){super(e),Dc(this,"videoRef",l.a.createRef()),Dc(this,"settingsButtonRef",l.a.createRef()),Dc(this,"modeSelectButtonRef",l.a.createRef()),this.state={currentMenu:yc.NONE,isPlayingLocalVideo:!1,isShowingNameChangeModal:!e.isSignedIn&&!e.userDisplayName||e.signInErrorCode===Oc.a.JWT_EXPIRED||!!this.props.configuration&&!this.props.configuration.allowUnauthenticatedGuests&&!this.props.isSignedIn},this.renderHeader=this.renderHeader.bind(this),this.renderBody=this.renderBody.bind(this),this.handleJoinCallClick=this.handleJoinCallClick.bind(this),this.openModeSelection=this.openModeSelection.bind(this),this.openDeviceSettings=this.openDeviceSettings.bind(this),this.closeMenu=this.closeMenu.bind(this),this.onLocalVideoPlay=this.onLocalVideoPlay.bind(this),this.onLocalVideoStop=this.onLocalVideoStop.bind(this),this.onSwitchToNextCamera=this.onSwitchToNextCamera.bind(this),this.setNameChangeModalOpenState=this.setNameChangeModalOpenState.bind(this),this.onLeaveCallClient=this.onLeaveCallClient.bind(this),this.componentCleanup=this.componentCleanup.bind(this),this.props.joinMode===wr.a.LOCAL&&h.f.requestUserMedia(this)}componentCleanup(){this.props.clearSignInSSOFailure()}componentWillUnmount(){this.props.joinMode===wr.a.LOCAL&&h.f.releaseUserMedia(this),this.props.clearSignInSSOFailure(),window.removeEventListener("beforeunload",this.componentCleanup),Object(kc.f)()}componentDidMount(){window.addEventListener("beforeunload",this.componentCleanup),this.props.joinMode!==wr.a.DIAL_IN||this.props.nonMemberConference||this.props.onSelectJoinMode(wr.a.LOCAL),this.props.ssoLoginFailedUsername&&this.setState({isShowingNameChangeModal:!0}),this.props.signInErrorCode!==Oc.a.JWT_EXPIRED&&Object(kc.f)()}componentDidUpdate(e){this.props.joinMode!==e.joinMode&&(this.props.joinMode!==wr.a.LOCAL?h.f.releaseUserMedia(this,!1):h.f.requestUserMedia(this)),(e.localStreamId!==this.props.localStreamId||e.joinMode!==this.props.joinMode||this.props.isCameraMuted)&&this.onLocalVideoStop()}render(){return this.props.isUnknownSpace?l.a.createElement(Ac.a,{title:Object(z.Translate)("join_call_unknown_space"),footerTextShown:this.props.isSignedIn?Ce.d.VERSION_AND_COPYRIGHT:Ce.d.COPYRIGHT_ONLY}):l.a.createElement(Be,{header:this.renderHeader(),onClose:this.onLeaveCallClient,helpLink:Xl.a.JOINING_OPTIONS,closeButtonAssistive:Object(z.Translate)("join_call_close_button_assistive"),bodyClassName:Ql.a.joinSettings,closeIcon:l.a.createElement(X.a,null),selectedLanguage:this.props.selectedLanguage,onShowLanguageSelectionDialog:this.props.onShowLanguageSelectionDialog},this.renderBody())}renderHeader(){return l.a.createElement("div",{className:Ql.a.title},l.a.createElement("h1",{className:Ql.a.mainTextDesktop},this.props.spaceName?Object(z.Translate)("join_call_title",this.props.spaceName):Object(z.Translate)("join_meeting")),l.a.createElement("h1",{className:Ql.a.mainTextMobile},this.props.spaceName||Object(z.Translate)("join_meeting")),this.renderDisplayName())}renderDisplayName(){var e;return this.props.isSignedIn||!this.props.configuration||this.props.configuration.allowUnauthenticatedGuests?this.props.isSignedIn||this.props.userDisplayName?l.a.createElement("h5",{className:Ql.a.subtitleText},l.a.createElement("span",{className:Ql.a.userDisplayNamePreText},Object(z.Translate)("join_call_subtitle_start")),l.a.createElement("span",{className:Ql.a.userDisplayName,"data-test":"display_name"},this.props.userDisplayName),!this.props.isSignedIn&&(null===(e=this.props.configuration)||void 0===e?void 0:e.userPortalEnabled)&&l.a.createElement("span",{className:Ql.a.guestText},"(".concat(Object(z.Translate)("join_call_guest"),")")),!!this.props.nonMemberConference&&l.a.createElement(Z.a,{"aria-label":this.state.isShowingNameChangeModal?Object(z.Translate)("change_name_cancel_assistive"):Object(z.Translate)("change_name_assistive"),className:Ql.a.userDisplayNameChangeLink,"data-test":"change_name",onClick:this.setNameChangeModalOpenState.bind(this,!this.state.isShowingNameChangeModal)},Object(z.Translate)("change_name"))):l.a.createElement("h5",{className:Ql.a.subtitleText,"data-test":"whats_your_name"},Object(z.Translate)("join_call_whats_your_name")):l.a.createElement("h5",{className:Ql.a.subtitleText,"data-test":"sign_in_required"},Object(z.Translate)("join_call_sign_in_required"))}renderBody(){return l.a.createElement(l.a.Fragment,null,this.props.callJoinFailureNotificationTime&&l.a.createElement(Ne.a,{key:"call_join_failed",type:$.b.FAILURE,className:Ql.a.callJoinFailureNotification,title:404===this.props.callJoinFailedErrorCode?Object(z.Translate)("meeting_join_failure_notification_title"):Object(z.Translate)("call_join_failure_notification"),description:404===this.props.callJoinFailedErrorCode?Object(z.Translate)("space_deleted_by_another_user_join_call_notification_message"):Object(z.Translate)("call_join_failure_notification_description"),onClose:this.props.onDismissCallJoinFailureNotification}),this.state.isShowingNameChangeModal&&l.a.createElement(jc,{configuration:this.props.configuration,userDisplayName:this.props.userDisplayName,onClearSignInErrorCode:this.props.onClearSignInErrorCode,onSetDisplayName:this.props.onDisplayNameChange,onClose:this.setNameChangeModalOpenState.bind(this,!1),onSignOut:this.props.onSignOut,onSignIn:this.props.onSignIn,isSignedIn:this.props.isSignedIn,isSigningIn:this.props.isSigningIn,isSigningOut:this.props.isSigningOut,isTracing:this.props.isTracing,signInErrorCode:this.props.signInErrorCode,ssoLoginFailedUsername:this.props.ssoLoginFailedUsername}),this.state.isShowingNameChangeModal&&l.a.createElement("div",{className:Ql.a.overlay,onClick:this.setNameChangeModalOpenState.bind(this,!1)}),this.props.joinMode===wr.a.LOCAL&&this.renderLocalJoinMode(),this.props.joinMode===wr.a.PRESENTATION_ONLY&&this.renderPresentationOnlyJoinMode(),this.props.joinMode===wr.a.DIAL_IN&&this.renderDialInJoinMode(),l.a.createElement("button",{tabIndex:this.state.isShowingNameChangeModal?-1:0,role:"button","aria-haspopup":!0,"aria-label":Object(z.Translate)("join_call_mode_assistive_message"),onClick:this.openModeSelection,className:[Ql.a.modeSelectionButton,Ql.a.menuButton].join(" "),ref:this.modeSelectButtonRef},l.a.createElement(Bs,null),l.a.createElement("span",null,Object(z.Translate)("join_call_mode_selection")),l.a.createElement(X.l,null)),this.props.joinMode===wr.a.LOCAL&&this.renderDeviceSettingsButton(),this.state.currentMenu===yc.MODE_SELECTION&&l.a.createElement(dc,{onClose:this.closeMenu,"aria-label":Object(z.Translate)("join_call_mode_selection_label_assistive")},l.a.createElement(vc,{isDialInAvailable:!!this.props.nonMemberConference,onClose:this.closeMenu})),this.state.currentMenu===yc.DEVICE_SETTINGS&&l.a.createElement(dc,{onClose:this.closeMenu,"aria-label":Object(z.Translate)("join_call_device_settings_label_assistive")},l.a.createElement(Ol,{onClose:this.closeMenu})))}renderDeviceSettingsButton(){if(Object(gt.b)()){if(this.props.isCameraMuted||this.props.isRequestingLocalCam||this.props.availableCameras.filter(e=>!e.wasAddedByMediaLib).length<=1)return;return l.a.createElement("button",{tabIndex:this.state.isShowingNameChangeModal?-1:0,onClick:this.onSwitchToNextCamera,className:[Ql.a.swapCameraButton,Ql.a.menuButton].join(" ")},l.a.createElement(Ps,null))}return l.a.createElement("button",{tabIndex:this.state.isShowingNameChangeModal?-1:0,onClick:this.openDeviceSettings,className:[Ql.a.deviceSettingsButton,Ql.a.menuButton].join(" "),ref:this.settingsButtonRef},l.a.createElement(X.z,null),l.a.createElement("span",{className:Ql.a.menuButtonTitle},Object(z.Translate)("join_call_device_settings")))}renderLocalJoinMode(){const e=j("localStream")||void 0;return l.a.createElement(l.a.Fragment,null,l.a.createElement(ic,{className:Ql.a.controls,canMuteCamera:this.props.hasLocalStreamVideo||this.props.isRequestingLocalCam,canMuteMicrophone:this.props.hasLocalStreamAudio||this.props.isRequestingLocalMic,isCameraMuted:this.props.isCameraMuted,isMicrophoneMuted:this.props.isMicrophoneMuted,isReadyToJoin:!this.state.isShowingNameChangeModal&&(!e&&!this.props.isRequestingLocalCam&&!this.props.isRequestingLocalMic||this.props.hasLocalStreamAudio&&!this.props.hasLocalStreamVideo||this.props.hasLocalStreamVideo&&(this.state.isPlayingLocalVideo||this.props.isCameraMuted)),onCameraMuteToggle:this.props.onCameraMuteToggle,onMicrophoneMuteToggle:this.props.onMicrophoneMuteToggle,onJoinCallClick:this.handleJoinCallClick}),e&&this.props.hasLocalStreamVideo&&!this.props.isCameraMuted?[l.a.createElement("div",{key:"video_container",className:Ql.a.videoContainer},l.a.createElement(bt.a,{key:"local_stream",ref:this.videoRef,selectedSpeaker:this.props.selectedSpeaker,className:this.props.isSelfViewMirrored?Ql.a.mirrored:Ql.a.notMirrored,stream:e,onFailed:this.onLocalVideoStop,onSucceeded:this.onLocalVideoPlay,muted:!0,"data-test":"local_stream"}))]:this.renderVideoPlaceholder())}onLocalVideoPlay(){this.setState({isPlayingLocalVideo:!0})}onLocalVideoStop(){this.setState({isPlayingLocalVideo:!1})}renderPresentationOnlyJoinMode(){return l.a.createElement(uc,{className:Ql.a.joinModeDetails,isJoinCallDisabled:this.state.isShowingNameChangeModal,onJoinCallClick:this.handleJoinCallClick})}renderDialInJoinMode(){return l.a.createElement(oc,{className:Ql.a.joinModeDetails,ivrNumbers:this.props.nonMemberConference&&this.props.nonMemberConference.ivrNumbers,meetingId:this.props.nonMemberConference&&this.props.nonMemberConference.numericId,passcode:this.props.nonMemberConference&&this.props.nonMemberConference.passcode,uri:this.props.nonMemberConference&&this.props.nonMemberConference.uri})}renderVideoPlaceholder(){return this.props.isCameraMuted||this.props.selectedCamera&&"none"===this.props.selectedCamera.id?l.a.createElement("section",{tabIndex:0,role:"alert",className:Ql.a.videoPlaceholder,"aria-label":"".concat(Object(z.Translate)("call_camera_turned_off")).concat(Object(z.Translate)("call_camera_turned_off_explanation"))},l.a.createElement(Ds,{"aria-hidden":!0,className:Ql.a.cameraMutedIcon}),l.a.createElement("span",null,Object(z.Translate)("call_camera_turned_off")),l.a.createElement("span",null,Object(z.Translate)("call_camera_turned_off_explanation"))):this.props.isRequestingLocalCam?l.a.createElement("section",{className:Ql.a.videoPlaceholder},l.a.createElement($e.a,null)):l.a.createElement("section",{className:Ql.a.videoPlaceholder},l.a.createElement(Ds,{className:Ql.a.cameraMutedIcon}),l.a.createElement("span",null,Object(z.Translate)("call_camera_not_available")))}handleJoinCallClick(){this.props.joinMode===wr.a.LOCAL&&h.f.releaseUserMedia(this),this.props.onJoinCallClick(this.props.joinParams,this.props.joinMode)}closeMenu(){this.state.currentMenu===yc.MODE_SELECTION&&this.modeSelectButtonRef.current?this.modeSelectButtonRef.current.focus():this.state.currentMenu===yc.DEVICE_SETTINGS&&this.settingsButtonRef.current&&this.settingsButtonRef.current.focus(),this.setCurrentMenu(yc.NONE)}openModeSelection(){this.props.onDismissCallJoinFailureNotification(),this.setCurrentMenu(yc.MODE_SELECTION)}openDeviceSettings(){this.props.onDismissCallJoinFailureNotification(),this.setCurrentMenu(yc.DEVICE_SETTINGS)}onSwitchToNextCamera(){this.props.onDismissCallJoinFailureNotification(),this.props.onSwitchToNextCamera()}setNameChangeModalOpenState(e){(e||this.props.signInErrorCode!==Oc.a.JWT_EXPIRED&&(this.props.isSignedIn||this.props.userDisplayName)&&(this.props.isSignedIn||!this.props.configuration||this.props.configuration.allowUnauthenticatedGuests))&&(this.props.onClearSignInErrorCode(),this.setState({isShowingNameChangeModal:e}))}onLeaveCallClient(){this.props.isSignedIn?this.props.wasSpaceSelectedInPortal?this.props.onGoToPortal():this.props.onGoToPortalHome():this.props.onGoToLandingJoinMeeting()}setCurrentMenu(e){this.setState({currentMenu:e})}}var Ic=Object(c.b)(e=>{const t=Object(Se.a)(e);if(!t)throw new Error("Attempting to join without join params");return{availableCameras:b.k(e),callJoinFailureNotificationTime:b.q(e),callJoinFailedErrorCode:b.p(e),configuration:b.C(e),nonMemberConference:b.Ib(e),hasLocalStreamAudio:b.Oc(e),hasLocalStreamVideo:b.Pc(e),isRequestingLocalCam:b.eb(e)===kr.b.REQUESTING,isRequestingLocalMic:b.gb(e)===kr.b.REQUESTING,isSignedIn:b.Vd(e),isSigningIn:b.Wd(e),isSigningOut:b.Xd(e),isTracing:b.ae(e),isSelfViewMirrored:b.Rd(e),isUnknownSpace:!Object(Se.c)(e),joinMode:b.gc(e),joinParams:t,localStreamId:b.ib(e),selectedCamera:b.fc(e),selectedLanguage:b.hc(e),signInErrorCode:b.pc(e),spaceName:Object(Se.b)(e),userDisplayName:Object(wc.d)(e),wasSpaceSelectedInPortal:b.ke(e),ssoLoginFailedUsername:b.ac(e),isEltaninEnabled:Object(bl.e)(e),selectedSpeaker:b.lc(e)}},e=>({onClearSignInErrorCode:()=>e(Object(fe.c)()),onDismissCallJoinFailureNotification:()=>e(Object(ve.c)()),onDisplayNameChange:t=>e(Object(Mc.a)(t)),onSignOut:()=>e(Object(fe.k)(void 0)),onGoToLandingJoinMeeting:()=>e(Object(xe.f)()),onGoToPortal:()=>e(Object(xe.g)()),onGoToPortalHome:()=>e(Object(xe.h)()),onJoinCallClick:(t,i)=>e(Object(u.joinCall)(t,i,void 0)),onSelectJoinMode:t=>e(Object(u.setJoinMode)(t)),onSignIn:(t,i,a,n)=>e(Object(fe.g)(t,i,a,!1,n)),onShowLanguageSelectionDialog:()=>e(Object(Le.c)(Ue.a.LANGUAGE_SELECTION)),onSwitchToNextCamera:()=>e(C()),clearSignInSSOFailure:()=>e(Object(fe.d)())}))(Pc),Rc=i(767),Bc=i.n(Rc),Lc=i(421),xc=i.n(Lc),Fc=i(338),Vc=i.n(Fc),Uc=i(352),Hc=i.n(Uc),Gc=i(399),Wc=i.n(Gc),zc=i(122);let Jc;!function(e){e.DISCONNECTED="disconnected",e.FAILED="failed"}(Jc||(Jc={}));class Kc extends r.PureComponent{constructor(e){var t,i,a;super(e),a=void 0,(i="liRef")in(t=this)?Object.defineProperty(t,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[i]=a,this.liRef=r.createRef()}componentDidUpdate(e){!e.isSelected&&this.props.isSelected&&this.liRef&&this.liRef.current&&this.liRef.current.scrollIntoView({block:"nearest"})}render(){const e=this.props.participant,t=e.state?e.uri:e.displayName,i=r.createElement(q.a,{className:Vc.a.nameButton,"data-test":"add_participant_button_"+this.props.participant.guid,tabIndex:this.props.onClick?void 0:-1,"aria-label":t},r.createElement("span",{className:Vc.a.name},t));let a,n=!1,s=!1,o=!1;switch(e.state){case k.j.CONNECTED:case k.j.ON_HOLD:a=r.createElement("span",{className:Vc.a.subName},Object(z.Translate)("add_participant_status_in_meeting")),n=!0;break;case k.j.INITIAL:case k.j.RINGING:case k.j.UNKNOWN:s=!0,a=r.createElement("span",{id:"connecting",className:Vc.a.subName},Object(z.Translate)("add_participant_status_connecting"));break;case Jc.FAILED:o=!0,a=r.createElement("span",{id:"failed",className:Vc.a.subName},Object(z.Translate)("add_participant_status_failed"));break;default:a=e.displayName!==e.uri?r.createElement("span",{className:Vc.a.subName},e.uri):null}const l=this.props.onClick?this.props.onClick.bind(this,e):()=>{},c=this.props.onRedial?this.props.onRedial.bind(this,e):()=>{};return r.createElement("li",{"data-test":"add_participant_list_item_"+this.props.participant.guid,key:e.guid,className:Vc.a.participant,ref:this.liRef,title:e.displayName},r.createElement("div",{className:[Vc.a.participantDetails,xc.a.participantDetails,this.props.isSelected&&Vc.a.selected].filter(Boolean).join(" "),onClick:l},r.createElement(zc.a,{details:{text:e.avatar.text,colour:this.props.coloredAvatar?e.avatar.colour:void 0},className:xc.a.avatar}),r.createElement("div",{id:"participant_state",role:"alert","aria-live":"assertive",tabIndex:0,className:[Vc.a.nameContainer,Object(Ye.a)()&&Vc.a.rightAlignedNameContainer].filter(Boolean).join(" ")},i,a),n&&r.createElement(gr,null),s&&r.createElement($e.a,null),o&&r.createElement(Q.c,{title:Object(z.Translate)("add_participant_redial"),onClick:c,className:xc.a.redialButton},r.createElement(_r,null))))}}var Yc=i(127);function qc(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function Qc(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?qc(Object(i),!0).forEach((function(t){Zc(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):qc(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Zc(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Xc extends r.PureComponent{constructor(e){super(e),Zc(this,"onDirectorySearchDebounced",void 0),Zc(this,"handleArrowKeyThrottled",void 0),Zc(this,"inputRef",void 0),this.state={directoryResults:[],inputValue:"",invitedParticipants:e.rememberedConnectingParticipants,isDoingDirectorySearch:!1,selectedIndex:0,lastDirectorySearchAvatar:{text:"",colour:void 0}},this.onDirectorySearchDebounced=Hc()(this.onDirectorySearch,500),this.handleArrowKeyThrottled=Wc()(this.handleArrowKey.bind(this),50),this.handleChange=this.handleChange.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.onSearchFormSubmit=this.onSearchFormSubmit.bind(this),this.onSendAddParticipant=this.onSendAddParticipant.bind(this),this.onRedial=this.onRedial.bind(this),this.onClick=this.onClick.bind(this),this.getPreviouslyInvitedSuggestions=this.getPreviouslyInvitedSuggestions.bind(this),this.inputRef=r.createRef()}componentDidMount(){setTimeout(()=>{this.inputRef&&this.inputRef.current&&this.inputRef.current.focus()},Ce.a),this.resetLastDirectorySearchAvatar()}componentDidUpdate(e,t){t.inputValue===this.state.inputValue||this.state.inputValue||this.resetLastDirectorySearchAvatar();const i=this.props.participants.filter(e=>e.state===k.j.CONNECTED||e.state===k.j.ON_HOLD).map(e=>e.guid);let a=!1;const n=this.state.invitedParticipants.map(e=>i.includes(e.guid)&&!e.wasEverConnected?(a=!0,Qc(Qc({},e),{},{wasEverConnected:!0})):e);n.forEach(e=>{if(!e.avatar.colour){const t=this.props.participants.find(t=>t.guid===e.guid);t&&t.avatar.colour&&(e.avatar=t.avatar,this.storePreviouslyInvitedParticipant(e.uri,t.avatar),a=!0)}}),a&&this.setState({invitedParticipants:n})}componentWillUnmount(){const e=this.state.invitedParticipants.filter(e=>{const t=this.props.participants.find(t=>t.guid===e.guid);return!!t&&[k.j.INITIAL,k.j.RINGING,k.j.UNKNOWN].includes(t.state)});this.props.onRememberConnectingParticipants(e),this.props.onCancelDirectorySearch()}render(){const e=this.renderTypedInput(),t=this.renderPreviouslyInvitedSuggestions(),i=this.renderDirectoryResults(),a=this.renderInvitedParticipants();return r.createElement(r.Fragment,null,r.createElement("header",null,r.createElement("h4",null,Object(z.Translate)("add_participant_header"))),r.createElement("form",{"data-test":"add_participant_form",name:"cma_call_add_participant_form",onSubmit:this.onSearchFormSubmit,autoComplete:"off",className:xc.a.addParticipantForm},r.createElement(Yc.a,{inputMode:"search",className:xc.a.addParticipantSearchField,placeholder:Object(z.Translate)("add_participant_placeholder"),"aria-label":Object(z.Translate)("add_participant_placeholder"),inputRef:this.inputRef,value:this.state.inputValue,onKeyDown:this.handleKeyDown,onChange:this.handleChange})),!this.state.inputValue&&!a&&r.createElement("span",{className:xc.a.description},Object(z.Translate)("add_participant_description")),r.createElement("div",{className:Vc.a.subLists},e,t,i,a))}resetLastDirectorySearchAvatar(){this.setState({lastDirectorySearchAvatar:{text:"",colour:void 0}})}renderTypedInput(){if(!this.state.inputValue)return null;const e={displayName:this.state.inputValue,avatar:this.state.lastDirectorySearchAvatar,uri:this.state.inputValue,guid:"typed-input"};return r.createElement(r.Fragment,null,r.createElement("h5",{className:xc.a.subListHeading},Object(z.Translate)("add_participant_typed_input")),r.createElement("ul",{"data-test":"add_participant_typed_input_list","aria-label":Object(z.Translate)("add_participant_typed_input"),className:Vc.a.subList},r.createElement(Kc,{key:"add_participant_typed_input",coloredAvatar:!1,participant:e,onClick:this.onClick,isSelected:0===this.state.selectedIndex})))}renderPreviouslyInvitedSuggestions(){if(!this.state.inputValue)return null;const e=this.getPreviouslyInvitedSuggestions();return e.length?r.createElement(r.Fragment,null,r.createElement("h5",{className:xc.a.subListHeading},Object(z.Translate)("add_participant_previously_invited")),r.createElement("ul",{"data-test":"add_participant_previously_invited_list","aria-label":Object(z.Translate)("add_participant_previously_invited"),className:Vc.a.subList},e.map((e,t)=>r.createElement(Kc,{key:"previously-invited-"+e.uri,coloredAvatar:!0,participant:{uri:e.uri,displayName:e.uri,avatar:e.avatar,guid:"previously-invited-"+e.uri},onClick:this.onClick,isSelected:this.state.selectedIndex===t+1})))):null}renderDirectoryResults(){if(!this.state.inputValue||!this.state.isDoingDirectorySearch&&!this.state.directoryResults.length)return null;const e=this.state.directoryResults.sort((e,t)=>e.displayName.localeCompare(t.displayName,void 0,{sensitivity:"base"}));return r.createElement(r.Fragment,null,r.createElement("h5",{className:xc.a.subListHeading},Object(z.Translate)("add_participant_directory_results")),r.createElement("ul",{"data-test":"add_participant_directory_results","aria-label":Object(z.Translate)("add_participant_directory_results"),className:Vc.a.subList},e.map((e,t)=>{const i=t+this.getPreviouslyInvitedSuggestions().length+1;return r.createElement(Kc,{key:"directory-result-"+e.uri,coloredAvatar:!0,participant:Qc(Qc({},e),{},{guid:"directory-result-"+e.uri}),onClick:this.onClick,isSelected:this.state.selectedIndex===i})})),this.state.isDoingDirectorySearch&&r.createElement($e.a,{className:xc.a.searchingIndicator}))}renderInvitedParticipants(){if(this.state.inputValue)return null;const e=this.getInvitedParticipantsWithStates();return e.length?r.createElement(r.Fragment,null,r.createElement("h5",{className:xc.a.subListHeading},Object(z.Translate)("add_participant_invited")),r.createElement("ul",{"data-test":"add_participant_invited_list","aria-label":Object(z.Translate)("add_participant_invited"),className:Vc.a.subList},e.map(e=>r.createElement(Kc,{key:e.guid,coloredAvatar:!0,participant:e,onRedial:this.onRedial,isSelected:!1})))):null}handleChange(e){const t=e.target.value,i=e.target.value.trim(),a=this.state.inputValue.trim();i&&i!==a||!t&&this.state.inputValue?(this.props.onCancelDirectorySearch(),this.setState({inputValue:t,isDoingDirectorySearch:!1,selectedIndex:0}),this.onDirectorySearchDebounced(t)):this.setState({inputValue:t})}handleKeyDown(e){"ArrowDown"!==e.key&&"ArrowUp"!==e.key||(this.handleArrowKeyThrottled(e.key),e.preventDefault())}handleArrowKey(e){const t=this.getPreviouslyInvitedSuggestions().length+this.state.directoryResults.length+1;let i=this.state.selectedIndex;"ArrowDown"===e&&++i>=t&&(i=0),"ArrowUp"===e&&--i<0&&(i=t-1),this.setState({selectedIndex:i})}onSearchFormSubmit(e){if(e.preventDefault(),this.state.inputValue)if(0===this.state.selectedIndex)this.onSendAddParticipant(this.state.inputValue,this.state.lastDirectorySearchAvatar);else{const e=this.getPreviouslyInvitedSuggestions();this.state.selectedIndex-1<e.length?this.onSendAddParticipant(e[this.state.selectedIndex-1].uri,e[this.state.selectedIndex-1].avatar):this.onSendAddParticipant(this.state.directoryResults[this.state.selectedIndex-e.length-1].uri,this.state.directoryResults[this.state.selectedIndex-e.length-1].avatar)}}onSendAddParticipant(e,t){return this.setState({inputValue:""}),this.storePreviouslyInvitedParticipant(e,t),this.inputRef&&this.inputRef.current&&this.inputRef.current.focus(),this.onDirectorySearchDebounced.cancel(),this.props.onSendAddParticipant(e).then(i=>{this.setState(a=>({invitedParticipants:[...a.invitedParticipants,{guid:i,uri:e,avatar:t}]}))}).catch(e=>{we.b("Got failure response when trying to add participant:",e)})}onClick(e){this.onSendAddParticipant(e.uri,e.avatar)}onRedial(e){this.setState({invitedParticipants:this.state.invitedParticipants.filter(t=>t.uri!==e.uri)}),this.onSendAddParticipant(e.uri,e.avatar)}onDirectorySearch(e){if(!this.props.isSignedIn)return;this.setState({directoryResults:[],isDoingDirectorySearch:!0});this.props.onDirectorySearch(e,e=>{e&&e.data&&e.data.results&&this.setState({directoryResults:[...this.state.directoryResults,...e.data.results]})},()=>{this.setState({isDoingDirectorySearch:!1})}).then(e=>{this.setState({lastDirectorySearchAvatar:e.avatar})}).catch(()=>{this.resetLastDirectorySearchAvatar()})}readPreviouslyInvitedFromStorage(){const e=p.a.getStorageVariable(_.a.PREVIOUSLY_INVITED_PARTICIPANTS_WITH_AVATARS);if(e&&e.length)return e;const t=p.a.getStorageVariable(_.a.PREVIOUSLY_INVITED_PARTICIPANTS);return t&&t.length?t.map(e=>({uri:e,avatar:{text:"",colour:void 0}})):[]}storePreviouslyInvitedParticipant(e,t){const i=this.readPreviouslyInvitedFromStorage();if(!i.length)return p.a.setStorageVariable(_.a.PREVIOUSLY_INVITED_PARTICIPANTS_WITH_AVATARS,[{uri:e,avatar:t}]);const a=i.filter(t=>t.uri!==e);a.push({uri:e,avatar:t}),a.length>20&&a.shift(),p.a.setStorageVariable(_.a.PREVIOUSLY_INVITED_PARTICIPANTS_WITH_AVATARS,a)}getPreviouslyInvitedSuggestions(){const e=this.readPreviouslyInvitedFromStorage();return e.length?e.filter(e=>e.uri.startsWith(this.state.inputValue)).sort((e,t)=>e.uri.localeCompare(t.uri,void 0,{sensitivity:"base"})):[]}getInvitedParticipantsWithStates(){return this.state.invitedParticipants.map(e=>{const t=this.props.participants.find(t=>t.guid===e.guid);return t?Qc(Qc({},e),t):Qc(Qc({},e),{},{state:e.wasEverConnected?Jc.DISCONNECTED:Jc.FAILED})}).filter(e=>"disconnected"!==e.state).sort((e,t)=>e.uri.localeCompare(t.uri,void 0,{sensitivity:"base"}))}}var $c=Object(c.b)(e=>({isSignedIn:Object(b.Vd)(e)}),e=>({onCancelDirectorySearch:t=>e(Object(u.cancelDirectorySearch)(t)),onDirectorySearch:(t,i,a)=>e(Object(u.sendDirectorySearch)(t,i,a)),onSendAddParticipant:t=>e(Object(u.sendAddParticipant)(t))}))(Xc),ed=i(768),td=i.n(ed),id=i(769),ad=i.n(id),nd=i(337);class sd extends r.PureComponent{constructor(e){super(e)}render(){const e=[ad.a.chatMessage,this.props.shouldCombineWithPreviousMessage&&ad.a.shouldCombineWithPreviousMessage,this.props.isOldestUnread&&ad.a.isOldestUnread].filter(Boolean).join(" "),t=this.props.message.participantGuid===Object(J.c)(),i=this.props.message.receiverParticipantGuid===Object(J.c)();return r.createElement("li",{className:e,id:this.props.id,"data-test":this.props["data-test"],ref:this.props.divRef,tabIndex:0,onKeyDown:this.onKeyPressed,"aria-label":this.renderChatMsgAriaLabels(t,i)},!!this.props.isOldestUnread&&!t&&r.createElement("div",{className:ad.a.oldestUnreadIndicator},r.createElement("div",{className:ad.a.oldestUnreadLine}),r.createElement("span",{className:ad.a.oldestUnreadText},Object(z.Translate)("chat_new_messages"))),!this.props.shouldCombineWithPreviousMessage&&this.renderSenderDetails(t,i),r.createElement("p",{className:[ad.a.messageBody,Object(Ye.a)()&&ad.a.nameRightOriented].filter(Boolean).join(" ")},this.props.message.body))}onKeyPressed(e){"Tab"!==e.key||e.shiftKey||e.preventDefault(),Object(nd.a)(e)}renderChatMsgAriaLabels(e,t){const i=this.props.participantName===Ce.f;let a;return a=e&&!this.props.shouldCombineWithPreviousMessage?i?this.youToEveryone():this.youToParticipant():this.props.shouldCombineWithPreviousMessage?"".concat(this.props.message.body):t&&!this.props.shouldCombineWithPreviousMessage?this.props.isOldestUnread&&!e?"".concat(Object(z.Translate)("chat_new_messages")," ").concat(this.ParticipantToYou()):this.ParticipantToYou():this.props.isOldestUnread&&!e?"".concat(Object(z.Translate)("chat_new_messages")," ").concat(this.participantToEveryone()):this.participantToEveryone(),a}youToEveryone(){return"".concat(Object(z.Translate)("chat_message_self_to_everyone_youto")," ").concat(Object(z.Translate)("space_access_method_scope_public"),"\n      ").concat(this.props.message.timestampText," ").concat(this.props.message.body)}youToParticipant(){return"".concat(Object(z.Translate)("chat_message_self_to_everyone_youto")," ").concat(this.props.participantName,"\n      ").concat(this.props.message.timestampText," ").concat(this.props.message.body)}ParticipantToYou(){return"".concat(this.props.message.displayName," ").concat(Object(z.Translate)("chat_message_one_participant_to_self"),"\n    ").concat(this.props.message.timestampText," ").concat(this.props.message.body)}participantToEveryone(){return"".concat(this.props.message.displayName," ").concat(Object(z.Translate)("chat_message_one_participant_to_everyone_to"),"\n      ").concat(Object(z.Translate)("space_access_method_scope_public")," ").concat(this.props.message.timestampText,"\n      ").concat(this.props.message.body)}renderSenderDetails(e,t){const i=this.props.participantName===Ce.f;if(e){const e=i?r.createElement("span",null,Object(z.Translate)("chat_message_self_to_everyone_youto")," ",r.createElement("span",{className:ad.a.bluetext},Object(z.Translate)("space_access_method_scope_public")),r.createElement("span",{className:ad.a.timeStamp},this.props.message.timestampText)):r.createElement("span",null,Object(z.Translate)("chat_message_self_to_everyone_youto")," ",r.createElement("span",{className:ad.a.greentext},r.createElement("div",{className:ad.a.participantLabel},this.props.participantName)),r.createElement("span",{className:ad.a.timeStamp},this.props.message.timestampText));return r.createElement(r.Fragment,null,r.createElement("div",{className:ad.a.selfAvatar},r.createElement(mo,{className:[!i&&ad.a.greenFilled].filter(Boolean).join("")})),r.createElement("span",{className:[ad.a.messageDetail,Object(Ye.a)()&&ad.a.nameRightOriented].filter(Boolean).join(" ")},e))}const a=this.props.message.guest?Object(z.Translate)("participant_subname_guest"):this.props.message.username;return r.createElement(r.Fragment,null,r.createElement(zc.a,{className:ad.a.avatar,details:this.props.message.avatar,title:a}),r.createElement("span",{className:[ad.a.messageDetail,Object(Ye.a)()&&ad.a.nameRightOriented].filter(Boolean).join(" "),title:a},t?r.createElement("span",null,r.createElement("span",{className:ad.a.greentext},r.createElement("div",{className:ad.a.participantLabel},this.props.message.displayName)," "),Object(z.Translate)("chat_message_one_participant_to_self"),r.createElement("span",{className:ad.a.timeStamp},this.props.message.timestampText)):r.createElement("span",null,r.createElement("span",{className:ad.a.bluetext},r.createElement("div",{className:ad.a.participantToEveryone},this.props.message.displayName)," "),Object(z.Translate)("chat_message_one_participant_to_everyone_to")," ",r.createElement("span",{className:ad.a.bluetext},Object(z.Translate)("space_access_method_scope_public")),r.createElement("span",{className:ad.a.timeStamp},this.props.message.timestampText))))}}var od=sd,rd=i(770),ld=i.n(rd);var cd=r.forwardRef((e,t)=>{var i,a,n,s,o;const l=d.getStorageVariable(_.a.SELECTED_PARTICIPANT_GUID_TO_SEND_CHAT_MESSAGE);null!==l&&0!==(null===(i=e.participants)||void 0===i?void 0:i.length)||d.setStorageVariable(_.a.SELECTED_PARTICIPANT_GUID_TO_SEND_CHAT_MESSAGE,Ce.f);(null===(a=e.participants)||void 0===a?void 0:a.includes(Ce.r))?e.participants:null===(n=e.participants)||void 0===n||n.unshift(Ce.r);const[c,p]=r.useState(!1),[h,u]=r.useState(l||e.participants&&e.participants[0].guid),[m,g]=r.useState(!1);(null===(s=e.participants)||void 0===s?void 0:s.includes(Ce.u))?e.participants:null===(o=e.participants)||void 0===o||o.unshift(Ce.u);return r.useEffect(()=>{var t;void 0===(null===(t=e.participants)||void 0===t?void 0:t.find(e=>e.guid===h))||h===Ce.e?(d.setStorageVariable(_.a.SELECTED_PARTICIPANT_GUID_TO_SEND_CHAT_MESSAGE,Ce.e),g(!0)):g(!1)}),r.createElement("div",{className:[ld.a.messageForm,!Object(gt.b)()&&ld.a.desktop].filter(Boolean).join(" ")},r.createElement("div",{className:ld.a.participantSelectionContainer},r.createElement("span",{className:ld.a.tag},Object(z.Translate)("chat_message_participants_select_box_to_tag")),r.createElement(Cl.b,{id:"participants",className:ld.a.selectBox,"aria-label":Object(z.Translate)("chat_message_participants_select_box_to_tag"),value:h,onChange:function(e){d.setStorageVariable(_.a.SELECTED_PARTICIPANT_GUID_TO_SEND_CHAT_MESSAGE,e.target.value),u(e.target.value)}},e.participants&&e.participants.map(e=>r.createElement(Cl.a,{key:e.guid,value:e.guid},"Everyone"===e.displayName?Object(z.Translate)("space_access_method_scope_public"):e.displayName)))),r.createElement("textarea",{disabled:m,className:[ld.a.messageTextArea,!!e.value&&ld.a.hasText].filter(Boolean).join(" "),ref:t,placeholder:Object(z.Translate)("chat_message_text_area_placeholder_new"),value:e.value,onChange:e.onChange,onKeyDown:c?()=>{}:e.onKeyDown,onCompositionStart:()=>p(!0),onCompositionEnd:()=>p(!1)}),Object(gt.b)()&&!!e.value&&r.createElement(Q.c,{className:Object(Ye.a)()?ld.a.sendButtonLeft:ld.a.sendButton,title:Object(z.Translate)("chat_send_message"),onClick:e.onSendButtonClick,onMouseDown:e=>e.preventDefault(),loading:e.loading,disabled:e.disabled},r.createElement(go,null)))}),dd=i(356);function pd(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class hd extends r.PureComponent{constructor(e){super(e),pd(this,"chatMessagesSectionRef",void 0),pd(this,"oldestUnreadRef",void 0),pd(this,"textAreaRef",void 0),pd(this,"oldestUnreadChatMessageIdx",void 0),pd(this,"isMounted",!1),this.state={isScrolledToBottom:!0,isSendingMessage:!1,newMessage:""},this.chatMessagesSectionRef=r.createRef(),this.oldestUnreadRef=r.createRef(),this.textAreaRef=r.createRef(),this.oldestUnreadChatMessageIdx=this.props.oldestUnreadChatMessageIdx,this.renderChatMessages=this.renderChatMessages.bind(this),this.onMessageTextAreaChange=this.onMessageTextAreaChange.bind(this),this.onMessageTextAreaKeyDown=this.onMessageTextAreaKeyDown.bind(this),this.onSendButtonClick=this.onSendButtonClick.bind(this),this.sendMessage=this.sendMessage.bind(this),this.setMessageTextAreaValue=this.setMessageTextAreaValue.bind(this),this.onWindowResize=this.onWindowResize.bind(this),this.onScroll=this.onScroll.bind(this),this.scrollToBottom=this.scrollToBottom.bind(this),this.isMessageVisible=this.isMessageVisible.bind(this),this.refreshUnreadMessages=Object(s.throttle)(this.refreshUnreadMessages.bind(this),300)}componentDidMount(){this.isMounted=!0,Object(gt.b)()||setTimeout(()=>{this.textAreaRef&&this.textAreaRef.current&&this.textAreaRef.current.focus()},Ce.a),window.addEventListener("resize",this.onWindowResize),setTimeout(()=>{this.oldestUnreadRef&&this.oldestUnreadRef.current?this.oldestUnreadRef.current.scrollIntoView():this.scrollToBottom(),this.refreshUnreadMessages()},Ce.a)}componentDidUpdate(e,t){e.chatMessages.length<this.props.chatMessages.length&&this.state.isScrolledToBottom&&this.scrollToBottom(),(e.chatMessages.length<this.props.chatMessages.length||t.isScrolledToBottom!==this.state.isScrolledToBottom)&&this.refreshUnreadMessages()}componentWillUnmount(){this.isMounted=!1,window.removeEventListener("resize",this.onWindowResize)}render(){return r.createElement(r.Fragment,null,r.createElement("header",{className:td.a.chatHeader},r.createElement("h4",{"data-test":"chat_header"},Object(z.Translate)("chat_header"))),r.createElement("div",{className:td.a.chatMessagesContainer,tabIndex:this.state.isScrolledToBottom?0:-1},r.createElement("section",{className:td.a.chatMessages,ref:this.chatMessagesSectionRef,onScroll:this.onScroll,tabIndex:this.state.isScrolledToBottom?-1:0},this.renderChatMessages()),!this.state.isScrolledToBottom&&r.createElement(Q.c,{className:td.a.scrollToBottom,tabIndex:0,onClick:this.scrollToBottom,title:Object(z.Translate)("chat_scroll_to_bottom")},r.createElement(io,null))),this.props.permissions.postMessages&&r.createElement(cd,{value:this.state.newMessage,participants:this.props.currentParticipantsList,onChange:this.onMessageTextAreaChange,onKeyDown:this.onMessageTextAreaKeyDown,onSendButtonClick:this.onSendButtonClick,loading:this.state.isSendingMessage,disabled:this.state.isSendingMessage,ref:this.textAreaRef}))}renderChatMessages(){return this.props.chatMessages.length?this.props.chatMessages.map((e,t)=>{const i=t>0&&this.props.chatMessages[t-1].participantGuid===e.participantGuid&&this.props.chatMessages[t-1].username===e.username&&this.props.chatMessages[t-1].displayName===e.displayName&&this.props.chatMessages[t-1].timestampText===e.timestampText&&this.props.chatMessages[t-1].receiverParticipantGuid===e.receiverParticipantGuid,a=t===this.oldestUnreadChatMessageIdx,n=this.props.currentParticipantsList.find(t=>t.guid===e.receiverParticipantGuid),s=void 0===e.receiverParticipantGuid?Ce.f:void 0===n&&e.receiverParticipantGuid?Object(z.Translate)("label_to_show_when_participant_left_the_call"):n&&e.receiverParticipantGuid?n.displayName:"";return r.createElement(od,{message:e,key:e.messageGuid,id:"chat_message_"+e.messageGuid,"data-test":"chat_message_"+e.messageGuid+"_FROM_"+e.participantGuid,shouldCombineWithPreviousMessage:i,divRef:a?this.oldestUnreadRef:void 0,isOldestUnread:a,participantName:s})}):r.createElement("span",{className:td.a.noMessages},Object(z.Translate)("chat_no_messages"))}onMessageTextAreaChange(e){const t=e.target.value;this.state.isSendingMessage||Object(dd.b)(t.trim())>=8e3||this.setMessageTextAreaValue(t)}onMessageTextAreaKeyDown(e){Object(gt.b)()||"Enter"!==e.key||e.shiftKey||(e.preventDefault(),this.sendMessage())}onSendButtonClick(e){e.preventDefault(),this.sendMessage()}sendMessage(){if(this.state.isSendingMessage)return;const e=this.state.newMessage.trim();if(e){if(Object(dd.b)(e)>=8e3)return void this.props.onShowChatMessageSendFailureNotification(k.e.TOO_LARGE);const t=d.getStorageVariable(_.a.SELECTED_PARTICIPANT_GUID_TO_SEND_CHAT_MESSAGE);this.setState({isSendingMessage:!0}),this.props.onSendChatMessage(e,t).then(()=>{this.isMounted&&(this.setState({isSendingMessage:!1}),this.setMessageTextAreaValue(""),this.scrollToBottom())}).catch(e=>{this.setState({isSendingMessage:!1}),403===e.status?this.props.onShowChatMessageSendFailureNotification(k.e.NOT_ALLOWED):413===e.status?this.props.onShowChatMessageSendFailureNotification(k.e.TOO_LARGE):this.props.onShowChatMessageSendFailureNotification(k.e.OTHER)})}else this.state.newMessage&&this.setMessageTextAreaValue("")}setMessageTextAreaValue(e){this.setState({newMessage:e}),this.props.onDismissChatMessageSendFailureNotification()}onWindowResize(){this.state.isScrolledToBottom&&this.scrollToBottom(),this.onScroll()}onScroll(){this.chatMessagesSectionRef&&this.chatMessagesSectionRef.current&&Math.abs(this.chatMessagesSectionRef.current.scrollHeight-this.chatMessagesSectionRef.current.scrollTop-this.chatMessagesSectionRef.current.clientHeight)<=2?this.setState({isScrolledToBottom:!0}):this.state.isScrolledToBottom?this.setState({isScrolledToBottom:!1}):this.refreshUnreadMessages()}scrollToBottom(){this.chatMessagesSectionRef&&this.chatMessagesSectionRef.current&&(this.chatMessagesSectionRef.current.scrollTop=this.chatMessagesSectionRef.current.scrollHeight)}isMessageVisible(e){if(!e||!this.chatMessagesSectionRef||!this.chatMessagesSectionRef.current)return!1;const t=e.getBoundingClientRect(),i=this.chatMessagesSectionRef.current.getBoundingClientRect();return t.top-i.top>=-2&&t.bottom-i.bottom<=2||t.top<=i.top+32&&t.bottom>=i.bottom-32}refreshUnreadMessages(){if(this.chatMessagesSectionRef&&this.chatMessagesSectionRef.current){const e=this.chatMessagesSectionRef.current.children;let t=0;for(const i of e)if(i.id&&i.id.startsWith("chat_message_")){const e=this.props.chatMessages[t];if(t===this.props.oldestUnreadChatMessageIdx&&!this.isMessageVisible(i))return;if(t>this.props.oldestUnreadChatMessageIdx&&e.participantGuid!==Object(J.c)()&&!this.isMessageVisible(i))return this.props.onOldestUnreadChatMessageIdxChange(t);t++}if(this.props.oldestUnreadChatMessageIdx!==this.props.chatMessages.length)return this.props.onOldestUnreadChatMessageIdxChange(this.props.chatMessages.length)}}}var ud=Object(c.b)(e=>({chatMessages:Object(b.z)(e),currentParticipantsList:he(e)}),e=>({onSendChatMessage:(t,i)=>e(Object(u.sendChatMessage)(t,i)),onShowChatMessageSendFailureNotification:t=>e(Object(ve.x)(t)),onDismissChatMessageSendFailureNotification:()=>e(Object(ve.f)())}))(hd),md=i(771),gd=i.n(md),_d=i(772),bd=i.n(_d);class Sd extends r.PureComponent{constructor(e){super(e)}render(){return r.createElement("div",{className:bd.a.closedCaption,id:this.props.id,"data-test":this.props["data-test"],ref:this.props.divRef},this.renderSenderDetails(),r.createElement("p",{className:bd.a.captionBody},this.props.caption.body))}renderSenderDetails(){return r.createElement(r.Fragment,null,r.createElement("span",{className:bd.a.captionDetail},"".concat(this.props.caption.timestampText)))}}var vd=Sd,fd=i(773),Cd=i.n(fd);var Ed=r.forwardRef((e,t)=>{const[i,a]=r.useState(!1),n=Object(z.Translate)("no_captions_language_option");return r.createElement(r.Fragment,null,r.createElement(q.a,{className:Cd.a.saveCaptionsButton,"aria-label":Object(z.Translate)("closed_captions_save_buttton_title"),onClick:e.onSaveButtonClick,disabled:e.selectedLanguage===n||!e.closedCaptions.length},Object(z.Translate)("closed_captions_save_buttton_title")),r.createElement("div",{className:[Cd.a.captionsForm,!Object(gt.b)()&&Cd.a.desktop].filter(Boolean).join(" ")},r.createElement("textarea",{className:[Cd.a.captionsTextArea,!!e.value&&Cd.a.hasText].filter(Boolean).join(" "),ref:t,placeholder:Object(z.Translate)("closed_captions_text_area_placeholder"),value:e.value,onChange:e.onChange,onKeyDown:i?()=>{}:e.onKeyDown,onCompositionStart:()=>a(!0),onCompositionEnd:()=>a(!1),disabled:e.selectedLanguage===n}),Object(gt.b)()&&!!e.value&&r.createElement(Q.c,{className:Object(Ye.a)()?Cd.a.sendButtonLeft:Cd.a.sendButton,title:Object(z.Translate)("send_closed_caption_button"),onClick:e.onSendButtonClick,onMouseDown:e=>e.preventDefault(),loading:e.loading,disabled:e.disabled},r.createElement(go,null))))});function Td(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Od extends r.PureComponent{constructor(e){super(e),Td(this,"textAreaRef",void 0),Td(this,"closedCaptionsSectionRef",void 0),Td(this,"isMounted",!1),Td(this,"selectedLangOption",d.getStorageVariable(_.a.CAPTION_LANGUAGE_SELECTED)),Td(this,"languageOptions",[{name:"noCaption",label:Object(z.Translate)("no_captions_language_option")},{name:"english",label:Object(z.Translate)("closed_captions_english_language_option")}]),this.state={isScrolledToBottom:!0,isSendingCaption:!1,newCaption:"",selectedLang:this.selectedLangOption?this.selectedLangOption:this.languageOptions[0].label},this.textAreaRef=r.createRef(),this.closedCaptionsSectionRef=r.createRef(),this.renderClosedCaptions=this.renderClosedCaptions.bind(this),this.onCaptionTextAreaChange=this.onCaptionTextAreaChange.bind(this),this.onCaptionTextAreaKeyDown=this.onCaptionTextAreaKeyDown.bind(this),this.onSendButtonClick=this.onSendButtonClick.bind(this),this.sendCaption=this.sendCaption.bind(this),this.setCaptionTextAreaValue=this.setCaptionTextAreaValue.bind(this),this.onSelectLanguage=this.onSelectLanguage.bind(this),this.scrollToBottom=this.scrollToBottom.bind(this),this.onSaveButtonClick=this.onSaveButtonClick.bind(this)}componentDidMount(){this.isMounted=!0,Object(gt.b)()||setTimeout(()=>{this.textAreaRef&&this.textAreaRef.current?this.textAreaRef.current.focus():this.scrollToBottom()},Ce.a)}componentDidUpdate(e,t){e.closedCaptions.length<this.props.closedCaptions.length&&this.state.isScrolledToBottom&&this.scrollToBottom()}componentWillUnmount(){this.isMounted=!1}render(){return r.createElement(r.Fragment,null,r.createElement("header",{className:gd.a.chatHeader},r.createElement("h4",{"data-test":"closed_captions_header"},Object(z.Translate)("closed_captions_header"))),r.createElement("div",{className:gd.a.languageSelectContainer},r.createElement("h6",{className:gd.a.title},Object(z.Translate)("closed_captions_language_selection")),r.createElement(Cl.b,{id:"languageOptions",className:gd.a.selectBox,"aria-label":Object(z.Translate)("closed_captions_language_selection"),value:this.state.selectedLang,onChange:this.onSelectLanguage},this.languageOptions.map((e,t)=>r.createElement(Cl.a,{key:t,value:e.label||""},e.label)))),r.createElement("div",{className:gd.a.captionsContainer},r.createElement("section",{className:gd.a.captions,ref:this.closedCaptionsSectionRef},this.renderClosedCaptions())),this.props.permissions.postCaption&&r.createElement(Ed,{value:this.state.newCaption,onChange:this.onCaptionTextAreaChange,onKeyDown:this.onCaptionTextAreaKeyDown,onSendButtonClick:this.onSendButtonClick,selectedLanguage:this.state.selectedLang,ref:this.textAreaRef,onSaveButtonClick:this.onSaveButtonClick,closedCaptions:this.props.closedCaptions}))}onSelectLanguage(e){d.setStorageVariable(_.a.CAPTION_LANGUAGE_SELECTED,e.target.value),this.setState({selectedLang:e.target.value})}renderClosedCaptions(){return 0===this.props.closedCaptions.length&&this.state.selectedLang!==this.languageOptions[0].label?r.createElement("span",{className:gd.a.noCaptions},Object(z.Translate)("no_captions")):this.state.selectedLang===this.languageOptions[0].label?r.createElement("span",{className:gd.a.noCaptions},Object(z.Translate)("closed_captions_select_language_message")):this.props.closedCaptions.map((e,t)=>r.createElement(vd,{caption:e,key:e.messageGuid}))}onCaptionTextAreaChange(e){const t=e.target.value;this.state.isSendingCaption||Object(dd.b)(t.trim())>=96||this.setCaptionTextAreaValue(t)}onCaptionTextAreaKeyDown(e){Object(gt.b)()||"Enter"!==e.key||e.shiftKey||(e.preventDefault(),this.sendCaption())}onSaveButtonClick(e){const t=this.props.closedCaptions.map(e=>e.timestampText.concat("\n"+e.body).concat("\n"));e.preventDefault();const i=Date().toString(),a=this.props.callSpaceName.concat("-"+Object(z.Translate)("closed_captions_header")).concat("-"+i).concat(".txt"),n=document.createElement("a"),s=new Blob([t.toString().replaceAll(",","")],{type:"text/plain;charset=utf-8"});n.href=URL.createObjectURL(s),n.download=a,document.body.appendChild(n),n.click()}onSendButtonClick(e){e.preventDefault(),this.sendCaption()}sendCaption(){if(this.state.isSendingCaption)return;const e=this.state.newCaption.trim();if(e){if(Object(dd.b)(e)>=96)return;this.setState({isSendingCaption:!0}),this.props.onSendCaption(e).then(()=>{this.isMounted&&(this.setState({isSendingCaption:!1}),this.setCaptionTextAreaValue(""),this.scrollToBottom())}).catch(e=>{this.setState({isSendingCaption:!1})})}else this.state.newCaption&&this.setCaptionTextAreaValue("")}scrollToBottom(){this.closedCaptionsSectionRef&&this.closedCaptionsSectionRef.current&&(this.closedCaptionsSectionRef.current.scrollTop=this.closedCaptionsSectionRef.current.scrollHeight)}setCaptionTextAreaValue(e){this.setState({newCaption:e})}}var Nd=Object(c.b)(e=>({closedCaptions:Object(b.A)(e),callSpaceName:Object(b.s)(e)}),e=>({onSendCaption:t=>e(Object(u.sendClosedCaption)(t))}))(Od),yd=i(774),jd=i.n(yd);function Md(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class kd extends r.PureComponent{constructor(e){super(e),Md(this,"recordingAndStreamingRef",void 0),Md(this,"audioAndVideoRef",void 0),Md(this,"meetingLockRef",void 0),this.recordingAndStreamingRef=r.createRef(),this.audioAndVideoRef=r.createRef(),this.meetingLockRef=r.createRef(),this.renderRecordingStreamingSection=this.renderRecordingStreamingSection.bind(this),this.renderMutingSection=this.renderMutingSection.bind(this),this.renderSecuritySection=this.renderSecuritySection.bind(this)}componentDidMount(){setTimeout(()=>{this.recordingAndStreamingRef&&this.recordingAndStreamingRef.current&&(this.props.permissions.canControlRecording||this.props.permissions.canControlStreaming)?this.recordingAndStreamingRef.current.focus():this.audioAndVideoRef&&this.audioAndVideoRef.current&&(this.props.permissions.blockOthersAudio||this.props.permissions.blockOthersVideo)?this.audioAndVideoRef.current.focus():this.props.permissions.lockConference&&this.meetingLockRef&&this.meetingLockRef.current&&this.meetingLockRef.current.focus()},Ce.a)}render(){return r.createElement(r.Fragment,null,r.createElement("header",null,r.createElement("h4",null,Object(z.Translate)("call_sidebar_controls_header"))),(this.props.permissions.canControlRecording||this.props.permissions.canControlStreaming)&&this.renderRecordingStreamingSection(),(this.props.permissions.blockOthersAudio||this.props.permissions.blockOthersVideo)&&this.renderMutingSection(),this.props.permissions.lockConference&&this.renderSecuritySection())}renderToggleLine(e){return r.createElement(r.Fragment,null,r.createElement("span",{className:jd.a.label},e.label),r.createElement(Q.c,{title:e.active?e.buttonActiveStateTooltip:e.buttonInactiveStateTooltip,className:[jd.a.button,Object(Ye.a)()&&jd.a.buttonRightOriented].filter(Boolean).join(" "),onClick:e.toggleAction,toggled:e.active,ref:e.ref},e.active?r.createElement(e.onIcon,null):r.createElement(e.offIcon,null)))}renderLabelledButton(e,t,i,a,n,s){return r.createElement("label",{className:[jd.a.buttonLabel,n].filter(Boolean).join(" ")},e,r.createElement(Q.c,{title:t,className:[jd.a.button,jd.a.labeledButton,Object(Ye.a)()&&jd.a.buttonRightOriented].filter(Boolean).join(" "),onClick:i,ref:s},a))}renderActionLine(e){return r.createElement(r.Fragment,null,r.createElement("span",{className:[jd.a.label,e.labelClassName].filter(Boolean).join(" ")},e.label),this.renderLabelledButton(e.onLabel,e.onButtonTooltip,e.onAction,r.createElement(e.onIcon,null),e.onActionClassName,e.onRef),this.renderLabelledButton(e.offLabel,e.offButtonTooltip,e.offAction,r.createElement(e.offIcon,null),e.offActionClassName))}renderRecordingStreamingSection(){return r.createElement("section",{className:jd.a.callControlsSection},r.createElement("div",{className:jd.a.callControlsSectionHeadingContainer},r.createElement("h5",{className:jd.a.sectionHeading},Object(z.Translate)("call_sidebar_controls_recording_streaming_header"))),r.createElement("div",{className:jd.a.controlGrid},this.props.permissions.canControlRecording&&this.renderToggleLine({label:Object(z.Translate)("call_sidebar_controls_recording_label"),buttonActiveStateTooltip:Object(z.Translate)("call_sidebar_controls_recording_active_tooltip"),buttonInactiveStateTooltip:Object(z.Translate)("call_sidebar_controls_recording_inactive_tooltip"),active:this.props.callRecorded,onIcon:dr,offIcon:cr,toggleAction:()=>this.props.onSetRecording(!this.props.callRecorded),ref:this.recordingAndStreamingRef}),this.props.permissions.canControlStreaming&&this.renderToggleLine({label:Object(z.Translate)("call_sidebar_controls_streaming_label"),buttonActiveStateTooltip:Object(z.Translate)("call_sidebar_controls_streaming_active_tooltip"),buttonInactiveStateTooltip:Object(z.Translate)("call_sidebar_controls_streaming_inactive_tooltip"),active:this.props.callStreamed,onIcon:lr,offIcon:lr,toggleAction:()=>this.props.onSetStreaming(!this.props.callStreamed),ref:this.props.permissions.canControlRecording?null:this.recordingAndStreamingRef})))}renderMutingSection(){return r.createElement("section",{className:jd.a.callControlsSection},r.createElement("div",{className:jd.a.callControlsSectionHeadingContainer},r.createElement("h5",{className:jd.a.sectionHeading},Object(z.Translate)("call_sidebar_controls_muting_header"))),r.createElement("div",{className:[jd.a.controlGrid,jd.a.muting].join(" ")},this.props.permissions.blockOthersAudio&&this.renderActionLine({label:Object(z.Translate)("call_sidebar_controls_audio_label"),onButtonTooltip:Object(z.Translate)("call_sidebar_controls_audio_on_tooltip"),offButtonTooltip:Object(z.Translate)("call_sidebar_controls_audio_off_tooltip"),onIcon:ys,offIcon:eo,onLabel:Object(z.Translate)("call_sidebar_controls_allow_button_label"),offLabel:Object(z.Translate)("call_sidebar_controls_audio_mute_button_label"),onAction:()=>this.props.onBlockAllAudio(!1),offAction:()=>this.props.onBlockAllAudio(!0),onRef:this.audioAndVideoRef}),this.props.permissions.blockOthersVideo&&this.renderActionLine({label:Object(z.Translate)("call_sidebar_controls_video_label"),onButtonTooltip:Object(z.Translate)("call_sidebar_controls_video_on_tooltip"),offButtonTooltip:Object(z.Translate)("call_sidebar_controls_video_off_tooltip"),onIcon:ws,offIcon:$s,onLabel:Object(z.Translate)("call_sidebar_controls_allow_button_label"),offLabel:Object(z.Translate)("call_sidebar_controls_video_disable_button_label"),onAction:()=>this.props.onBlockAllVideo(!1),offAction:()=>this.props.onBlockAllVideo(!0),labelClassName:jd.a.blockAllVideoLabel,onActionClassName:jd.a.blockAllVideoOnAction,onRef:this.props.permissions.blockOthersAudio?null:this.audioAndVideoRef})))}renderSecuritySection(){return r.createElement("section",{className:jd.a.callControlsSection},r.createElement("div",{className:jd.a.callControlsSectionHeadingContainer},r.createElement("h5",{className:jd.a.sectionHeading},Object(z.Translate)("call_sidebar_controls_security_header"))),r.createElement("div",{className:jd.a.controlGrid},this.props.permissions.lockConference&&this.renderToggleLine({label:Object(z.Translate)("call_sidebar_controls_lock_label"),buttonActiveStateTooltip:Object(z.Translate)("call_sidebar_controls_lock_active_tooltip"),buttonInactiveStateTooltip:Object(z.Translate)("call_sidebar_controls_lock_inactive_tooltip"),active:this.props.callLocked,onIcon:hr,offIcon:pr,toggleAction:()=>this.props.onSetLocked(!this.props.callLocked),ref:this.meetingLockRef})))}}var wd=Object(c.b)(e=>({callLocked:b.hd(e),callRecorded:b.id(e),callStreamed:b.jd(e)}),e=>({onBlockAllAudio:t=>e(Object(u.blockAllParticipantAudio)(t)),onBlockAllVideo:t=>e(Object(u.blockAllParticipantVideo)(t)),onSetLocked:t=>e(Object(u.setLocked)(t)),onSetRecording:t=>e(Object(u.setRecording)(t)),onSetStreaming:t=>e(Object(u.setStreaming)(t))}))(kd),Ad=i(775),Dd=i.n(Ad),Pd=i(55),Id=i.n(Pd),Rd=i(45);const Bd="@request-cancel/EXPLICITLY_CANCELLED",Ld="@request-cancel/JWT_INVALID",xd="@request-cancel/JWT_EXPIRED",Fd=d.getStorageVariable(_.a.ELTANIN_ADDRESS),Vd=d.getStorageVariable(_.a.ELTANIN_PORT),Ud={baseUrlPath:"https://".concat(Fd,":").concat(Vd,"/api")},Hd=Id.a.create({method:"get",baseURL:Ud.baseUrlPath,timeout:3e5,responseType:"json"});function Gd(e){return t=t=>e(t.message),e=>{Id.a.isCancel(e)&&e.message!==Bd&&Rd.b.dispatch(Object(fe.k)(Oc.a.JWT_EXPIRED)),t(e)};var t}Hd.interceptors.response.use(void 0,e=>{if(!Id.a.isCancel(e)&&e.response&&e.response.status===vl.a.UNAUTHORIZED&&e.config.headers.Authorization)throw new Id.a.Cancel(Ld);return new Promise((t,i)=>{!function e(t,i,a,n){if(n<=0||!t||!t.config||t.config.retryDisabled||!t.response||t.response.status!==vl.a.SERVICE_UNAVAILABLE)return Object(we.d)("Eltanin request failed: ",{message:t.message,response:t.response&&t.response.data,status:t.response&&t.response.status,url:t.config&&t.config.url}),a(t);const s=1e3*Math.pow(2,4-n),o=Math.random()*s,r=t.config;return setTimeout(()=>{Id.a.request(r).then(i).catch(t=>e(t,i,a,n-1))},o)}(e,t,i,4)})}),Hd.interceptors.request.use(e=>{if(Ud.baseUrlPath===e.baseURL){const t=d.getStorageVariable(_.a.ELTANIN_JWT);if(t){if(t.isExpired)throw new Id.a.Cancel(xd);e.headers.Authorization="Bearer ".concat(t)}}return e});var Wd=Hd;const zd=e=>{const t=Object(J.a)(),i=new URLSearchParams;t&&i.set("callId",t);const a=i.toString(),n="/fileshare/uploads".concat(a?"?".concat(a):"");return new Promise((t,i)=>{Wd.post(n,e,{headers:{"content-Type":"multipart/form-data"}}).then(e=>{if(e.status!==vl.a.OK)return i("FILE UPLOAD FAILED");t(function(e){const t=[];for(const i of e)t.push(i);return Object(B.sendFileDetails)(t)}(e.data))}).catch(e=>{i({message:e.message,response:e.response&&e.response.data.detail})})})},Jd=(e,t)=>{const i="/fileshare/download".concat(encodeURIComponent(e));return new Promise((e,a)=>{Wd.get(i,{responseType:"blob"}).then(i=>{if(i.status!==vl.a.OK||!i.data)return a("Could not get meetings.");const n=document.createElement("a"),s=new Blob([i.data]);n.href=URL.createObjectURL(s),n.download=t,document.body.appendChild(n),n.click(),e(i.data)}).catch(async e=>{const t=e.response&&JSON.parse(await e.response.data.text());a({message:e.message,response:e.response&&t.detail})})})};var Kd=i(44);const Yd=(e,t,i)=>async a=>{Object(Kd.c)().then(()=>a(e&&""===t?Zd(e,!1):lp(t,i,!1)))},qd=e=>t=>{t({type:g.V,deleteFileSuccess:e})},Qd=e=>async t=>{try{return await(i=e,new Promise((e,t)=>{Wd.delete("/fileshare/remove".concat(encodeURIComponent(i))).then(i=>{if(i.status!==vl.a.OK)return t("Could not delete file");e()}).catch(Gd(t))})),t(qd(!0))}catch(e){return t(qd(!1))}var i},Zd=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return async i=>{i(op());try{return await zd(e),i(np(!0))}catch(a){return a.message&&void 0===a.status&&a.message.toString()===k.g.NETWORK_ERROR?i({type:g.Pc,isFileUpload:!0}):a.response.toString()===k.g.INVALID_TOKEN&&t?i(Yd(e,"","")):i(np(!1,a.response.toString()))}}},Xd=(e,t,i)=>{const a=ap(e,t,i);return async e=>{try{await(e=>{const t=Object(J.c)(),i=Object(J.a)(),a=new URLSearchParams;i&&a.set("callId",i),t&&a.set("ownerId",t);const n=a.toString(),s="/survey/save".concat(n?"?".concat(n):"");return new Promise((t,i)=>{Wd.post(s,e).then(e=>{if(e.status!==vl.a.OK)return i("SURVEY SAVE FAILED");t("solved")}).catch(e=>{i({message:e.message,response:e.response&&e.response.data.detail})})})})(a)}catch(t){if(t.message&&void 0===t.status&&t.message.toString()===k.g.NETWORK_ERROR)return e({type:g.Pc,isFileUpload:!0})}}},$d=e=>async t=>{try{await(e=>{const t=Object(J.a)(),i=new URLSearchParams;t&&i.set("callId",t),e&&i.set("surveyId",e[0].surveyId);const a=i.toString(),n="/survey/submit_survey".concat(a?"?".concat(a):"");return new Promise((t,i)=>{Wd.post(n,e).then(e=>{if(e.status!==vl.a.OK)return i("SURVEY SUBMIT FAILED");t("solved")}).catch(e=>{i({message:e.message,response:e.response&&e.response.data.detail})})})})(e)}catch(e){Object(s.reject)(e)}},ep=e=>async t=>{try{return await(e=>{const t=new URLSearchParams,i=Object(J.a)();e&&t.set("surveyId",e),i&&t.set("callId",i);const a=t.toString(),n="/survey/launch".concat(a?"?".concat(a):"");return new Promise((e,t)=>{Wd.post(n).then(i=>{if(i.status!==vl.a.OK)return t("SURVEY LAUNCH FAILED");e("solved")}).catch(e=>{t({message:e.message,response:e.response&&e.response.data.detail})})})})(e),t(sp(!0))}catch(e){return t(sp(!1))}},tp=e=>async t=>{try{await(e=>{const t=Object(J.a)();return new Promise((i,a)=>{const n="/survey/delete/".concat(t,"/").concat(e);Wd.delete(n).then(e=>{if(e.status!==vl.a.OK)return a("Could not delete survey");i()}).catch(Gd(a))})})(e)}catch(e){return t(qd(!1))}},ip=e=>async t=>{try{await(e=>{const t=new URLSearchParams,i=Object(J.a)();e&&t.set("surveyId",e),i&&t.set("callId",i);const a=t.toString(),n="/survey/end".concat(a?"?".concat(a):"");return new Promise((e,t)=>{Wd.post(n).then(i=>{if(i.status!==vl.a.OK)return t("SURVEY END FAILED");e("solved")}).catch(e=>{t({message:e.message,response:e.response&&e.response.data.detail})})})})(e)}catch(e){return t(qd(!1))}},ap=(e,t,i)=>{let a={};e.forEach(e=>{a=Object.assign({},e.options),e.options=a});return[{surveyId:i||"0",surveyName:t,surveyData:e,ownerId:Object(J.b)(),timeStamp:new Date}]},np=(e,t)=>i=>{i({type:g.te,shareFileSuccess:e,errorMessage:t})},sp=e=>t=>{t({type:g.Ke,launchSurveySuccess:e})},op=()=>e=>{e({type:g.se})},rp=()=>e=>{e({type:g.cc})},lp=function(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return async a=>{a(rp());try{return await Jd(e,t),a(cp(!0))}catch(n){return n.message&&void 0===n.status&&n.message.toString()===k.g.NETWORK_ERROR?a({type:g.Pc,isFileUpload:!1}):n.response.toString()===k.g.INVALID_TOKEN&&i?a(Yd("",e,t)):a(cp(!1,n.response.toString()))}}},cp=(e,t)=>i=>{i({type:g.dc,downloadFileSuccess:e,errorMessage:t})};var dp=i(776),pp=i.n(dp);class hp extends r.PureComponent{constructor(e){super(e)}render(){const e=this.props.file.participantGuid===Object(J.c)();return this.props.file.fileUploadMetaData.map((t,i)=>r.createElement("div",{className:pp.a.fileMessage,key:i,id:this.props.id,"data-test":this.props["data-test"],ref:this.props.divRef},!this.props.combineWithPreviousFile&&0===i&&this.renderSenderDetails(e),r.createElement("div",{className:pp.a.fileViewContainer},r.createElement("div",{className:pp.a.fileViewType},this.mapFileIcon(t.fileType)),r.createElement("div",{className:pp.a.fileViewContent},r.createElement("div",{className:pp.a.fileViewAltContentTopSection},r.createElement("div",{className:pp.a.fileViewAltContentNameSection},r.createElement("p",null,t.fileName)),r.createElement("div",{className:pp.a.fileViewAltContentActions},this.props.isDownloadingInProgress&&t.fileUrl===this.props.isFileDownloading?r.createElement($e.a,{className:pp.a.downloadingIndicator}):r.createElement(Q.c,{className:pp.a.downloadIcon,title:Object(z.Translate)("download_file_button_tooltip"),onClick:()=>this.props.onDownloadButtonClick(t.fileUrl,t.fileName)},r.createElement(fo,null)))),r.createElement("div",{className:pp.a.fileViewContentBottomSection},r.createElement("p",null,this.CalculateFileSize(t.fileSize)))))))}renderSenderDetails(e){return e?r.createElement("div",{className:pp.a.fileViewSenderDetailWrapper},r.createElement("div",{className:pp.a.selfAvatar},r.createElement(vo,null)),r.createElement("span",{className:pp.a.messageDetail},"".concat(Object(z.Translate)("participant_subname_self")," - ").concat(this.props.file.timestampText))):r.createElement("div",{className:pp.a.fileViewSenderDetailWrapper},r.createElement(zc.a,{className:pp.a.avatar,details:this.props.file.avatar,title:this.props.file.username}),r.createElement("span",{className:pp.a.messageDetail,title:this.props.file.username},"".concat(this.props.file.displayName," - ").concat(this.props.file.timestampText)))}CalculateFileSize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if("0"===e.toString())return"0 Bytes";const i=t<0?0:t,a=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,a)).toFixed(i))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][a]}mapFileIcon(e){return e.includes("video/")?r.createElement(Ro,null):e.includes("audio/")?r.createElement(Io,null):e.includes("image/")?r.createElement(Bo,null):e.includes("pdf")?r.createElement(Lo,null):e.includes("zip")?r.createElement(xo,null):["text/plain","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword","application/rtf"].includes(e)?r.createElement(Fo,null):r.createElement(Po,null)}}var up=hp,mp=i(777),gp=i.n(mp),_p=i(778),bp=i.n(_p);var Sp=e=>{let{className:t="",description:i,leftOnClick:a,centerOnClick:n,rightOnClick:s,leftButtonName:o,centerButtonName:l,rightButtonName:c}=e;return r.createElement(r.Fragment,null,r.createElement("section",{className:[bp.a.notification,t].filter(Boolean).join(" ")},r.createElement("div",{className:bp.a.dialogButtonContainer},r.createElement("div",{className:bp.a.dialogIcon},r.createElement(vr,null)),r.createElement("p",{className:bp.a.description},i)),r.createElement("div",{className:bp.a.dialogButtons},o&&r.createElement(q.a,{className:bp.a.cancelButton,onClick:a},o),l&&r.createElement(q.a,{onClick:n},l),c&&r.createElement(q.a,{onClick:s,"aria-label":Object(z.Translate)("dialog_cancel")},c))))};var vp=r.forwardRef((e,t)=>{const i=Array.from(e.files).map((t,i)=>{return r.createElement("div",{className:gp.a.newFileContainer,key:i},r.createElement("div",{className:gp.a.newFileType},(a=t.type).includes("video/")?r.createElement(Ro,null):a.includes("audio/")?r.createElement(Io,null):a.includes("image/")?r.createElement(Bo,null):a.includes("pdf")?r.createElement(Lo,null):a.includes("zip")?r.createElement(xo,null):["text/plain","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword","application/rtf"].includes(a)?r.createElement(Fo,null):r.createElement(Po,null)),r.createElement("div",{className:gp.a.newFileContent},r.createElement("div",{className:gp.a.newFileContentTopSection},r.createElement("div",{className:gp.a.newFileContentNameSection},r.createElement("p",null,t.name)),r.createElement("div",{className:gp.a.newFileContentActions},r.createElement(Q.c,{title:Object(z.Translate)("delete_file_button_tooltip"),onClick:()=>e.onDeleteButtonClicked(t)},r.createElement(Co,null)))),r.createElement("div",{className:gp.a.newFileContentBottomSection},r.createElement("p",null,function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";const i=1024,a=t<0?0:t,n=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],s=Math.floor(Math.log(e)/Math.log(i));return parseFloat((e/Math.pow(i,s)).toFixed(a))+" "+n[s]}(t.size)))));var a});return r.createElement(r.Fragment,null,r.createElement("div",{className:gp.a.newFilePluginContainer},r.createElement("div",{className:gp.a.newFileDragDrop},e.isSharingInProgress?r.createElement($e.a,{className:gp.a.loading}):i),r.createElement("div",{className:gp.a.newFileActionArea},r.createElement("input",{title:"file input box",type:"file",id:"file",ref:t,multiple:!0,style:{display:"none"},onChange:e.onChangeFile,onClick:e.onFileInputClick}),r.createElement("div",{className:gp.a.fileActionButtons},r.createElement(q.a,{title:Object(z.Translate)("file_sharing_add_button_title"),className:gp.a.addButton,onClick:e.onAddButtonClick,disabled:e.isSharingInProgress},Object(z.Translate)("file_sharing_add_button_title")),r.createElement(q.a,{title:Object(z.Translate)("file_sharing_share_button_title"),className:gp.a.shareButton,onClick:e.onShareButtonClick,disabled:!e.isShareButtonClick||e.isSharingInProgress},Object(z.Translate)("file_sharing_share_button_title"))))),e.shouldShowDialog&&r.createElement(Sp,{description:Object(z.Translate)("file_delete_button_click_confirmation_dialog"),leftButtonName:Object(z.Translate)("file_sharing_dialog_option_no_button_title"),rightButtonName:Object(z.Translate)("file_sharing_dialog_option_yes_button_title"),leftOnClick:e.onDeleteNoSelected,rightOnClick:e.onDeleteConfirmed}))});function fp(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Cp extends r.PureComponent{constructor(e){super(e),fp(this,"isMounted",!1),fp(this,"fileAreaRef",void 0),fp(this,"fileMessagesSectionRef",void 0),fp(this,"onAddFile",e=>{const t=e.target.files;if(!this.validateFilesSize(t))return t.length>5?this.props.onShowInvalidFileCountNotification():void this.props.onShowInvalidFileSizeNotification();this.validateFileType(t)?this.setState({files:t,fileUrlToDelete:""}):this.props.onShowInvalidFileTypeNotification()}),fp(this,"onFileInputClick",e=>{e.target.value=null}),fp(this,"validateFileType",e=>{let t=0;return Array.from(e).map(e=>{const i=e.name,a=i.lastIndexOf("."),n=i.substring(a+1);Ce.s.includes(n.toLowerCase())&&(t+=1)}),!(t>0)}),fp(this,"validateFilesSize",e=>{let t=0;for(const i of e){const a=e.item(i).size;t+=Math.round(a/1024)}return t<=10240&&e.length<=5}),this.state={isScrolledToBottom:!0,isShareButtonClick:!1,files:[],fileUrlToDelete:"",shouldShowDeleteDialog:!1,fileGettingDownloaded:""},this.onAddButtonClick=this.onAddButtonClick.bind(this),this.validateFilesSize=this.validateFilesSize.bind(this),this.onAddFile=this.onAddFile.bind(this),this.renderFiles=this.renderFiles.bind(this),this.onShareButtonClick=this.onShareButtonClick.bind(this),this.onDeleteButtonClicked=this.onDeleteButtonClicked.bind(this),this.onSharedFileDeleteClicked=this.onSharedFileDeleteClicked.bind(this),this.onFileDownloadClick=this.onFileDownloadClick.bind(this),this.scrollToBottom=this.scrollToBottom.bind(this),this.onFileInputClick=this.onFileInputClick.bind(this),this.onSharedFileDeleteConfirmed=this.onSharedFileDeleteConfirmed.bind(this),this.onDeleteNoConfirmed=this.onDeleteNoConfirmed.bind(this),this.fileAreaRef=r.createRef(),this.fileMessagesSectionRef=r.createRef()}componentDidMount(){this.isMounted=!0,Object(gt.b)()||setTimeout(()=>{this.fileAreaRef&&this.fileAreaRef.current?this.fileAreaRef.current.focus():this.scrollToBottom()},Ce.a)}componentDidUpdate(e,t){e.sharedFiles.length<this.props.sharedFiles.length&&this.state.isScrolledToBottom&&this.scrollToBottom()}componentWillUnmount(){this.isMounted=!1}render(){return r.createElement(r.Fragment,null,r.createElement("header",null,r.createElement("h4",{"data-test":"file_sharing_header"},Object(z.Translate)("file_sharing_header"))),r.createElement("div",{className:Dd.a.filesContainer},r.createElement("section",{className:Dd.a.files,ref:this.fileMessagesSectionRef},this.renderFiles())),this.props.permissions.postFileUpload&&r.createElement("div",{className:"fileBottom"},r.createElement(vp,{onAddButtonClick:this.onAddButtonClick,onShareButtonClick:this.onShareButtonClick,onChangeFile:this.onAddFile,onFileInputClick:this.onFileInputClick,onDeleteButtonClicked:this.onDeleteButtonClicked,onDeleteConfirmed:this.onSharedFileDeleteConfirmed,shouldShowDialog:this.state.shouldShowDeleteDialog,onDeleteNoSelected:this.onDeleteNoConfirmed,files:this.state.files,isSharingInProgress:this.props.isSharingFile,isShareButtonClick:Array.from(this.state.files).length>0,ref:this.fileAreaRef})))}onFileDownloadClick(e,t){this.props.onDownloadFile(e,t),this.setState({fileGettingDownloaded:e})}onAddButtonClick(){this.fileAreaRef.current.click(),this.setState({files:[],fileUrlToDelete:""})}renderFiles(){return this.props.sharedFiles.length?this.props.sharedFiles.map((e,t)=>{const i=t>0&&this.props.sharedFiles[t-1].participantGuid===e.participantGuid&&this.props.sharedFiles[t-1].username===e.username&&this.props.sharedFiles[t-1].displayName===e.displayName&&this.props.sharedFiles[t-1].timestampText===e.timestampText;return r.createElement(up,{file:e,key:t,onDownloadButtonClick:this.onFileDownloadClick,onDeleteButtonClick:this.onSharedFileDeleteClicked,combineWithPreviousFile:i,isDownloadingInProgress:this.props.isDownloadingFile,isFileDownloading:this.state.fileGettingDownloaded})}):r.createElement("span",{"data-test":"no_files_text",className:Dd.a.noSharedFiles},Object(z.Translate)("meeting_no_files_shared"))}onDeleteButtonClicked(e){let t=Array.from(this.state.files);t=t.filter(t=>t.name!==e.name),this.setState({files:t})}onSharedFileDeleteClicked(e){this.setState({shouldShowDeleteDialog:!0,fileUrlToDelete:e})}onSharedFileDeleteConfirmed(){this.setState({shouldShowDeleteDialog:!1}),this.props.onDeleteSharedFile(this.state.fileUrlToDelete)}onDeleteNoConfirmed(){this.setState({shouldShowDeleteDialog:!1})}onShareButtonClick(){this.props.isSharingFile||this.setState({files:[],fileUrlToDelete:""});const e=new FormData;for(const t of this.state.files)e.append("files",t);this.props.onShareFile(e),this.isMounted&&this.scrollToBottom()}scrollToBottom(){this.fileMessagesSectionRef&&this.fileMessagesSectionRef.current&&(this.fileMessagesSectionRef.current.scrollTop=this.fileMessagesSectionRef.current.scrollHeight)}}var Ep=Object(c.b)(e=>({sharedFiles:Object(b.nc)(e),meetingID:Object(b.ub)(e),isSharingFile:Object(b.Td)(e),isDownloadingFile:Object(b.kd)(e)}),e=>({onShareFile:t=>e(Zd(t)),onDownloadFile:(t,i)=>e(lp(t,i)),onDeleteSharedFile:t=>e(Qd(t)),onShowInvalidFileSizeNotification:()=>e(Object(ve.z)()),onShowInvalidFileCountNotification:()=>e(Object(ve.y)()),onShowInvalidFileTypeNotification:()=>e(Object(ve.A)())}))(Cp),Tp=i(779),Op=i.n(Tp),Np=i(780),yp=i.n(Np);class jp extends r.Component{constructor(e){var t,i,a;super(e),t=this,i="internalToggleListRef",a=l.a.createRef(),i in t?Object.defineProperty(t,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[i]=a,this.state={isExpanded:!0},this.onToggleSwitch=this.onToggleSwitch.bind(this)}focus(){this.internalToggleListRef.current&&this.internalToggleListRef.current.focus()}render(){const e=this.state.isExpanded?Object(z.Translate)("collapsible_list_expanded",this.props.title):Object(z.Translate)("collapsible_list_collapsed",this.props.title);return l.a.createElement("div",null,l.a.createElement("div",{className:yp.a.headerTitle},l.a.createElement("button",{"aria-label":e,title:e,className:yp.a.titleAndArrow,onClick:this.onToggleSwitch,ref:this.internalToggleListRef},this.state.isExpanded?l.a.createElement(ao,{className:yp.a.dropdownIcon}):l.a.createElement(io,{className:yp.a.dropdownIcon}),l.a.createElement("h6",null,this.props.title)),l.a.createElement("span",{className:yp.a.headerIcon},this.props.headerIcon)),this.state.isExpanded&&this.renderContent())}renderContent(){return l.a.createElement("div",{className:yp.a.contentWrapper},this.props.children)}onToggleSwitch(){this.setState(e=>({isExpanded:!e.isExpanded}))}}var Mp=i(41),kp=i(328),wp=i(134),Ap=i(138);function Dp(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Pp extends r.PureComponent{constructor(e){super(e),Dp(this,"textAreaRef",void 0),Dp(this,"timer",void 0),Dp(this,"firstCollapsibleRef",void 0),Dp(this,"mediaStatisticsIndex",this.props.accessMethods.length+1),this.state={time:0},this.textAreaRef=r.createRef(),this.firstCollapsibleRef=r.createRef(),this.onCopyJoinLink=this.onCopyJoinLink.bind(this),this.props.startTime&&(this.timer=this.startTimer(this.props.startTime))}componentDidUpdate(e){e.startTime||!this.props.startTime||this.timer||(this.timer=this.startTimer(this.props.startTime))}componentWillUnmount(){this.timer&&clearInterval(this.timer)}componentDidMount(){setTimeout(()=>{this.firstCollapsibleRef&&this.firstCollapsibleRef.current&&this.firstCollapsibleRef.current.focus()},Ce.a)}render(){return r.createElement(r.Fragment,null,r.createElement("header",{className:Op.a.joinInfoHeader},r.createElement("h4",{"data-test":"call_info_header"},Object(z.Translate)("call_sidebar_call_info_header"))),this.renderContent(),r.createElement("textarea",{ref:this.textAreaRef,readOnly:!0,className:Op.a.copyTextArea,"aria-hidden":!0}))}renderContent(){if(this.props.accessMethods)return r.createElement(r.Fragment,null,this.renderMeetingInformation(),this.props.accessMethods.filter(e=>e.visible).map((e,t)=>this.renderJoinInformation(e,e.name,t)),this.props.currentJoinMode!==wr.a.PRESENTATION_ONLY&&this.props.mediaStats&&this.renderMediaStatsStatus(this.props.mediaStats))}renderMeetingInformation(){const e=Object(z.Translate)("call_sidebar_call_info_meeting_section_space_name_label"),t=Object(z.Translate)("call_sidebar_call_info_meeting_section_duration_label");return this.props.spaceName||this.props.startTime?r.createElement(r.Fragment,null,r.createElement("h5",{className:Op.a.sectionHeading},Object(z.Translate)("call_sidebar_call_info_meeting_section_header")),r.createElement("div",{className:Op.a.meetingInfo},this.props.spaceName&&this.renderPair(e,this.props.spaceName),this.props.startTime&&this.renderPair(t,Object(kp.j)(this.state.time)))):void 0}renderEmailIcon(e){return r.createElement(Q.c,{title:Object(z.Translate)("access_method_share_invite",e.name),className:Op.a.emailIconButton,onClick:()=>this.props.onShareInvitationClick(e)},r.createElement(Is,null))}renderJoinInformation(e,t,i){const a=r.createRef(),{meetingId:n,uri:s,joinLink:o,passcode:l}=e,c=Object(z.Translate)("space_join_link"),d=Object(z.Translate)("space_phone_number"),p=Object(z.Translate)("landing_join_info_meeting_id_title"),h=Object(z.Translate)("landing_join_info_passcode_title"),u=Object(z.Translate)("landing_join_info_uri_title"),m=this.props.nonMemberConference&&this.props.nonMemberConference.ivrNumbers||this.props.ivrNumbers;return r.createElement(jp,{key:e.guid,headerIcon:this.renderEmailIcon(e),title:t,ref:0===i?this.firstCollapsibleRef:null},r.createElement("div",{"data-test":"accessMethod_".concat(e.guid),className:[Op.a.joinInfo,Op.a.collapsibleWrapper].join(" ")},o&&this.renderPair(c,this.renderCopyJoinLink(o,a),!0),m&&this.renderPair(d,this.renderIvrNumbers(),!1,!0),n&&this.renderPair(p,n||""),this.renderPair(h,this.renderPasscode(l)),s&&this.renderPair(u,s)))}renderMediaStatsStatus(e){return r.createElement(jp,{key:this.mediaStatisticsIndex,title:Object(z.Translate)("call_sidebar_call_info_meeting_section_media_stats_heading"),ref:0===this.mediaStatisticsIndex?this.firstCollapsibleRef:null},r.createElement("div",{className:[Op.a.mediaStats,Op.a.collapsibleWrapper].join(" ")},r.createElement("div",{className:Op.a.mediaStatsNotificationStatus},r.createElement(fl.a,{checked:this.props.isMediaStatsNotificationMuted,"data-test":"media_stats_notification_mute_checkbox",id:"media_stats_notification_mute_checkbox",onChange:e=>this.props.onMediaStatsNotificationMuteStatusChange(e.target.checked)}),r.createElement("label",{className:Op.a.muteStatusLabel,htmlFor:"media_stats_notification_mute_checkbox"},Object(z.Translate)("call_sidebar_call_info_meeting_section_media_stats_notification_mute"))),r.createElement("section",{className:Op.a.mediaStatsHealthMessage},this.props.mediaStatsHealthStatus===k.i.HEALTH_STATUS_GOOD&&r.createElement("div",{className:Op.a.mediaStatsGoodMessage},Object(z.Translate)("health_status_good_message_notification")),this.props.mediaStatsHealthStatus===k.i.HEALTH_STATUS_BAD&&r.createElement("div",{className:Op.a.mediaStatsBadMessage},Object(z.Translate)("health_status_bad_message_audiopriorflagdisabled_notification")),this.props.mediaStatsHealthStatus===k.i.HEALTH_STATUS_POOR&&r.createElement("div",{className:Op.a.mediaStatsPoorMessage},Object(z.Translate)("health_status_poor_message_notification_modified"))),r.createElement("div",{className:Op.a.statsValues},r.createElement("div",{className:Op.a.sendRecieveHeading},r.createElement("span",{className:[Op.a.sendHeading,Object(Ye.a)()&&Op.a.headingRightAligned].filter(Boolean).join(" ")},Object(z.Translate)("call_sidebar_call_info_send_header")),r.createElement("span",{className:[Op.a.receiveHeading,Object(Ye.a)()&&Op.a.headingRightAligned].filter(Boolean).join(" ")},Object(z.Translate)("call_sidebar_call_info_receive_header"))),r.createElement("span",{className:Op.a.audioVideoHeading},Object(z.Translate)("call_sidebar_controls_audio_label")),r.createElement("div",{className:[Op.a.stats,Object(Ye.a)()&&Op.a.statsRightAligned].filter(Boolean).join(" ")},r.createElement("span",null,Object(z.Translate)("call_sidebar_call_info_jitter_header")),r.createElement("span",{"data-test":"audio_jitter_send_value"},"-"),r.createElement("span",{"data-test":"audio_jitter_receive_value"},e.audioJitter?e.audioJitter+" ms":"0 ms"),r.createElement("span",null,Object(z.Translate)("call_sidebar_call_info_packet_loss_header")),r.createElement("span",{"data-test":"audio_packet_loss_send_value"},e.audioSendPacketsLost?e.audioSendPacketsLost+" %":"0 %"),r.createElement("span",{"data-test":"audio_packet_loss_receive_value"},e.audiorecvPacketsLost?e.audiorecvPacketsLost+" %":"0 %"),r.createElement("span",null,Object(z.Translate)("call_sidebar_call_info_codec_negotiated_header")),r.createElement("span",{"data-test":"audio_codec_send_value"},e.audioSendCodec?e.audioSendCodec:"-"),r.createElement("span",{"data-test":"audio_codec_receive_value"},e.audioReceiveCodec?e.audioReceiveCodec:"-")),r.createElement("span",{className:Op.a.audioVideoHeading},Object(z.Translate)("call_sidebar_controls_video_label")),r.createElement("div",{className:[Op.a.stats,Object(Ye.a)()&&Op.a.statsRightAligned].filter(Boolean).join(" ")},r.createElement("span",null,Object(z.Translate)("call_sidebar_call_info_jitter_header")),r.createElement("span",{"data-test":"video_jitter_send_value"},"-"),r.createElement("span",{"data-test":"video_jitter_receive_value"},e.videoRecvJitter?e.videoRecvJitter+" ms":"0 ms"),r.createElement("span",null,Object(z.Translate)("call_sidebar_call_info_packet_loss_header")),r.createElement("span",{"data-test":"video_packet_loss_send_value"},e.videoSendPacketsLost?e.videoSendPacketsLost+" %":"0 %"),r.createElement("span",{"data-test":"video_packet_loss_receive_value"},e.videoRecvPacketsLost?e.videoRecvPacketsLost+" %":"0 %"),r.createElement("span",null,Object(z.Translate)("call_sidebar_call_info_codec_negotiated_header")),r.createElement("span",{"data-test":"video_codec_send_value"},e.videoSendCodec?e.videoSendCodec:"-"),r.createElement("span",{"data-test":"video_codec_receive_value"},e.videoReceiveCodec?e.videoReceiveCodec:"-"),r.createElement("span",null,Object(z.Translate)("call_sidebar_call_info_video_resolution_header")),r.createElement("span",{"data-test":"video_resolution_send_value"},e.videoSendFrameHeight?e.videoSendFrameHeight+"p":"-"),r.createElement("span",{"data-test":"video_resolution_receive_value"},e.videoRecvFrameHeight?e.videoRecvFrameHeight+"p":"-"),r.createElement("span",null,Object(z.Translate)("call_sidebar_call_info_frames_per_second_header")),r.createElement("span",{"data-test":"video_frames_send_value"},e.videoSendFramesPerSecond?e.videoSendFramesPerSecond:0),r.createElement("span",{"data-test":"video_frames_receive_value"},e.videoRecvFramesPerSecond?e.videoRecvFramesPerSecond:0)),(this.props.localContentStreamId||this.props.remoteContentStreamId)&&r.createElement(r.Fragment,null,r.createElement("span",{className:Op.a.audioVideoHeading},Object(z.Translate)("call_sidebar_controls_content_label")),r.createElement("div",{"data-test":"content_share_data",className:[Op.a.stats,Object(Ye.a)()&&Op.a.statsRightAligned].filter(Boolean).join(" ")},r.createElement("span",null,Object(z.Translate)("call_sidebar_call_info_jitter_header")),r.createElement("span",{"data-test":"video_jitter_send_value"},"-"),r.createElement("span",{"data-test":"video_jitter_receive_value"},e.presentationRecvJitter?e.presentationRecvJitter+" ms":"-"),r.createElement("span",null,Object(z.Translate)("call_sidebar_call_info_packet_loss_header")),r.createElement("span",{"data-test":"video_packet_loss_send_value"},e.presentationSendPacketLost?e.presentationSendPacketLost+" %":"0 %"),r.createElement("span",{"data-test":"video_packet_loss_receive_value"},e.presentationRecvPacketLost?e.presentationRecvPacketLost+" %":"0 %"),r.createElement("span",null,Object(z.Translate)("call_sidebar_call_info_codec_negotiated_header")),r.createElement("span",{"data-test":"video_codec_send_value"},e.presentationSendCodec?e.presentationSendCodec:"-"),r.createElement("span",{"data-test":"video_codec_receive_value"},e.presentationRecvCodec?e.presentationRecvCodec:"-"),r.createElement("span",null,Object(z.Translate)("call_sidebar_call_info_video_resolution_header")),r.createElement("span",{"data-test":"video_resolution_send_value"},e.presentationSendFrameHeight?e.presentationSendFrameHeight+"p":"-"),r.createElement("span",{"data-test":"video_resolution_receive_value"},e.presentationRecvFrameHeight?e.presentationRecvFrameHeight+"p":"-"),r.createElement("span",null,Object(z.Translate)("call_sidebar_call_info_frames_per_second_header")),r.createElement("span",{"data-test":"video_frames_send_value"},e.presentationSendFramesPerSecond?e.presentationSendFramesPerSecond:"-"),r.createElement("span",{"data-test":"video_frames_receive_value"},e.presentationRecvFramesPerSecond?e.presentationRecvFramesPerSecond:"-"))))))}renderPair(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const n=[Op.a.itemValue,i&&Op.a.allowOverflow].filter(Boolean).join(" "),s=a?"div":"p";return r.createElement(r.Fragment,null,r.createElement("label",{className:Op.a.itemName},e),r.createElement(s,{"data-test":e.toLowerCase().replace(" ","_"),className:n},t))}renderCopyJoinLink(e,t){const i={failure:Object(z.Translate)("space_join_link_failure"),success:Object(z.Translate)("space_join_link_success")};return r.createElement(q.a,{className:Op.a.copyJoinLinkButton,onClick:this.onCopyJoinLink.bind(null,e,t),ref:t,role:"link",tooltips:i},Object(z.Translate)("space_join_link_copy"))}onCopyJoinLink(e,t){let i=!1;void 0!==e&&(e&&this.textAreaRef&&this.textAreaRef.current&&(this.textAreaRef.current.value=e,this.textAreaRef.current.select(),this.textAreaRef.current.setSelectionRange(0,this.textAreaRef.current.value.length),i=document.queryCommandSupported&&document.queryCommandSupported("copy")&&document.execCommand("copy")),t.current&&(i?t.current.showTooltip(Ce.p.SUCCESS):t.current.showTooltip(Ce.p.FAILURE)))}renderIvrNumbers(){return this.props.nonMemberConference&&this.props.nonMemberConference.ivrNumbers?r.createElement("span",{className:Op.a.spanIvrNumbers,"data-test":"join_info_ivr_numbers"},r.createElement(Ap.a,{ivrNumbers:this.props.nonMemberConference.ivrNumbers})):this.props.ivrNumbers?r.createElement("span",{className:Op.a.spanIvrNumbers,"data-test":"join_info_ivr_numbers"},r.createElement(Ap.a,{ivrNumbers:this.props.ivrNumbers})):""}renderPasscode(e){return e?r.createElement(wp.a,{"aria-label":Object(z.Translate)("join_meeting_passcode"),className:Op.a.hideableSpanValue,"data-test":"access_method_passcode",allowToggle:!0,text:e}):Object(z.Translate)("space_edit_passcode_none")}startTimer(e){const t=new Date(e);return setInterval(()=>{this.setState({time:Math.abs(Date.now()-t.getTime())})},1)}}var Ip=Object(c.b)(e=>({accessMethods:b.G(e),ivrNumbers:b.X(e),nonMemberConference:b.Ib(e),spaceName:b.s(e),startTime:b.t(e),mediaStats:b.ob(e),mediaStatsHealthStatus:b.pb(e),currentJoinMode:b.gc(e),localContentStreamId:b.fb(e),remoteContentStreamId:b.Vb(e),isMediaStatsNotificationMuted:b.qb(e)}),e=>({onShareInvitationClick:t=>e(Object(Mp.y)(t)),onMediaStatsNotificationMuteStatusChange:t=>e(Object(u.setMediaStatsNotificationStatus)(t))}))(Pp),Rp=i(781),Bp=i.n(Rp);class Lp extends r.PureComponent{constructor(e){var t,i,a;super(e),a=void 0,(i="layoutRef")in(t=this)?Object.defineProperty(t,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[i]=a,this.layoutRef=r.createRef(),this.onLayoutSelected=this.onLayoutSelected.bind(this)}componentDidMount(){setTimeout(()=>{this.layoutRef&&this.layoutRef.current&&this.layoutRef.current.focus()},Ce.a)}render(){return r.createElement(r.Fragment,null,r.createElement("header",null,r.createElement("h4",null,Object(z.Translate)("call_sidebar_layouts_header"))),r.createElement("section",{"data-test":"layouts_list",className:Bp.a.layoutSelection},this.renderLayoutOption(w.a.ALL_EQUAL,Object(z.Translate)("layout_all_equal"),Jo),this.renderLayoutOption(w.a.SPEAKER_LARGE,Object(z.Translate)("layout_speaker_large"),Ko),this.renderLayoutOption(w.a.SPEAKER_ONLY,Object(z.Translate)("layout_speaker_only"),Yo),this.renderLayoutOption(w.a.AUDIO_ONLY,Object(z.Translate)("layout_audio_only"),qo),this.renderLayoutOption(w.a.CUSTOM,Object(z.Translate)("layout_custom"),co),this.renderLayoutOption(w.a.PRESENTATION,Object(z.Translate)("layout_presentation"),Qo),this.renderLayoutOption(w.a.PRESENTATION_AND_VIDEO,Object(z.Translate)("layout_presentation_and_video"),Zo)))}renderLayoutOption(e,t,i){const a=!this.props.availableLayouts.includes(e),n=e===this.props.selectedLayout;return r.createElement("div",{className:Bp.a.layoutOption},r.createElement(Q.c,{toggled:n,"aria-label":t,className:[Bp.a.layoutButton,n&&Bp.a.selected].filter(Boolean).join(" "),disabled:a,ref:n?this.layoutRef:null,onClick:()=>this.onLayoutSelected(e)},r.createElement(i,null)),r.createElement("span",{className:[Bp.a.layoutName,a&&Bp.a.disabled].filter(Boolean).join(" ")},t))}onLayoutSelected(e){e!==this.props.selectedLayout&&this.props.onLayoutSelected(e)}}var xp=Object(c.b)(e=>({selectedLayout:b.ic(e)}),e=>({onLayoutSelected:t=>e(Object(u.selectLayout)(t))}))(Lp),Fp=i(782),Vp=i.n(Fp),Up=i(783),Hp=i.n(Up);class Gp extends r.PureComponent{constructor(e){super(e)}render(){const e=this.props.note.participantGuid===Object(J.c)();return r.createElement("div",{className:Hp.a.meetingNotes,id:this.props.id,"data-test":this.props["data-test"],ref:this.props.divRef},r.createElement("div",{className:Hp.a.noteDetailContainer},this.renderSenderDetails(e),this.props.canEditNote&&this.renderEditNoteButton()),r.createElement("p",{className:Hp.a.noteBody},this.props.note.body))}renderSenderDetails(e){if(e)return r.createElement(r.Fragment,null,r.createElement("span",{className:Hp.a.noteDetail},Object(z.Translate)("notes_published_info",this.props.note.timestampText,Object(z.Translate)("participant_subname_self"))));const t=this.props.note.guest?Object(z.Translate)("participant_subname_guest"):this.props.note.username;return r.createElement(r.Fragment,null,r.createElement("span",{className:Hp.a.noteDetail,title:t},Object(z.Translate)("notes_published_info",this.props.note.timestampText,this.props.note.displayName)))}renderEditNoteButton(){return r.createElement(Q.a,{className:Hp.a.editButtonStyle,title:Object(z.Translate)("edit_notes"),disabled:!1,onClick:this.props.onEditdButtonClick},r.createElement(X.m,null))}}var Wp=Gp,zp=i(784),Jp=i.n(zp);var Kp=r.forwardRef((e,t)=>{const[i,a]=r.useState(!1),[n,s]=r.useState(!1);return r.createElement(r.Fragment,null,r.createElement("div",{className:[Jp.a.notesForm,Jp.a.desktop].filter(Boolean).join(" ")},r.createElement("textarea",{className:Jp.a.notesTextArea,ref:t,placeholder:Object(z.Translate)("notes_text_area_placeholder"),value:e.value,onChange:e.onChange,onKeyDown:i?()=>{}:e.onKeyDown,onCompositionStart:()=>a(!0),onCompositionEnd:()=>a(!1)})),(!e.shouldShowDialog||n)&&r.createElement("span",{className:Jp.a.noteSaveDiscardButtons},r.createElement(q.a,{"aria-label":Object(z.Translate)("notes_discard"),className:Jp.a.cancelButton,disabled:!e.value||e.value===e.meetingNotes.body,onClick:e.onDiscardButtonClick},Object(z.Translate)("notes_discard")),r.createElement(q.a,{"aria-label":Object(z.Translate)("notes_save"),disabled:!e.value,onClick:e.onSaveButtonClick},Object(z.Translate)("notes_save")),r.createElement(q.a,{"aria-label":Object(z.Translate)("notes_publish"),autoFocus:!0,disabled:!e.value||e.value===e.meetingNotes.body,onClick:e.onSendButtonClick},Object(z.Translate)("notes_publish"))),!n&&e.shouldShowDialog&&r.createElement(Sp,{description:Object(z.Translate)("notes_edit_mode_confirmation_dialog_text",e.meetingNotes.displayName),leftButtonName:Object(z.Translate)("notes_load_new"),rightButtonName:Object(z.Translate)("notes_keep_mine"),leftOnClick:e.onLoadNewButtonClick,rightOnClick:()=>s(!0)}))});function Yp(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class qp extends r.PureComponent{constructor(e){super(e),Yp(this,"meetingNotesSectionRef",void 0),Yp(this,"textAreaRef",void 0),Yp(this,"isMounted",!1),this.state={isSendingNotes:!1,newNote:"",isTakeNoteClicked:!1,isEditing:!1,shouldShowLoadNewDialog:!1,loadNew:!1,isInDraftMode:!1},this.meetingNotesSectionRef=r.createRef(),this.textAreaRef=r.createRef(),this.renderMeetingNotes=this.renderMeetingNotes.bind(this),this.onMessageTextAreaChange=this.onMessageTextAreaChange.bind(this),this.onMessageTextAreaKeyDown=this.onMessageTextAreaKeyDown.bind(this),this.onSendButtonClick=this.onSendButtonClick.bind(this),this.onEditdButtonClick=this.onEditdButtonClick.bind(this),this.onDraftButtonClick=this.onDraftButtonClick.bind(this),this.onDiscardButtonClick=this.onDiscardButtonClick.bind(this),this.onSaveButtonClick=this.onSaveButtonClick.bind(this),this.sendMessage=this.sendMessage.bind(this),this.setMessageTextAreaValue=this.setMessageTextAreaValue.bind(this),this.onTakeNoteClick=this.onTakeNoteClick.bind(this),this.onLoadNewClick=this.onLoadNewClick.bind(this)}componentDidMount(){this.isMounted=!0,Object(gt.b)()||setTimeout(()=>{this.textAreaRef&&this.textAreaRef.current&&this.textAreaRef.current.focus()},Ce.a)}componentWillUnmount(){this.isMounted=!1}componentDidUpdate(e){e.meetingNotes.body===this.props.meetingNotes.body||this.state.isInDraftMode||this.setState({shouldShowLoadNewDialog:!0})}render(){const e=d.getStorageVariable(_.a.MEETING_NOTES_STORE);return r.createElement(r.Fragment,null,r.createElement("header",null,r.createElement("h4",{"data-test":"notes_header"},Object(z.Translate)("notes_header"))),(this.state.loadNew||!this.state.isTakeNoteClicked&&!this.state.isEditing)&&r.createElement("div",{className:Vp.a.meetingNotesContainer},r.createElement("section",{className:Vp.a.meetingNotes,ref:this.meetingNotesSectionRef},this.renderMeetingNotes(),this.props.permissions.postNotes&&!this.props.meetingNotes.messageGuid&&r.createElement(q.a,{className:Vp.a.takeNoteButton,onClick:this.onTakeNoteClick},Object(z.Translate)("take_notes")),this.props.permissions.postNotes&&!this.props.meetingNotes.messageGuid&&!!e&&r.createElement(q.a,{className:Vp.a.draftButton,onClick:this.onDraftButtonClick},Object(z.Translate)("draft_notes")))),!!e&&this.props.permissions.postNotes&&this.props.meetingNotes.body&&!this.state.isEditing&&!this.state.isTakeNoteClicked&&r.createElement("span",{className:Vp.a.draftNoteButton},r.createElement(q.a,{onClick:this.onDraftButtonClick},Object(z.Translate)("draft_notes"))),!this.state.loadNew&&(this.state.isEditing||this.state.isTakeNoteClicked)&&r.createElement(Kp,{value:this.state.newNote,meetingNotes:this.props.meetingNotes,onChange:this.onMessageTextAreaChange,onKeyDown:this.onMessageTextAreaKeyDown,onSendButtonClick:this.onSendButtonClick,onDiscardButtonClick:this.onDiscardButtonClick,onSaveButtonClick:this.onSaveButtonClick,loading:this.state.isSendingNotes,disabled:this.state.isSendingNotes,ref:this.textAreaRef,shouldShowDialog:this.state.shouldShowLoadNewDialog,onLoadNewButtonClick:this.onLoadNewClick}))}onLoadNewClick(){this.setState({loadNew:!0,shouldShowLoadNewDialog:!1}),d.removeStorageVariable(_.a.MEETING_NOTES_STORE)}onTakeNoteClick(){this.setState({isTakeNoteClicked:!0}),d.removeStorageVariable(_.a.MEETING_NOTES_STORE)}renderMeetingNotes(){if(!this.props.meetingNotes.messageGuid)return r.createElement("span",{className:Vp.a.noNotes},Object(z.Translate)("no_notes"));const e=this.props.meetingNotes;return r.createElement(Wp,{note:e,key:e.messageGuid,id:"meeting_notes_"+e.messageGuid,"data-test":"meeting_notes_"+e.messageGuid+"_FROM_"+e.participantGuid,onEditdButtonClick:this.onEditdButtonClick,canEditNote:this.props.permissions.postNotes})}onEditdButtonClick(){this.setState({newNote:this.props.meetingNotes.body}),this.setState({loadNew:!1,isEditing:!0,shouldShowLoadNewDialog:!1,isInDraftMode:!1,isTakeNoteClicked:!1})}onDraftButtonClick(){const e=d.getStorageVariable(_.a.MEETING_NOTES_STORE);null!=e&&this.setState({newNote:e,isEditing:!0,shouldShowLoadNewDialog:!1,isInDraftMode:!0,isTakeNoteClicked:!1})}onMessageTextAreaChange(e){const t=e.target.value;this.state.isSendingNotes||Object(dd.b)(t.trim())>=15e3||this.setMessageTextAreaValue(t)}onMessageTextAreaKeyDown(e){}onSendButtonClick(e){e.preventDefault(),this.sendMessage(),this.setState({isEditing:!1,isTakeNoteClicked:!1,shouldShowLoadNewDialog:!1}),d.removeStorageVariable(_.a.MEETING_NOTES_STORE)}onDiscardButtonClick(){this.state.isEditing?this.setMessageTextAreaValue(this.props.meetingNotes.body):this.setMessageTextAreaValue(""),d.removeStorageVariable(_.a.MEETING_NOTES_STORE)}onSaveButtonClick(e){e.preventDefault();const t=Date().toString(),i=this.props.callSpaceName.concat("-"+Object(z.Translate)("notes_header")).concat("-"+t).concat(".txt"),a=document.createElement("a"),n=new Blob([this.state.newNote],{type:"text/plain;charset=utf-8"});a.href=URL.createObjectURL(n),a.download=i,document.body.appendChild(a),a.click(),d.removeStorageVariable(_.a.MEETING_NOTES_STORE)}sendMessage(){if(this.state.isSendingNotes)return;const e=this.state.newNote.trim();if(e){if(Object(dd.b)(e)>=16e3)return;this.setState({isSendingNotes:!0}),this.props.onSendMeetingNotes(e).then(()=>{this.isMounted&&(this.setState({isSendingNotes:!1}),this.setMessageTextAreaValue(""))}).catch(e=>{this.setState({isSendingNotes:!1})})}else this.state.newNote&&this.setMessageTextAreaValue("")}setMessageTextAreaValue(e){this.setState({newNote:e}),(this.state.isEditing||this.state.isTakeNoteClicked)&&this.state.newNote!==this.props.meetingNotes.body&&d.setStorageVariable(_.a.MEETING_NOTES_STORE,e)}}var Qp=Object(c.b)(e=>({meetingNotes:Object(b.vb)(e),callSpaceName:Object(b.s)(e)}),e=>({onSendMeetingNotes:t=>e(Object(u.sendMeetingNote)(t))}))(qp);function Zp(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Xp extends r.PureComponent{constructor(e){super(e),Zp(this,"element",void 0),Zp(this,"participantButtonRef",void 0),this.element=r.createRef(),this.participantButtonRef=r.createRef(),this.onKeyPressed=this.onKeyPressed.bind(this)}componentDidUpdate(e){!e.isSelected&&this.props.isSelected&&this.element&&this.element.current&&this.element.current.scrollIntoView({block:"nearest"}),!this.props.isSelected&&e.isSelected&&!this.props.isAnotherParticipantSelected&&this.participantButtonRef&&this.participantButtonRef.current&&this.participantButtonRef.current.focus()}render(){const e=this.props.participant,t=this.props.isSelected,i=r.createElement(q.a,{className:Vc.a.nameButton,tabIndex:-1,"data-test":this.props.participantDataTestId+"_name","aria-selected":t,ref:this.participantButtonRef,"aria-label":e.displayName},r.createElement("span",{className:Vc.a.name},e.displayName));let a;a=e.guid===this.props.selfParticipantGuid?r.createElement("span",{className:Vc.a.subName}," ",this.props.roleName+" | ",Object(z.Translate)("participant_subname_self")):e.guest?r.createElement("span",{className:Vc.a.subName},this.props.roleName):r.createElement("span",{className:Vc.a.subName},this.props.roleName+" | "," ",e.uri);const n=e.displayName.concat(", "+e.uri);return r.createElement("li",{"data-test":this.props.participantDataTestId,key:e.guid,className:[Vc.a.participant,this.props.participantsCount>1&&Vc.a.moreParticipants].filter(Boolean).join(" "),title:n,onKeyDown:this.onKeyPressed,ref:this.element,tabIndex:0},r.createElement("div",{className:[Vc.a.participantDetails,t&&Vc.a.selected].filter(Boolean).join(" "),onClick:()=>this.props.toggleParticipantSelected(e.guid)},r.createElement(zc.a,{details:e.avatar,className:Vc.a.avatar}),r.createElement("div",{className:[Vc.a.nameContainer,Object(Ye.a)()&&Vc.a.rightAlignedNameContainer].filter(Boolean).join(" ")},i,a),this.props.cameraControlEnabled&&void 0!==this.props.selectedParticipantGuidForCameraControl&&this.props.selectedParticipantGuidForCameraControl===e.guid&&r.createElement(Do,{className:Vc.a.indicator,title:Object(z.Translate)("participant_icon_camera_controlled"),"data-test":this.props.participantDataTestId+"_camera_control_indicator"}),e.handStatus===k.h.Raised&&r.createElement(Gs,{className:Vc.a.indicator,title:Object(z.Translate)("participant_icon_hand_raised"),"data-test":this.props.participantDataTestId+"_raised_hand_indicator"}),e.sharing&&r.createElement("div",{className:Vc.a.indicator,title:e.sharingAudio?Object(z.Translate)("participant_icon_is_sharing_with_audio"):Object(z.Translate)("participant_icon_is_sharing")},r.createElement(ur,{className:Vc.a.sharingIndicator,"data-test":this.props.participantDataTestId+"_sharing_indicator"}),e.sharingAudio&&r.createElement(br,{className:Vc.a.sharingAudioIndicator,"data-test":this.props.participantDataTestId+"_sharing_with_audio_indicator"})),(e.audioOnly||e.videoBlocked)&&r.createElement($s,{className:Vc.a.indicator,title:Object(z.Translate)("participant_icon_is_video_blocked"),"data-test":this.props.participantDataTestId+"_video_blocked_indicator"}),!e.speaking&&!e.audioBlocked&&!e.audioMuted&&r.createElement("span",{className:Vc.a.indicator}),e.speaking&&!e.audioBlocked&&!e.audioMuted&&r.createElement(to,{className:Vc.a.indicator,title:Object(z.Translate)("participant_icon_is_speaking"),"data-test":this.props.participantDataTestId+"_speaking_indicator"}),(e.audioBlocked||e.audioMuted)&&r.createElement(eo,{className:Vc.a.indicator,title:Object(z.Translate)("participant_icon_is_audio_blocked"),"data-test":this.props.participantDataTestId+"_audio_blocked_indicator"}),e.isImportant&&r.createElement(Qs,{className:Vc.a.important,"data-test":this.props.participantDataTestId+"_important_indicator"})),t&&this.props.children)}onKeyPressed(e){"Escape"===e.key&&this.props.isSelected&&(this.props.toggleParticipantSelected(this.props.participant.guid),e.stopPropagation()),"Enter"!==e.key||this.props.isSelected||(e.preventDefault(),this.props.toggleParticipantSelected(this.props.participant.guid)),Object(nd.a)(e)}}var $p=e=>r.createElement(Q.c,{className:[Vc.a.participantModifierButton,e.disabled&&Vc.a.disabled].filter(Boolean).join(" "),onClick:e.onClick,"aria-label":e.text,disabled:e.disabled},r.createElement(e.Icon,null),r.createElement("span",{className:[Vc.a.participantModifierText,e.disabled&&Vc.a.disabled].filter(Boolean).join(" ")},e.text)),eh=i(47);class th extends r.PureComponent{constructor(e){super(e)}render(){if(this.props.accessMethods)return this.isCurrentParticipantRoleVisible()?r.createElement("div",{className:Vc.a.participantChangeRoleButtons},this.props.accessMethods.length>0&&this.props.accessMethods.filter(e=>e.visible&&e.guid!==eh.a).map(e=>this.renderRoleOptions(e))):r.createElement("div",{className:Vc.a.noRoleOptions},r.createElement(vr,{className:Vc.a.infoIcon}),Object(z.Translate)("participant_modifier_no_change_role_options"))}renderRoleOptions(e){return this.props.roleName===e.name?r.createElement("div",{className:Vc.a.isSelected,key:e.guid},r.createElement($p,{key:e.guid,Icon:Js,text:e.name,onClick:()=>Object(u.changeParticipantRole)(this.props.participant.guid,e.guid)})):r.createElement($p,{key:e.guid,Icon:zs,text:e.name,onClick:()=>Object(u.changeParticipantRole)(this.props.participant.guid,e.guid)})}isCurrentParticipantRoleVisible(){var e;let t;return t=this.props.accessMethods.find(e=>e.name===this.props.roleName),!!(void 0!==t&&(null===(e=t)||void 0===e?void 0:e.visible)||this.props.roleName===Object(z.Translate)("members_call_participation_call_leg_profile_space_default"))}}var ih=e=>{const t=e.participant,i=e.isSelf,[a,n]=r.useState(!1),s=Object(r.useRef)(null);function o(e){s.current&&!e.target.closest(".".concat(s.current.className))&&a&&n(!1)}r.useEffect(()=>(document.addEventListener("click",o),()=>{document.removeEventListener("click",o)}));return r.createElement(r.Fragment,null,!i&&t.awaitingActivation&&e.participationPermissions.lockConference&&r.createElement($p,{Icon:fr,text:Object(z.Translate)("participant_modifier_admit"),onClick:()=>e.onAdmitParticipant(t.guid)}),!i&&e.participationPermissions.changeRole&&(()=>{let t=!0;return 1===e.accessMethods.length&&e.accessMethods.map(e=>{t=e.guid!==eh.a}),t})()&&r.createElement($p,{Icon:zs,text:Object(z.Translate)("participant_modifier_change_role"),onClick:()=>n(!a)}),a&&r.createElement(th,{setOpen:n,accessMethods:e.accessMethods,participant:t,roleName:e.roleName}),!i&&e.participationPermissions.blockOthersVideo&&(t.videoBlocked?r.createElement($p,{Icon:ws,text:Object(z.Translate)("participant_modifier_enable_video"),onClick:()=>e.onBlockParticipantVideo(t.guid,!1)}):r.createElement($p,{Icon:$s,text:Object(z.Translate)("participant_modifier_disable_video"),onClick:()=>e.onBlockParticipantVideo(t.guid,!0)})),!i&&e.participationPermissions.blockOthersAudio&&(t.audioBlocked?r.createElement($p,{Icon:ys,text:Object(z.Translate)("participant_modifier_unmute_audio"),onClick:()=>e.onBlockParticipantAudio(t.guid,!1)}):r.createElement($p,{Icon:eo,text:Object(z.Translate)("participant_modifier_mute_audio"),onClick:()=>e.onBlockParticipantAudio(t.guid,!0)})),e.participationPermissions.setImportance&&(t.isImportant?r.createElement($p,{Icon:Xs,text:Object(z.Translate)("participant_modifier_clear_importance"),onClick:()=>e.onChangeParticipantImportance(t.guid,!1)}):r.createElement($p,{Icon:Zs,text:Object(z.Translate)("participant_modifier_set_importance"),onClick:()=>e.onChangeParticipantImportance(t.guid,!0)})),e.participationPermissions.cameraControlAllowed&&t.cameraControlAvailable&&(e.isFarEndControlsEnabled?r.createElement($p,{Icon:Do,text:Object(z.Translate)("participant_modifier_camera_control"),disabled:!0,onClick:()=>e.onFarEndCameraControlsViewChanged(t.guid,!1)}):r.createElement($p,{Icon:Do,text:Object(z.Translate)("participant_modifier_camera_control"),onClick:()=>e.onFarEndCameraControlsViewChanged(t.guid,!0)})),!i&&e.participationPermissions.removeParticipants&&r.createElement($p,{Icon:qs,text:Object(z.Translate)("participant_modifier_remove"),onClick:()=>e.onRemoveParticipant(t.guid)}))};function ah(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function nh(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ah(Object(i),!0).forEach((function(t){sh(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ah(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function sh(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class oh extends r.PureComponent{constructor(e){super(e),sh(this,"admitAllButtonRef",void 0),sh(this,"firstCollapsibleRef",void 0),this.state={selectedParticipantGuid:void 0,lobbySubListExpanded:!0,inMeetingSubListExpanded:!0,connectingSubListExpanded:!0,onHoldSubListExpanded:!0},this.onLobbySubListToggle=this.onLobbySubListToggle.bind(this),this.onInMeetingSubListToggle=this.onInMeetingSubListToggle.bind(this),this.onConnectingSubListToggle=this.onConnectingSubListToggle.bind(this),this.onOnHoldSubListToggle=this.onOnHoldSubListToggle.bind(this),this.renderParticipant=this.renderParticipant.bind(this),this.toggleParticipantSelected=this.toggleParticipantSelected.bind(this),this.admitAllButtonRef=r.createRef(),this.firstCollapsibleRef=r.createRef()}componentDidMount(){setTimeout(()=>{this.admitAllButtonRef&&this.admitAllButtonRef.current?this.admitAllButtonRef.current.focus():this.firstCollapsibleRef&&this.firstCollapsibleRef.current&&this.firstCollapsibleRef.current.focus()},Ce.a)}render(){const e=this.props.participants.filter(e=>!0===e.awaitingActivation&&e.state===k.j.CONNECTED).sort((e,t)=>e.displayName.localeCompare(t.displayName,void 0,{sensitivity:"base"})),t=this.props.participants.filter(e=>!1===e.awaitingActivation&&e.state===k.j.CONNECTED&&e.handStatus!==k.h.Raised).sort((e,t)=>e.displayName.localeCompare(t.displayName,void 0,{sensitivity:"base"})),i=this.props.participants.filter(e=>!1===e.awaitingActivation&&e.state===k.j.CONNECTED&&e.handStatus===k.h.Raised).sort((e,t)=>e.handStatusLastModified.localeCompare(t.handStatusLastModified,void 0,{sensitivity:"base"})),a=this.props.participants.filter(e=>e.state===k.j.INITIAL||e.state===k.j.RINGING).sort((e,t)=>e.displayName.localeCompare(t.displayName,void 0,{sensitivity:"base"})),n=this.props.participants.filter(e=>e.state===k.j.ON_HOLD).sort((e,t)=>e.displayName.localeCompare(t.displayName,void 0,{sensitivity:"base"})),s=this.props.participationPermissions.lockConference?r.createElement(q.a,{className:Vc.a.admitAllButton,ref:this.admitAllButtonRef,"aria-label":Object(z.Translate)("call_sidebar_participants_admit_all_assistive"),title:Object(z.Translate)("call_sidebar_participants_admit_all_assistive"),onClick:this.props.onAdmitAllParticipants},Object(z.Translate)("call_sidebar_participants_admit_all")):null,o=[{participants:e,listTitle:Object(z.Translate)("call_sidebar_participants_in_lobby"),dataTestLabel:"lobby_participant_list",showParticipantCount:this.props.participants.length!==e.length,topLevelButton:s},{participants:i.concat(t),listTitle:Object(z.Translate)("call_sidebar_participants_in_meeting"),dataTestLabel:"in_meeting_participant_list",showParticipantCount:this.props.participants.length!==t.length},{participants:a,listTitle:Object(z.Translate)("call_sidebar_participants_connecting"),dataTestLabel:"connecting_participant_list",showParticipantCount:this.props.participants.length!==a.length},{participants:n,listTitle:Object(z.Translate)("call_sidebar_participants_on_hold"),dataTestLabel:"on_hold_participant_list",showParticipantCount:this.props.participants.length!==n.length}].filter(e=>e.participants.length>0);return r.createElement(r.Fragment,null,r.createElement("header",null,r.createElement("h4",null,"".concat(Object(z.Translate)("call_sidebar_participants_header")," (").concat(this.props.participants.length,")"))),r.createElement("div",{className:Vc.a.subLists},o.map((e,t)=>this.renderSubList(nh(nh({},e),{},{index:t})))))}renderSubList(e){if(0!==e.participants.length){let t=e.listTitle;return e.showParticipantCount&&(t+=" (".concat(e.participants.length,")")),r.createElement(jp,{title:t,ref:0===e.index?this.firstCollapsibleRef:null,key:e.index+"_"+e.dataTestLabel},e.topLevelButton,r.createElement("ul",{"data-test":e.dataTestLabel,"aria-label":e.listTitle,className:Vc.a.subList},e.participants.map(this.renderParticipant)))}}inCallRoleName(e){let t;return e.cospaceUserCallLegProfile?this.props.spaceCallLegProfile&&e.cospaceUserCallLegProfile===this.props.spaceCallLegProfile?t=Object(z.Translate)("members_call_participation_call_leg_profile_space_default"):(t=this.inCallRoleNameFinder("callLegProfile","cospaceUserCallLegProfile",e),t=void 0===t?Object(z.Translate)("members_call_participation_call_leg_profile_custom"):t):t=e.accessMethod?this.inCallRoleNameFinder("guid","accessMethod",e):Object(z.Translate)("members_call_participation_call_leg_profile_space_default"),t}inCallRoleNameFinder(e,t,i){var a;return null===(a=this.props.accessMethods.find(a=>a[e]===i[t]))||void 0===a?void 0:a.name}renderParticipant(e){const t=this.state.selectedParticipantGuid===e.guid,i=Object(J.c)(),a=i===e.guid,n=this.inCallRoleName(e),s="participant_"+e.guid;return r.createElement(Xp,{key:e.guid,roleName:n,participant:e,participationPermissions:this.props.participationPermissions,isSelected:t,participantDataTestId:s,isAnotherParticipantSelected:!!this.state.selectedParticipantGuid&&!t,selfParticipantGuid:i,selectedParticipantGuidForCameraControl:this.props.selectedParticipantGuidForCameraControl,cameraControlEnabled:this.props.cameraControlEnabled,participantsCount:this.props.participants.length,toggleParticipantSelected:this.toggleParticipantSelected},r.createElement(ih,{isSelf:a,participant:e,accessMethods:this.props.accessMethods,participationPermissions:this.props.participationPermissions,roleName:n,isFarEndControlsEnabled:this.props.isFarEndControlsEnabled,onAdmitParticipant:this.props.onAdmitParticipant,onBlockParticipantAudio:this.props.onBlockParticipantAudio,onBlockParticipantVideo:this.props.onBlockParticipantVideo,onChangeParticipantImportance:this.props.onChangeParticipantImportance,onFarEndCameraControlsViewChanged:this.props.onFarEndCameraControlsViewChanged,onRemoveParticipant:this.props.onRemoveParticipant}))}onLobbySubListToggle(){this.setState({lobbySubListExpanded:!this.state.lobbySubListExpanded})}onInMeetingSubListToggle(){this.setState({inMeetingSubListExpanded:!this.state.inMeetingSubListExpanded})}onConnectingSubListToggle(){this.setState({connectingSubListExpanded:!this.state.connectingSubListExpanded})}onOnHoldSubListToggle(){this.setState({onHoldSubListExpanded:!this.state.onHoldSubListExpanded})}toggleParticipantSelected(e){e!==this.state.selectedParticipantGuid?this.setState({selectedParticipantGuid:e}):this.setState({selectedParticipantGuid:void 0})}}var rh=Object(c.b)(e=>({accessMethods:b.G(e),spaceCallLegProfile:b.I(e),isFarEndControlsEnabled:b.ee(e),selectedParticipantGuidForCameraControl:b.ge(e),cameraControlEnabled:b.ee(e)}),e=>({onAdmitAllParticipants:()=>e(Object(u.admitAllParticipants)()),onAdmitParticipant:t=>e(Object(u.admitParticipant)(t)),onBlockParticipantAudio:(t,i)=>e(Object(u.blockParticipantAudio)(t,i)),onBlockParticipantVideo:(t,i)=>e(Object(u.blockParticipantVideo)(t,i)),onRemoveParticipant:t=>e(Object(u.removeParticipant)(t)),onChangeParticipantImportance:(t,i)=>e(Object(u.changeParticipantImportance)(t,i)),onFarEndCameraControlsViewChanged:(t,i)=>e(Object(u.farEndCameraControlsViewChanged)(t,i))}))(oh),lh=i(785),ch=i.n(lh),dh=i(786),ph=i.n(dh);class hh extends r.PureComponent{constructor(e){super(e),this.state={selectedOptions:[],submitClicked:!1,responseSubmittedSurveyId:d.getStorageVariable(_.a.RESPONSE_SUBMITTED_SURVEY_ID)},this.onOptionSelect=this.onOptionSelect.bind(this),this.onSubmitButtonClick=this.onSubmitButtonClick.bind(this),this.doesAllQuestionsAnswered=this.doesAllQuestionsAnswered.bind(this)}componentDidMount(){this.setState({selectedOptions:this.props.surveyData.surveyData})}componentDidUpdate(){this.setState({selectedOptions:this.props.surveyData.surveyData})}render(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("header",null,l.a.createElement("h4",{"data-test":"active_survey_title"},this.props.surveyData.surveyName)),(this.state.submitClicked||this.state.responseSubmittedSurveyId===this.props.surveyData.surveyId)&&l.a.createElement("header",null,l.a.createElement("h5",{className:ph.a.submitText,"data-test":"survey_response_submitted"},Object(z.Translate)("survey_submitted_message"))),!this.state.submitClicked&&this.state.responseSubmittedSurveyId!==this.props.surveyData.surveyId&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:[ph.a.notesForm,ph.a.desktop].filter(Boolean).join(" ")},this.props.surveyData.surveyData.map((e,t)=>{const i=Object.keys(e.options).map(t=>({id:t,name:e.options[t]}));return l.a.createElement("div",{className:ph.a.questionOptionGroup},l.a.createElement("div",{className:ph.a.questionText},e.question),i.map((i,a)=>l.a.createElement("div",{className:ph.a.radioGroup},l.a.createElement("input",{key:a,className:Object(Ye.a)()?ph.a.radioGroupArabic:ph.a.radio,type:"radio",name:i.name,value:i.id,checked:e.selected===i.id,onChange:e=>this.onOptionSelect(e,t)}),l.a.createElement("label",null,i.name))))})),l.a.createElement("span",{className:ph.a.submitButtons},this.props.permission.postNotes&&l.a.createElement(q.a,{"aria-label":Object(z.Translate)("back_button"),className:ph.a.cancelButton,onClick:this.props.onBackButtonClick},Object(z.Translate)("back_button")),l.a.createElement(q.a,{"aria-label":Object(z.Translate)("survey_pane_submit_response_button_title"),className:ph.a.submitResponse,onClick:this.onSubmitButtonClick,disabled:this.doesAllQuestionsAnswered()},Object(z.Translate)("survey_pane_submit_response_button_title")))))}doesAllQuestionsAnswered(){let e=0;return this.state.selectedOptions.map((t,i)=>{t.hasOwnProperty("selected")&&(e+=1)}),e!==this.state.selectedOptions.length}onOptionSelect(e,t){const{selectedOptions:i}=this.state,a=[...i];a[t].selected=e.target.value,this.setState({selectedOptions:a})}onSubmitButtonClick(){this.setState({submitClicked:!0,selectedOptions:[]}),d.setStorageVariable(_.a.RESPONSE_SUBMITTED_SURVEY_ID,this.props.surveyData.surveyId);const e=[{surveyId:this.props.surveyData.surveyId,surveyName:this.props.surveyData.surveyName,surveyData:this.state.selectedOptions,ownerId:Object(J.c)(),timeStamp:new Date}];return this.props.onSubmitClick(e)}}var uh=hh,mh=i(787),gh=i.n(mh);function _h(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class bh extends l.a.PureComponent{constructor(e){super(e),_h(this,"submitButtonRef",l.a.createRef()),_h(this,"selfUserName",Object(J.b)()),this.state={editSurveyClickedId:"",surveyIdForDelete:"",isCreateSurveyClicked:!1,surveyTitle:"",deleteSurveyClicked:!1,viewResultsClicked:!1,selectedSurveyIdForResultsView:"",totalParticipantsVoted:0,inputFields:[{question:"",options:[""]}]},this.onCreateSurveyClick=this.onCreateSurveyClick.bind(this),this.renderSurveysList=this.renderSurveysList.bind(this),this.onSaveButtonClick=this.onSaveButtonClick.bind(this),this.onCancelButtonClick=this.onCancelButtonClick.bind(this),this.renderCreateQue=this.renderCreateQue.bind(this),this.calculateLocalTimeString=this.calculateLocalTimeString.bind(this),this.addQuestionClick=this.addQuestionClick.bind(this),this.addOptionClick=this.addOptionClick.bind(this),this.onChangeInputFields=this.onChangeInputFields.bind(this),this.onChangeSurveyTitle=this.onChangeSurveyTitle.bind(this),this.onDeleteQuestionClick=this.onDeleteQuestionClick.bind(this),this.onLaunchButtonClick=this.onLaunchButtonClick.bind(this),this.onDeleteSurveyButtonClick=this.onDeleteSurveyButtonClick.bind(this),this.onEditSurveyClick=this.onEditSurveyClick.bind(this),this.onEndSurveyButtonClick=this.onEndSurveyButtonClick.bind(this),this.onViewResultsButtonClick=this.onViewResultsButtonClick.bind(this),this.onDeleteSurveyYesClick=this.onDeleteSurveyYesClick.bind(this)}render(){return l.a.createElement(l.a.Fragment,null,!this.state.isCreateSurveyClicked&&!this.state.viewResultsClicked&&this.renderSurveysList(),this.state.isCreateSurveyClicked&&this.renderCreateQue(),this.state.viewResultsClicked&&this.renderViewResults())}renderSurveysList(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:gh.a.viewSurveysContainer},0===this.props.survyesReceived.surveys.length&&l.a.createElement("h6",{className:gh.a.noSurveys},Object(z.Translate)("zero_active_survey")),this.props.survyesReceived.surveys.map((e,t)=>{const i=[gh.a.surveyStatusInfo,e.surveyStatus===Ce.t.YET_TO_START&&gh.a.surveyYetStart,e.surveyStatus===Ce.t.LIVE&&gh.a.surveyLive,e.surveyStatus===Ce.t.ENDED&&gh.a.surveyEnded].filter(Boolean).join(" ");return l.a.createElement("div",{key:t,className:Object(Ye.a)()?gh.a.surveysDataForArabic:gh.a.surveysData},l.a.createElement("div",{className:gh.a.surveyNameContainer},l.a.createElement("span",{title:e.surveyName,className:gh.a.surveyTitleInfo},e.surveyName),e.surveyStatus===Ce.t.YET_TO_START&&l.a.createElement("div",{className:i},Object(z.Translate)("survey_yet_to_start_text")),e.surveyStatus===Ce.t.ENDED&&l.a.createElement("div",{className:i},Object(z.Translate)("survey_ended_text")),e.surveyStatus===Ce.t.LIVE&&l.a.createElement("div",{className:i},Object(z.Translate)("survey_live_text"))),l.a.createElement("div",{className:gh.a.surveyButtonContainer},e.surveyStatus===Ce.t.YET_TO_START&&!this.props.isActiveSurvey&&this.selfUserName===e.ownerId&&l.a.createElement(Q.c,{className:gh.a.surveyButtons,title:Object(z.Translate)("tooltip_launch_survey_button"),onClick:()=>this.onLaunchButtonClick(e.surveyId)},l.a.createElement(Oo,null)),e.surveyStatus===Ce.t.YET_TO_START&&this.selfUserName===e.ownerId&&l.a.createElement(Q.c,{className:gh.a.surveyButtons,title:Object(z.Translate)("tooltip_edit_survey_button"),disabled:this.selfUserName!==e.ownerId,onClick:()=>this.onEditSurveyClick(e.surveyId)},l.a.createElement(To,null)),e.surveyStatus===Ce.t.ENDED&&l.a.createElement(Q.c,{className:gh.a.surveyButtons,title:Object(z.Translate)("tooltip_view_results_button"),onClick:()=>this.onViewResultsButtonClick(e.surveyId)},l.a.createElement(yo,null)),e.surveyStatus!==Ce.t.LIVE&&this.selfUserName===e.ownerId&&l.a.createElement(Q.c,{className:gh.a.surveyButtons,title:Object(z.Translate)("tooltip_delete_survey_button"),onClick:()=>this.onDeleteSurveyButtonClick(e.surveyId)},l.a.createElement(Co,null)),e.surveyStatus===Ce.t.LIVE&&l.a.createElement(Q.c,{className:gh.a.surveyButtons,title:Object(z.Translate)("tooltip_end_survey_button"),onClick:()=>this.onEndSurveyButtonClick(e.surveyId)},l.a.createElement(No,null))),l.a.createElement("span",{className:gh.a.surveyTimeInfo},this.calculateLocalTimeString(e.timeStamp)))})),!this.state.deleteSurveyClicked&&l.a.createElement("span",{className:gh.a.createSurveyButtonContainer},l.a.createElement(q.a,{"aria-label":Object(z.Translate)("back_button"),className:gh.a.cancelButton,onClick:this.props.onBackButtonClick},Object(z.Translate)("back_button")),l.a.createElement(q.a,{"aria-label":Object(z.Translate)("create_survey_button_title"),onClick:this.onCreateSurveyClick},Object(z.Translate)("create_survey_button_title"))),this.state.deleteSurveyClicked&&this.state.surveyIdForDelete&&l.a.createElement(Sp,{description:Object(z.Translate)("survey_delete_alert_dialog_title"),leftButtonName:Object(z.Translate)("file_sharing_dialog_option_no_button_title"),rightButtonName:Object(z.Translate)("file_sharing_dialog_option_yes_button_title"),leftOnClick:()=>this.setState({deleteSurveyClicked:!1}),rightOnClick:()=>this.onDeleteSurveyYesClick()}))}renderCreateQue(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("form",{className:gh.a.questionOptionsForm,onSubmit:this.onSaveButtonClick,"data-test":"create_survey_form",id:"create_survey_form"},l.a.createElement("div",{className:[gh.a.notesForm,gh.a.desktop].filter(Boolean).join(" ")},l.a.createElement(Ec.a,{className:gh.a.surveyTitle,autoFocus:!0,required:!0,"aria-label":Object(z.Translate)("survey_title"),placeholder:Object(z.Translate)("survey_title"),value:this.state.surveyTitle,onChange:this.onChangeSurveyTitle}),0===this.state.inputFields.length&&l.a.createElement("span",{className:gh.a.addQuestionContainer},l.a.createElement(Eo,null),l.a.createElement(q.a,{"aria-label":Object(z.Translate)("add_question_button_title"),className:gh.a.addButton,onClick:()=>this.addQuestionClick()},Object(z.Translate)("add_question_button_title"))),this.state.inputFields.map((e,t)=>{const{question:i,options:a}=e;return l.a.createElement("div",{className:gh.a.notesTextArea,key:t},l.a.createElement("div",{className:gh.a.questionContainer},l.a.createElement(Ec.a,{className:gh.a.inputBoxStyle,required:!0,"aria-label":Object(z.Translate)("survey_question_placeholder"),placeholder:Object(z.Translate)("survey_question_placeholder"),value:i,name:"question",onChange:e=>this.onChangeInputFields(t,e)}),l.a.createElement(Q.c,{className:gh.a.deleteButton,onClick:()=>this.onDeleteQuestionClick(t)},l.a.createElement(Co,null))),a.map((e,i)=>{const{opt:a}=e;return l.a.createElement("div",{className:gh.a.questionContainer,key:i},l.a.createElement(Ec.a,{className:gh.a.inputBoxStyle,required:!0,"aria-label":Object(z.Translate)("survey_options_placeholder",i+1),placeholder:Object(z.Translate)("survey_options_placeholder",i+1),value:e,name:"options",onChange:e=>this.onChangeInputFields(t,e,i)}),0!==i&&1!==i&&l.a.createElement(Q.c,{className:gh.a.deleteButton,onClick:()=>this.onDeleteOptionClick(t,i)},l.a.createElement(Co,null)))}),l.a.createElement("span",{className:gh.a.addOptionContainer},l.a.createElement(Eo,null),l.a.createElement(q.a,{"aria-label":Object(z.Translate)("add_option_button_title"),className:[gh.a.addButton,gh.a.addOption].filter(Boolean).join(" "),disabled:this.state.inputFields[t].options.length>3,onClick:()=>this.addOptionClick(t)},Object(z.Translate)("add_option_button_title"))),t===this.state.inputFields.length-1&&l.a.createElement("span",{className:gh.a.addContainer},l.a.createElement(Eo,null),l.a.createElement(q.a,{"aria-label":Object(z.Translate)("add_question_button_title"),className:gh.a.addButton,disabled:this.state.inputFields.length>4,onClick:()=>this.addQuestionClick()},Object(z.Translate)("add_question_button_title"))))}))),l.a.createElement("span",{className:gh.a.noteSaveDiscardButtons},l.a.createElement(q.a,{"aria-label":Object(z.Translate)("dialog_cancel"),className:gh.a.cancelButton,onClick:this.onCancelButtonClick},Object(z.Translate)("dialog_cancel")),l.a.createElement(q.a,{"aria-label":Object(z.Translate)("notes_save"),form:"create_survey_form",disabled:0===this.state.inputFields.length,type:"submit",ref:this.submitButtonRef},Object(z.Translate)("notes_save"))))}renderViewResults(){const e=this.props.survyesReceived.surveys.filter(e=>e.surveyId===this.state.selectedSurveyIdForResultsView);return l.a.createElement(l.a.Fragment,null,0===e.length&&l.a.createElement("h6",{className:gh.a.noSurveyResultsFound},Object(z.Translate)("survey_data_not_found")),e.length>0&&l.a.createElement("div",{className:gh.a.viewSurveysContainer},l.a.createElement("h4",{className:gh.a.surveyName},e[0].surveyName),l.a.createElement("span",{className:gh.a.details},l.a.createElement("div",{className:gh.a.timerStyle},l.a.createElement(jo,null)),l.a.createElement("div",{className:gh.a.endedText},Object(z.Translate)("survey_ended_text"))),l.a.createElement("span",{className:gh.a.details},l.a.createElement("div",{className:gh.a.countDetails},Object(z.Translate)("total_questions_title")+": "+e[0].surveyData.length),l.a.createElement("div",{className:[gh.a.countDetails,gh.a.participationDetails].filter(Boolean).join(" ")},Object(z.Translate)("participation_percentage_title")+": "+this.totalParticipantParticipated()+"% ")),e[0].surveyData.map(e=>l.a.createElement("div",{className:gh.a.questionResponseContainer},l.a.createElement("div",{className:gh.a.questionText},e.question),Object.values(e.options).map((t,i)=>l.a.createElement("div",{className:gh.a.optionMeterContainer},l.a.createElement("div",{className:gh.a.optionDetailsContainer},l.a.createElement("div",{className:gh.a.optionText},t),l.a.createElement("span",{className:gh.a.optionCount}," ("+e.options_tally[i]+"/"+this.totalSurveyTaken(e.options_tally)+") "+this.surveyTakenPercentage(e.options_tally[i],this.totalSurveyTaken(e.options_tally)))),l.a.createElement("meter",{max:"100",min:"0",value:e.options_tally[i]/this.totalSurveyTaken(e.options_tally)*100,className:gh.a.optionMeter})))))),l.a.createElement("span",{className:gh.a.createSurveyButtonContainer},l.a.createElement(q.a,{"aria-label":Object(z.Translate)("back_button"),className:gh.a.closeButton,onClick:this.onCancelButtonClick},Object(z.Translate)("dialog_close"))))}surveyTakenPercentage(e,t){const i=Math.round(e/t*100);return Object(s.isNaN)(i)?"0%":i+"%"}totalSurveyTaken(e){let t=0;for(const i in e)e.hasOwnProperty(i)&&(t+=parseFloat(e[i]));return this.setState({totalParticipantsVoted:t}),t}totalParticipantParticipated(){const e=this.state.totalParticipantsVoted/this.props.totalParticipantCount*100;return e>100?100:Math.round(e)}calculateLocalTimeString(e){return new Date(e).toLocaleString("en-US")}addQuestionClick(){this.setState({inputFields:[...this.state.inputFields,{question:"",options:["",""]}],viewResultsClicked:!1})}addOptionClick(e){const t=[...this.state.inputFields];t[e].options.push(""),this.setState({inputFields:t})}onChangeInputFields(e,t,i){const{name:a,value:n}=t.target,s=[...this.state.inputFields];"options"===a?s[e].options[i]=n:s[e][a]=n,this.setState({inputFields:s})}onChangeSurveyTitle(e){this.setState({surveyTitle:e.target.value})}onCreateSurveyClick(){this.setState({isCreateSurveyClicked:!0,viewResultsClicked:!1,editSurveyClickedId:""}),this.setState({inputFields:[{question:"",options:["",""]}]})}onSaveButtonClick(e){return e.preventDefault(),this.setState({isCreateSurveyClicked:!1,surveyTitle:"",inputFields:[{question:"",options:["",""]}]}),this.props.onSaveSurveyRequest(this.state.inputFields,this.state.surveyTitle,this.state.editSurveyClickedId)}onLaunchButtonClick(e){return this.setState({deleteSurveyClicked:!1}),this.props.onLaunchSurveyRequest(e)}onDeleteSurveyButtonClick(e){this.setState({deleteSurveyClicked:!0,surveyIdForDelete:e})}onDeleteSurveyYesClick(){return this.setState({deleteSurveyClicked:!1}),this.props.onDeleteSurveyRequest(this.state.surveyIdForDelete)}onEndSurveyButtonClick(e){return this.props.onEndSurveyRequest(e)}onCancelButtonClick(){this.setState({isCreateSurveyClicked:!1,viewResultsClicked:!1,surveyTitle:"",inputFields:[{question:"",options:["",""]}]})}onDeleteQuestionClick(e){const t=[...this.state.inputFields];t.splice(e,1),this.setState({inputFields:t})}onDeleteOptionClick(e,t){const i=[...this.state.inputFields];i[e].options.splice(t,1),this.setState({inputFields:i})}onViewResultsButtonClick(e){this.setState({viewResultsClicked:!0,isCreateSurveyClicked:!1,selectedSurveyIdForResultsView:e}),this.setState({deleteSurveyClicked:!1})}onEditSurveyClick(e){const t=this.props.survyesReceived.surveys.filter(t=>t.surveyId===e),i=t[0].surveyData;i.map(e=>{e.options=Object.values(e.options)}),this.setState({inputFields:i,editSurveyClickedId:e}),this.setState({surveyTitle:t[0].surveyName,isCreateSurveyClicked:!0})}}var Sh=bh;function vh(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class fh extends r.PureComponent{constructor(e){super(e),vh(this,"textAreaRef",void 0),vh(this,"surveySectionRef",void 0),this.state={isTakeSurveyClicked:!1,isViewSurveyClicked:!1,shouldShowLoadNewDialog:!1,isInDraftMode:!1},this.textAreaRef=r.createRef(),this.surveySectionRef=r.createRef(),this.onTakeSurveyButtonClick=this.onTakeSurveyButtonClick.bind(this),this.onViewSurveyButtonClick=this.onViewSurveyButtonClick.bind(this),this.renderTakeSurvey=this.renderTakeSurvey.bind(this),this.onBackClick=this.onBackClick.bind(this),this.findAnyactiveSurvey=this.findAnyactiveSurvey.bind(this)}componentDidMount(){Object(gt.b)()||setTimeout(()=>{this.textAreaRef&&this.textAreaRef.current&&this.textAreaRef.current.focus()},Ce.a)}componentWillUnmount(){}render(){return r.createElement(r.Fragment,null,r.createElement("header",null,r.createElement("h4",{"data-test":"survey_pane_header"},Object(z.Translate)("survey_pane_header"))),!this.state.isTakeSurveyClicked&&!this.state.isViewSurveyClicked&&this.props.permissions.surveyOpsAllowed&&r.createElement("div",{className:ch.a.surveysPane},r.createElement("section",{className:ch.a.surveyBtnContainer,ref:this.surveySectionRef},(0===this.props.activeSurvey.survey.surveyData.length||this.props.activeSurvey.surveyStatus===Ce.t.ENDED)&&r.createElement("span",{className:ch.a.noActiveSurvey},Object(z.Translate)("zero_active_survey")),this.props.activeSurvey.surveyStatus===Ce.t.LIVE&&this.props.activeSurvey.survey.ownerId!==Object(J.b)()&&r.createElement(q.a,{className:ch.a.takeSurveyButton,onClick:this.onTakeSurveyButtonClick},Object(z.Translate)("survey_pane_take_survey_button")),r.createElement(q.a,{className:ch.a.viewSurveyButton,onClick:this.onViewSurveyButtonClick},Object(z.Translate)("survey_pane_view_survey_button_modified")))),this.state.isTakeSurveyClicked&&this.renderTakeSurvey(),this.state.isViewSurveyClicked&&r.createElement(Sh,{onEndSurveyRequest:this.props.onEndSurveyClick,onDeleteSurveyRequest:this.props.onDeleteSurveyClick,onSaveSurveyRequest:this.props.onSaveSurveyClick,onLaunchSurveyRequest:this.props.onLaunchSurveyClick,survyesReceived:this.props.surveyReceived,onBackButtonClick:this.onBackClick,isActiveSurvey:this.findAnyactiveSurvey(),totalParticipantCount:this.props.totalParticipantCount}),!this.props.permissions.surveyOpsAllowed&&this.renderTakeSurvey())}findAnyactiveSurvey(){return Array.from(this.props.surveyReceived.surveys).some(e=>e.surveyStatus===Ce.t.LIVE)}onBackClick(){this.setState({isTakeSurveyClicked:!1,isViewSurveyClicked:!1})}renderTakeSurvey(){return this.props.activeSurvey.surveyStatus===Ce.t.LIVE?r.createElement(uh,{surveyData:this.props.activeSurvey.survey,onSubmitClick:this.props.onSubmitResponseClick,onBackButtonClick:this.onBackClick,permission:this.props.permissions}):r.createElement("span",{className:ch.a.noActiveSurvey},Object(z.Translate)("zero_active_survey"))}onTakeSurveyButtonClick(){this.setState({isTakeSurveyClicked:!0})}onViewSurveyButtonClick(){this.setState({isViewSurveyClicked:!0})}}var Ch=Object(c.b)(e=>({callSpaceName:Object(b.s)(e),surveyReceived:Object(b.Sb)(e),activeSurvey:Object(b.e)(e),totalParticipantCount:ce(e)}),e=>({onSaveSurveyClick:(t,i,a)=>e(Xd(t,i,a)),onLaunchSurveyClick:t=>e(ep(t)),onDeleteSurveyClick:t=>e(tp(t)),onEndSurveyClick:t=>e(ip(t)),onSubmitResponseClick:t=>e($d(t))}))(fh);function Eh(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let Th;!function(e){e[e.NONE=0]="NONE",e[e.PARTICIPANTS=1]="PARTICIPANTS",e[e.ADD_PARTICIPANT=2]="ADD_PARTICIPANT",e[e.CHAT=3]="CHAT",e[e.LAYOUTS=4]="LAYOUTS",e[e.JOIN_INFORMATION=5]="JOIN_INFORMATION",e[e.CONTROLS=6]="CONTROLS",e[e.NOTES=7]="NOTES",e[e.CLOSED_CAPTIONS=8]="CLOSED_CAPTIONS",e[e.FILE_SHARE=9]="FILE_SHARE",e[e.SURVEY_POLLING=10]="SURVEY_POLLING"}(Th||(Th={}));class Oh extends r.PureComponent{constructor(e){super(e),Eh(this,"lobbyNotificationTimeout",void 0),Eh(this,"lastTouchStart",void 0),Eh(this,"eltaninIP",d.getStorageVariable(_.a.ELTANIN_ADDRESS)),Eh(this,"lastActiveElement",void 0),Eh(this,"checkForInvalidEltaninIP","null"===this.eltaninIP||"undefined"===this.eltaninIP||""===this.eltaninIP||"none"===this.eltaninIP),this.state={rememberedConnectingParticipants:[],isFullscreen:!1,isShowingLobbyNotification:!1,oldestUnreadChatMessageIdx:0,overrideIsActiveProp:!1,shouldShowNewNoteNotification:!1,shouldShowNewFilesNotification:!1,shouldShowNewActiveSurveyNotification:!1},this.onParticipantsClick=this.onParticipantsClick.bind(this),this.onAddParticipantClick=this.onAddParticipantClick.bind(this),this.onChatClick=this.onChatClick.bind(this),this.onSurveyPollingClick=this.onSurveyPollingClick.bind(this),this.onLayoutsClick=this.onLayoutsClick.bind(this),this.onMeetingNotesClick=this.onMeetingNotesClick.bind(this),this.onClosedCaptionsClick=this.onClosedCaptionsClick.bind(this),this.onFileShareClick=this.onFileShareClick.bind(this),this.onJoinInformationClick=this.onJoinInformationClick.bind(this),this.onControlsClick=this.onControlsClick.bind(this),this.onClosePane=this.onClosePane.bind(this),this.onKeyPressed=this.onKeyPressed.bind(this),this.onDiagnosticsClick=this.onDiagnosticsClick.bind(this),this.onFullscreenClick=this.onFullscreenClick.bind(this),this.handleFullscreenChange=this.handleFullscreenChange.bind(this),this.onRememberConnectingParticipants=this.onRememberConnectingParticipants.bind(this),this.hideLobbyNotification=this.hideLobbyNotification.bind(this),this.onOldestUnreadChatMessageIdxChange=this.onOldestUnreadChatMessageIdxChange.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onMouseEnter=this.onMouseEnter.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this)}componentDidMount(){document.onfullscreenchange=this.handleFullscreenChange,document.addEventListener("touchstart",this.onTouchStart)}componentWillUnmount(){document.onfullscreenchange=null,document.removeEventListener("touchstart",this.onTouchStart)}onMouseEnter(){Object(gt.b)()||this.setState({overrideIsActiveProp:!0})}onMouseLeave(){Object(gt.b)()||this.setState({overrideIsActiveProp:!1})}componentDidUpdate(e){this.props.openMenu===Th.LAYOUTS&&(this.props.joinMode===wr.a.PRESENTATION_ONLY||this.props.availableLayouts.length<=1)&&this.props.onOpenMenuChange(Th.NONE),this.props.openMenu!==Th.CHAT||this.props.messageBoardEnabled||this.props.onOpenMenuChange(Th.NONE),this.props.openMenu!==Th.NOTES||this.props.meetingNotesEnabled||(this.props.onOpenMenuChange(Th.NONE),this.setState({shouldShowNewNoteNotification:!1})),this.props.openMenu!==Th.SURVEY_POLLING||this.props.isSurveyEnabled||(this.props.onOpenMenuChange(Th.NONE),this.setState({shouldShowNewActiveSurveyNotification:!1})),this.props.openMenu!==Th.CLOSED_CAPTIONS||this.props.closedCaptionsEnabled||this.props.onOpenMenuChange(Th.NONE),this.props.openMenu!==Th.FILE_SHARE||this.props.messageBoardEnabled||(this.props.onOpenMenuChange(Th.NONE),this.setState({shouldShowNewFilesNotification:!1})),e.meetingNotes.body!==this.props.meetingNotes.body&&this.setState({shouldShowNewNoteNotification:!0}),e.activeSurvey.surveyId!==this.props.activeSurvey.surveyId&&this.props.activeSurvey.surveyStatus===Ce.t.LIVE&&this.setState({shouldShowNewActiveSurveyNotification:!0}),e.sharedFiles.length!==this.props.sharedFiles.length&&this.setState({shouldShowNewFilesNotification:!0}),this.props.permissions.lockConference&&this.props.openMenu===Th.NONE&&this.props.participantsInLobbyCount?(this.props.participantsInLobbyCount>0&&!e.participantsInLobbyCount||this.props.permissions.lockConference&&!e.permissions.lockConference||this.props.openMenu===Th.NONE&&e.openMenu!==Th.NONE)&&(this.setState({isShowingLobbyNotification:!0}),this.lobbyNotificationTimeout=setTimeout(this.hideLobbyNotification,5e3)):(this.lobbyNotificationTimeout&&clearTimeout(this.lobbyNotificationTimeout),this.hideLobbyNotification())}onTouchStart(e){this.props.isActive?this.lastTouchStart=void 0:this.lastTouchStart=e.timeStamp}shouldIgnoreClick(e){return!!(this.lastTouchStart&&e&&e.timeStamp-this.lastTouchStart<Ce.o)}render(){const e=this.props.isActive||this.state.overrideIsActiveProp,t=[Bc.a.callMenu,!e&&this.props.openMenu===Th.NONE&&Bc.a.hidden].filter(Boolean).join(" ");return r.createElement("section",{className:t,onKeyDown:this.onKeyPressed,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},r.createElement("nav",{className:Bc.a.sidebar},this.renderParticipantsButton(),this.renderAddParticipantButton(),this.renderChatButton(),this.renderMeetingNotesButton(),this.props.closedCaptionsEnabled&&this.renderClosedCaptionsButton(),this.props.joinMode!==wr.a.PRESENTATION_ONLY&&this.renderLayoutsButton(),this.props.fileShareEnabled&&this.renderFileShareButton(),this.props.isSurveyEnabled&&this.renderSurveyPollingButton(),this.renderControlsButton(),this.renderJoinInformationButton(),this.renderHelpButton(),this.renderDiagnosticsButton(),!!document.documentElement.requestFullscreen&&!!document.exitFullscreen&&document.fullscreenEnabled&&this.renderFullscreenButton()),this.renderSidepanel())}renderAriaLabelsForSidePanel(){let e;return this.props.openMenu===Th.PARTICIPANTS?e=Object(z.Translate)("call_sidebar_participants_header_assistive"):this.props.openMenu===Th.ADD_PARTICIPANT?e=Object(z.Translate)("add_participant_header_assistive"):this.props.openMenu===Th.CHAT?e=Object(z.Translate)("chat_header_assistive"):this.props.openMenu===Th.FILE_SHARE?e=Object(z.Translate)("file_sharing_header_assistive"):this.props.openMenu===Th.LAYOUTS?e=Object(z.Translate)("call_sidebar_layouts_header_assistive"):this.props.openMenu===Th.NOTES?e=Object(z.Translate)("notes_header_assistive"):this.props.openMenu===Th.SURVEY_POLLING?e=Object(z.Translate)("survey_pane_header_assistive"):this.props.openMenu===Th.CLOSED_CAPTIONS?e=Object(z.Translate)("closed_captions_header_assistive"):this.props.openMenu===Th.CONTROLS?e=Object(z.Translate)("call_sidebar_controls_header_assistive"):this.props.openMenu===Th.JOIN_INFORMATION&&(e=Object(z.Translate)("space_join_information_assistive")),e}renderSidepanel(){const e=document.getElementById("side_pane");Object(Ye.a)()?null==e||e.setAttribute("dir","rtl"):null==e||e.removeAttribute("dir");const t=[Bc.a.sidepanel,this.props.openMenu===Th.NONE&&Bc.a.empty].filter(Boolean).join(" ");return r.createElement("section",{id:"side_pane",className:t,"aria-label":this.renderAriaLabelsForSidePanel()},this.props.openMenu!==Th.NONE&&this.props.openMenu===Th.CHAT&&r.createElement(Q.c,{className:Object(Ye.a)()?Bc.a.rightAlignedCloseButton:Bc.a.closeButton,"aria-label":Object(z.Translate)("dialog_close"),tabIndex:0,onClick:this.onClosePane},r.createElement(X.f,null)),this.props.openMenu===Th.PARTICIPANTS&&r.createElement(rh,{participants:this.props.participants,participationPermissions:this.props.permissions}),this.props.openMenu===Th.ADD_PARTICIPANT&&r.createElement($c,{participants:this.props.participants,onRememberConnectingParticipants:this.onRememberConnectingParticipants,rememberedConnectingParticipants:this.state.rememberedConnectingParticipants}),this.props.openMenu===Th.CHAT&&r.createElement(ud,{permissions:this.props.permissions,oldestUnreadChatMessageIdx:this.state.oldestUnreadChatMessageIdx,onOldestUnreadChatMessageIdxChange:this.onOldestUnreadChatMessageIdxChange}),this.props.openMenu===Th.FILE_SHARE&&r.createElement(Ep,{permissions:this.props.permissions}),this.props.openMenu===Th.LAYOUTS&&r.createElement(xp,{availableLayouts:this.props.availableLayouts}),this.props.openMenu===Th.NOTES&&r.createElement(Qp,{permissions:this.props.permissions}),this.props.openMenu===Th.SURVEY_POLLING&&r.createElement(Ch,{permissions:this.props.permissions}),this.props.openMenu===Th.CLOSED_CAPTIONS&&r.createElement(Nd,{permissions:this.props.permissions}),this.props.openMenu===Th.CONTROLS&&r.createElement(wd,{permissions:this.props.permissions}),this.props.openMenu===Th.JOIN_INFORMATION&&r.createElement(Ip,null),this.props.openMenu!==Th.NONE&&r.createElement(Q.c,{className:Object(Ye.a)()?Bc.a.rightAlignedCloseButton:Bc.a.closeButton,"aria-label":Object(z.Translate)("dialog_close"),tabIndex:0,onClick:this.onClosePane},r.createElement(X.f,null)))}renderParticipantsButton(){const e=[Bc.a.sidebarButton,Bc.a.persistentButton,Bc.a.participantButton,this.props.openMenu===Th.PARTICIPANTS&&Bc.a.selected,this.state.isShowingLobbyNotification&&Bc.a.showingLobbyNotification].filter(Boolean).join(" "),t=this.props.raisedHandCount,i=this.props.participantsInLobbyCount,a=this.props.participants.length-i;return r.createElement(r.Fragment,null,this.props.permissions.lockConference&&!!i&&this.props.openMenu===Th.NONE&&r.createElement("div",{className:[Bc.a.lobbyNotification,this.state.isShowingLobbyNotification?Bc.a.shown:Bc.a.notShown].join(" "),onClick:this.onParticipantsClick},r.createElement("span",{role:"alert",className:Bc.a.lobbyNotificationSpan},1===i?Object(z.Translate)("call_sidebar_participants_in_lobby_notification_single"):Object(z.Translate)("call_sidebar_participants_in_lobby_notification_multiple",i))),r.createElement(Q.c,{className:e,disabled:!this.props.participants.length,onClick:this.onParticipantsClick,title:Object(z.Translate)("call_sidebar_participants_header"),"aria-label":Object(z.Translate)("call_sidebar_participants_header_assistive_count",a,i+t)},r.createElement(oo,null),r.createElement("small",{className:Bc.a.participantCount},a),(!!i||!!t)&&r.createElement("small",{className:Bc.a.notificationCount},i+t)))}onParticipantsClick(){this.togglePane(Th.PARTICIPANTS,document.activeElement)}renderAddParticipantButton(){const e=[Bc.a.sidebarButton,this.props.openMenu===Th.ADD_PARTICIPANT&&Bc.a.selected].filter(Boolean).join(" ");return r.createElement(Q.c,{className:e,disabled:this.props.isJoining||!this.props.permissions.addParticipants,onClick:this.onAddParticipantClick,title:Object(z.Translate)("add_participant_header"),"aria-label":Object(z.Translate)("add_participant_header")},r.createElement(ro,null))}onAddParticipantClick(e){this.shouldIgnoreClick(e)||this.togglePane(Th.ADD_PARTICIPANT,document.activeElement)}onRememberConnectingParticipants(e){this.setState({rememberedConnectingParticipants:e})}renderChatButton(){const e=[Bc.a.sidebarButton,this.props.openMenu===Th.CHAT&&Bc.a.selected,this.state.oldestUnreadChatMessageIdx<this.props.numChatMessages&&Bc.a.hasUnreadMessages].filter(Boolean).join(" ");return r.createElement(Q.c,{className:e,disabled:this.props.isJoining||!this.props.messageBoardEnabled,onClick:this.onChatClick,title:Object(z.Translate)("chat_header"),"aria-label":this.state.oldestUnreadChatMessageIdx<this.props.numChatMessages?Object(z.Translate)("chat_header_assistive_with_notification"):Object(z.Translate)("chat_header")},r.createElement(uo,null))}onChatClick(e){this.shouldIgnoreClick(e)||this.togglePane(Th.CHAT,document.activeElement)}renderSurveyPollingButton(){this.props.openMenu===Th.SURVEY_POLLING&&this.setState({shouldShowNewActiveSurveyNotification:!1});const e=[Bc.a.sidebarButton,this.props.openMenu===Th.SURVEY_POLLING&&Bc.a.selected,this.state.shouldShowNewActiveSurveyNotification&&Bc.a.hasUnreadMessages].filter(Boolean).join(" ");return r.createElement(Q.c,{className:e,disabled:this.props.isJoining||!this.props.isSurveyEnabled||!this.props.isEltaninEnabled||this.checkForInvalidEltaninIP,onClick:this.onSurveyPollingClick,title:Object(z.Translate)("survey_pane_header"),"aria-label":this.state.shouldShowNewActiveSurveyNotification?Object(z.Translate)("survey_pane_header_assistive_notification"):Object(z.Translate)("survey_pane_header")},r.createElement(bo,null))}onSurveyPollingClick(e){this.setState({shouldShowNewActiveSurveyNotification:!1}),this.lastActiveElement=document.activeElement,this.shouldIgnoreClick(e)||this.togglePane(Th.SURVEY_POLLING,document.activeElement)}renderMeetingNotesButton(){this.props.openMenu===Th.NOTES&&this.setState({shouldShowNewNoteNotification:!1});const e=[Bc.a.sidebarButton,this.props.openMenu===Th.NOTES&&Bc.a.selected,this.state.shouldShowNewNoteNotification&&Bc.a.hasUnreadMessages].filter(Boolean).join(" ");return r.createElement(Q.c,{className:e,disabled:this.props.isJoining||!this.props.meetingNotesEnabled,onClick:this.onMeetingNotesClick,title:Object(z.Translate)("notes_header"),"aria-label":this.state.shouldShowNewNoteNotification?Object(z.Translate)("notes_header_assistive_notification"):Object(z.Translate)("notes_header")},r.createElement(_o,null))}onMeetingNotesClick(e){this.setState({shouldShowNewNoteNotification:!1}),this.lastActiveElement=document.activeElement,this.shouldIgnoreClick(e)||this.togglePane(Th.NOTES,document.activeElement)}renderClosedCaptionsButton(){const e=[Bc.a.sidebarButton,this.props.openMenu===Th.CLOSED_CAPTIONS&&Bc.a.closedcaptionselected].filter(Boolean).join(" ");return r.createElement(Q.c,{className:e,disabled:this.props.isJoining,onClick:this.onClosedCaptionsClick,title:Object(z.Translate)("closed_captions_header"),"aria-label":Object(z.Translate)("closed_captions_header")},r.createElement(So,null))}onClosedCaptionsClick(e){this.shouldIgnoreClick(e)||this.togglePane(Th.CLOSED_CAPTIONS,document.activeElement)}renderLayoutsButton(){const e=[Bc.a.sidebarButton,this.props.openMenu===Th.LAYOUTS&&Bc.a.selected].filter(Boolean).join(" ");return r.createElement(Q.c,{className:e,disabled:this.props.isJoining||this.props.availableLayouts.length<=1,onClick:this.onLayoutsClick,title:Object(z.Translate)("call_sidebar_layouts_header")},r.createElement(lo,null))}onLayoutsClick(e){this.shouldIgnoreClick(e)||this.togglePane(Th.LAYOUTS,document.activeElement)}renderFileShareButton(){this.props.openMenu===Th.FILE_SHARE&&this.setState({shouldShowNewFilesNotification:!1});const e=[Bc.a.sidebarButton,this.props.openMenu===Th.FILE_SHARE&&Bc.a.selected,this.state.shouldShowNewFilesNotification&&this.props.isSignedIn&&Bc.a.hasUnreadMessages].filter(Boolean).join(" ");return r.createElement(Q.c,{className:e,disabled:!this.props.isSignedIn||!this.props.isEltaninEnabled||this.props.isJoining||this.checkForInvalidEltaninIP,onClick:this.onFileShareClick,title:Object(z.Translate)("meeting_file_sharing"),"aria-label":this.state.shouldShowNewFilesNotification&&this.props.isSignedIn?Object(z.Translate)("meeting_file_sharing_assistive"):Object(z.Translate)("meeting_file_sharing")},r.createElement(vo,null))}onFileShareClick(e){this.setState({shouldShowNewFilesNotification:!1}),this.shouldIgnoreClick(e)||this.togglePane(Th.FILE_SHARE,document.activeElement)}renderControlsButton(){const e=[Bc.a.sidebarButton,this.props.openMenu===Th.CONTROLS&&Bc.a.selected].filter(Boolean).join(" "),t=this.props.permissions.canControlRecording||this.props.permissions.canControlStreaming||this.props.permissions.blockOthersAudio||this.props.permissions.blockOthersVideo||this.props.permissions.lockConference;return r.createElement(Q.c,{className:e,disabled:this.props.isJoining||!t,onClick:this.onControlsClick,title:Object(z.Translate)("call_sidebar_controls_header")},r.createElement(po,null))}onControlsClick(e){this.shouldIgnoreClick(e)||this.togglePane(Th.CONTROLS,document.activeElement)}renderJoinInformationButton(){const e=[Bc.a.sidebarButton,this.props.openMenu===Th.JOIN_INFORMATION&&Bc.a.selected].filter(Boolean).join(" ");return r.createElement(Q.c,{disabled:this.props.isJoining||!this.props.isJoinInfoPaneReady,className:e,onClick:this.onJoinInformationClick,title:Object(z.Translate)("call_sidebar_call_info_header"),"aria-label":Object(z.Translate)("call_sidebar_call_info_header")},r.createElement(Sr,null))}onJoinInformationClick(e){this.shouldIgnoreClick(e)||this.togglePane(Th.JOIN_INFORMATION,document.activeElement)}renderHelpButton(){const e=[Bc.a.sidebarButton,Bc.a.helpButton].filter(Boolean).join(" ");return r.createElement(Pe.a,{"aria-label":Object(z.Translate)("in_meeting_menu_options_help"),className:e,isHelpClickIgnored:e=>this.shouldIgnoreClick(e),helpLocation:Xl.a.IN_MEETING_MENU_OPTIONS})}renderDiagnosticsButton(){const e=[Bc.a.sidebarButton,this.props.isDiagnosticsDialogOpen&&Bc.a.selected,Bc.a.diagnosticsButton].filter(Boolean).join(" ");return r.createElement(Q.c,{className:e,onClick:this.onDiagnosticsClick,title:Object(z.Translate)("diagnostics_title"),"aria-label":Object(z.Translate)("diagnostics_title")},r.createElement(Ys,null))}onDiagnosticsClick(e){this.shouldIgnoreClick(e)||(this.props.dismissDiagnosticsNotification(),this.props.onShowDiagnosticsDialog())}renderFullscreenButton(){return r.createElement(Q.c,{title:Object(z.Translate)("call_fullscreen_button"),"aria-label":Object(z.Translate)("call_fullscreen_button"),className:[Bc.a.fullscreenButton,Bc.a.sidebarButton].join(" "),onClick:this.onFullscreenClick,toggled:this.state.isFullscreen},this.state.isFullscreen?r.createElement($o,null):r.createElement(Xo,null))}onFullscreenClick(e){this.shouldIgnoreClick(e)||(this.state.isFullscreen?document.exitFullscreen():document.documentElement.requestFullscreen())}handleFullscreenChange(){this.setState({isFullscreen:!!document.fullscreenElement})}onClosePane(){this.props.onOpenMenuChange(Th.NONE),document.body.contains(this.lastActiveElement)&&this.lastActiveElement&&this.lastActiveElement.focus()}onKeyPressed(e){"Escape"===e.key&&this.onClosePane()}togglePane(e,t){this.lastActiveElement=t,this.props.openMenu===e?this.props.onOpenMenuChange(Th.NONE):this.props.onOpenMenuChange(e)}hideLobbyNotification(){this.setState({isShowingLobbyNotification:!1})}onOldestUnreadChatMessageIdxChange(e){this.setState({oldestUnreadChatMessageIdx:e})}}var Nh=Object(c.b)(e=>({availableLayouts:b.l(e),isDiagnosticsDialogOpen:b.H(e)===Ue.a.SEND_DIAGNOSTICS,isJoining:b.vd(e),joinMode:b.gc(e),meetingNotesEnabled:b.Kd(e),isSurveyEnabled:b.Yd(e),closedCaptionsEnabled:b.ed(e),fileShareEnabled:b.pd(e),numChatMessages:re(e),participants:le(e),participantsInLobbyCount:de(e),permissions:b.Pb(e),selectedLanguage:b.hc(e),isJoinInfoPaneReady:be(e),messageBoardEnabled:b.Hd(e),raisedHandCount:pe(e),meetingNotes:b.vb(e),sharedFiles:b.nc(e),isSignedIn:b.Vd(e),isEltaninEnabled:Object(bl.e)(e),activeSurvey:b.e(e)}),e=>({dismissDiagnosticsNotification:()=>e(Object(ve.g)()),onShowDiagnosticsDialog:()=>e(Object(Le.c)(Ue.a.SEND_DIAGNOSTICS))}))(Oh);function yh(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class jh extends r.PureComponent{constructor(e){super(e),yh(this,"activityTimeout",void 0),yh(this,"onActivity",o.a.throttle(this.triggerOnActivity,250)),yh(this,"eltaninIP",d.getStorageVariable(_.a.ELTANIN_ADDRESS)),this.activityTimeout=0,this.state={isUserActive:!0,openCallMenu:Th.NONE},this.onActivity=this.onActivity&&this.onActivity.bind(this),this.onCameraMuteToggle=this.onCameraMuteToggle.bind(this),this.onMicrophoneMuteToggle=this.onMicrophoneMuteToggle.bind(this),this.onOpenMenuChange=this.onOpenMenuChange.bind(this),this.renderCallClientContents=this.renderCallClientContents.bind(this),this.props.bootstrapCallClient()}componentDidMount(){this.triggerOnActivity(),window.addEventListener("pageshow",this.onPageShow)}componentWillUnmount(){this.onActivity=void 0,clearTimeout(this.activityTimeout),this.props.onUnmounted(),window.removeEventListener("pageshow",this.onPageShow)}render(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(je,null),l.a.createElement(dt,null),this.props.isInCall&&this.props.isEltaninEnabled&&"null"!==this.eltaninIP&&l.a.createElement(se,{permissions:this.props.permissionsReceived,surveyEnabled:this.props.isSurveyEnabled,fileShareEnabled:this.props.fileShareEnabled}),this.renderCallClientContents())}onPageShow(e){e.persisted&&document.location.reload()}renderCallClientContents(){if(this.props.isShowingJoinOptions)return l.a.createElement(Ic,{isCameraMuted:this.props.isCameraMuted,isMicrophoneMuted:this.props.isMicrophoneMuted,onCameraMuteToggle:this.onCameraMuteToggle,onMicrophoneMuteToggle:this.onMicrophoneMuteToggle});if(this.props.isMediaDisconnected)this.props.onShowDialog(Ue.a.RECONNECT_MEDIA_CONFIRMATION);else if(this.props.isShowingCallDropped)return l.a.createElement(Ge,null);return l.a.createElement("section",{dir:"ltr",className:n.a.call,onKeyDown:this.onActivity,onKeyUp:this.onActivity,onClick:this.onActivity,onMouseMove:this.onActivity,onTouchMove:this.onActivity},l.a.createElement(Yl,{isCallMenuOpen:this.state.openCallMenu!==Th.NONE,isCameraBlocked:this.props.isCameraBlocked,isCameraMuted:this.props.isCameraMuted,isMicrophoneBlocked:this.props.isMicrophoneBlocked,isMicrophoneMuted:this.props.isMicrophoneMuted,onCameraMuteToggle:this.onCameraMuteToggle,isActive:this.state.isUserActive,onMicrophoneMuteToggle:this.onMicrophoneMuteToggle}),l.a.createElement(Nh,{className:n.a.callMenu,isActive:this.state.isUserActive,onOpenMenuChange:this.onOpenMenuChange,openMenu:this.state.openCallMenu}))}onOpenMenuChange(e){this.setState({openCallMenu:e})}triggerOnActivity(){this.onActivity&&(clearTimeout(this.activityTimeout),this.setActive(!0),this.activityTimeout=setTimeout(()=>{this.setActive(!1)},Ce.q))}setActive(e){this.setState({isUserActive:e})}onMicrophoneMuteToggle(){this.props.isMicrophoneMuted||this.props.isMicrophoneBlocked&&this.props.isInStudioModeAudio?(this.props.isMicrophoneBlocked&&this.props.voidNextUnblockNotification(k.f.MICROPHONE),this.props.isMicrophoneMuted&&this.props.onUnmuteMicrophone(this.props.joinParams),this.props.isMicrophoneBlocked&&this.props.onUnblockParticipantAudio(Object(J.c)())):this.props.onMuteMicrophone(this.props.joinParams)}onCameraMuteToggle(){this.props.isCameraMuted||this.props.isCameraBlocked&&this.props.isInStudioModeVideo?(this.props.isCameraBlocked&&this.props.voidNextUnblockNotification(k.f.CAMERA),this.props.isCameraMuted&&this.props.onUnmuteCamera(this.props.joinParams),this.props.isCameraBlocked&&this.props.onUnblockParticipantVideo(Object(J.c)())):this.props.onMuteCamera(this.props.joinParams)}}const Mh=Object(c.b)(e=>({isCameraBlocked:b.cd(e),isCameraMuted:b.dd(e),isMicrophoneBlocked:b.Id(e),isMicrophoneMuted:b.Jd(e),isInStudioModeAudio:b.td(e),isInStudioModeVideo:b.ud(e),isShowingCallDropped:ue(e),isMediaDisconnected:me(e),isShowingJoinOptions:_e(e),joinParams:Object(Se.a)(e),isInCall:b.sd(e),permissionsReceived:b.Pb(e),isEltaninEnabled:Object(bl.e)(e),isSurveyEnabled:b.Yd(e),fileShareEnabled:b.pd(e)}),e=>({bootstrapCallClient:()=>{e(U())},onUnmounted:()=>{H()},onMuteCamera:t=>e(Object(u.setCameraMute)(!0,t)),onMuteMicrophone:t=>e(Object(u.setMicrophoneMute)(!0,t)),onUnblockParticipantAudio:t=>e(Object(u.blockParticipantAudio)(t,!1)),onUnblockParticipantVideo:t=>e(Object(u.blockParticipantVideo)(t,!1)),onUnmuteCamera:t=>e(Object(u.setCameraMute)(!1,t)),onUnmuteMicrophone:t=>e(Object(u.setMicrophoneMute)(!1,t)),voidNextUnblockNotification:t=>e(Object(u.voidNextUnblockNotification)(t)),onShowDialog:t=>e(Object(Le.c)(t))}))(jh);t.default=Mh}}]);